(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{418:function(e,t,s){e.exports=s.p+"assets/img/Figure32.0adfd18d.png"},419:function(e,t,s){e.exports=s.p+"assets/img/Figure33.22b579fd.png"},420:function(e,t,s){e.exports=s.p+"assets/img/Figure34.0a5ba997.png"},421:function(e,t,s){e.exports=s.p+"assets/img/Figure35.0a5ba997.png"},422:function(e,t,s){e.exports=s.p+"assets/img/Figure36.236cec5f.png"},445:function(e,t,s){"use strict";s.r(t);var i=s(42),a=Object(i.a)({},(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[i("h1",{attrs:{id:"securing-hpe-ezmeral-container-platform-using-sysdig-secure-and-sysdig-monitor"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#securing-hpe-ezmeral-container-platform-using-sysdig-secure-and-sysdig-monitor"}},[e._v("#")]),e._v(" Securing HPE Ezmeral Container Platform using Sysdig Secure and Sysdig Monitor")]),e._v(" "),i("p",[e._v("To address the security challenges that exist in containerized environments, this solution leverages the Sysdig SaaS Platform to secure and monitor the HPE Ezmeral Container Platform, an enterprise-ready Kubernetes platform that is installed and configured on HPE Synergy Composable Infrastructure. After the HPE Ezmeral Container Platform Kubernetes cluster is deployed, cluster access is granted to the Sysdig SaaS Platform. The Sysdig SaaS Platform is a cloud-based service where the security and monitoring services will be available to the user based on the choice of subscription. For security and monitoring of HPE Ezmeral Container Platform containers, it is required to install the Sysdig Agent on the Kubernetes cluster. This means Sysdig Agents that are lightweight entities will be installed within each node in the HPE Ezmeral Container Platform Kubernetes cluster. These agents run as a daemon to enable Sysdig Monitor and Sysdig Secure functionality.")]),e._v(" "),i("p",[e._v("Sysdig Monitor provides deep, process-level visibility into dynamic, distributed production environment. Sysdig Secure provides image scanning, run-time protection, and forensics to identify vulnerabilities, block threats, enforce compliance, and audit activity across the Kubernetes cluster.")]),e._v(" "),i("p",[e._v("The key security benefits are:")]),e._v(" "),i("ul",[i("li",[i("p",[e._v("Faster incident resolution using Sysdig Monitor for the cluster.")])]),e._v(" "),i("li",[i("p",[e._v("Simplified compliance for the entire solution.")])]),e._v(" "),i("li",[i("p",[e._v("Service-based access control for container security and monitoring.")])]),e._v(" "),i("li",[i("p",[e._v("Less time spent on managing platforms, containers, and vulnerabilities.")])])]),e._v(" "),i("p",[e._v("The implementation of Sysdig in this solution uses the Software as a Service (SaaS) deployment method. The playbooks deploy Sysdig Agent software to capture the data from every node in the HPE Ezmeral Container Platform Kubernetes deployment and the captured data is relayed back to your Sysdig SaaS Cloud portal. The deployment provides access to a 90-day try-and-buy, fully featured version of the Sysdig software. For more information about Sysdig agent deployment, see the HPE solutions for the HPE Ezmeral Container Platform GitHub at "),i("a",{attrs:{href:"https://github.com/HewlettPackard/hpe-solutions-hpecp",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://github.com/HewlettPackard/hpe-solutions-hpecp"),i("OutboundLink")],1),e._v(".")]),e._v(" "),i("p",[e._v("To install the Sysdig agents in an automated way, use the repository located at "),i("a",{attrs:{href:"https://github.com/HewlettPackard/hpe-solutions-hpecp",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://github.com/HewlettPackard/hpe-solutions-hpecp"),i("OutboundLink")],1),e._v(". The folder scripts/security/sysdig within this repository contains the following:")]),e._v(" "),i("ul",[i("li",[i("p",[e._v("Playbooks: This folder contains the playbooks required for Sysdig agent installation.")])]),e._v(" "),i("li",[i("p",[e._v('Roles: This folder contains a role called "sysdig-agent-deploy-hpecp" which is responsible for performing the actions required for Sysdig agent integration.')])]),e._v(" "),i("li",[i("p",[e._v("Hosts: This is the inventory file that will be used by the installer VM to reference hosts during Sysdig agent deployment. Provide the installer VM or the server which can access the Kubernetes cluster.")])])]),e._v(" "),i("p",[e._v("Figure 32 shows an overview of the steps involved in configuring composer security via automation.")]),e._v(" "),i("p",[i("img",{attrs:{src:s(418),alt:""}}),e._v("\nFigure 32. Flow of execution for composer security")]),e._v(" "),i("div",{staticClass:"custom-block warning"},[i("p",{staticClass:"custom-block-title"},[e._v("Prerequisites")]),e._v(" "),i("p",[e._v("To successfully deploy Sysdig agents on the nodes, the following prerequisites must be met:")]),e._v(" "),i("ul",[i("li",[i("p",[e._v("HPE Ezmeral Container Platform Kubernetes cluster is up and running.")])]),e._v(" "),i("li",[i("p",[e._v("The installation user has SaaS-based access to Sysdig Secure and Sysdig Monitor for the purpose of container security.")])]),e._v(" "),i("li",[i("p",[e._v("The installation user has admin privileges for Sysdig Secure and Sysdig Monitor.")])]),e._v(" "),i("li",[i("p",[e._v("Sysdig agents with version 9.5.0 are deployed on HPE Ezmeral Container Platform.")])]),e._v(" "),i("li",[i("p",[e._v("The installation user has a valid access token that is given by Sysdig and is specific to their credentials on Sysdig Monitor and Sysdig Secure.")])])])]),e._v(" "),i("h2",{attrs:{id:"custom-attributes-or-variable-files-and-plays"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#custom-attributes-or-variable-files-and-plays"}},[e._v("#")]),e._v(" Custom attributes or variable files and plays")]),e._v(" "),i("p",[e._v('Each playbook has a role associated with it. Each role has a set of tasks under the "'),i("em",[e._v("task")]),e._v('" folder and variables under the "'),i("em",[e._v("var")]),e._v('" folder. These variable values must be defined by the installation user according to the installation environment before running the plays:')]),e._v(" "),i("ul",[i("li",[i("p",[e._v("roles/sysdig-agent-deploy-hpecp/vars/main.yml: Used during Sysdig agent deployment to HPE Ezmeral Container Platform Kubernetes cluster. This file contains Sysdig-related variables.")])]),e._v(" "),i("li",[i("p",[e._v("sysdig-agent-deploy-hpecp/tasks/main.yml: This file contains the actual Sysdig agent installation steps.")])]),e._v(" "),i("li",[i("p",[e._v("sysdig-agent-deploy-hpecp/files/sysdig-agent-configmap.yaml: This file is provided by Sysdig and handles the Sysdig software related configuration.")])]),e._v(" "),i("li",[i("p",[e._v("roles/sysdig-agent-deploy-hpecp/files/sysdig-agent-daemonset-v2.yaml: This file is provided by Sysdig and handles the Sysdig daemon related configuration.")])])]),e._v(" "),i("h2",{attrs:{id:"executing-the-playbooks"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#executing-the-playbooks"}},[e._v("#")]),e._v(" Executing the playbooks")]),e._v(" "),i("p",[e._v("This section describes the steps that need to be performed to use the playbooks:")]),e._v(" "),i("ol",[i("li",[i("p",[e._v("Login to the installer VM.")])]),e._v(" "),i("li",[i("p",[e._v("Browse the cloned directory and navigate to the following sub-directory.")]),e._v(" "),i("div",{staticClass:"language-bash extra-class"},[i("pre",{pre:!0,attrs:{class:"language-bash"}},[i("code",[i("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" "),i("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("cd")]),e._v(" BASE_DIR/security/sysdig\n")])])]),i("div",{staticClass:"custom-block tip"},[i("p",{staticClass:"custom-block-title"},[e._v("NOTE")]),e._v(" "),i("p",[e._v("BASE_DIR is defined and set in Installer machine section within this document.")])])]),e._v(" "),i("li",[i("p",[e._v("Update the variables in the following files.")])])]),e._v(" "),i("ul",[i("li",[i("p",[e._v("Provide the Installer VM or the server which has access to the HPE Ezmeral Container Platform Kubernetes cluster [master].")])]),e._v(" "),i("li",[i("p",[e._v("Edit the file "),i("em",[e._v("/roles/sysdig-agent-deploy-hpecp/vars/main.yml")]),e._v(".")])]),e._v(" "),i("li",[i("p",[e._v('Provide a value for the namespace for the Sysdig integration with HPE Ezmeral Container Platform under the "namespace" variable.')])]),e._v(" "),i("li",[i("p",[e._v('Provide the Sysdig access key or token value. This value is retrieved from the user setting by logging into Sysdig Secure or Sysdig Monitor GUI in "accesskeyval" variable.')])]),e._v(" "),i("li",[i("p",[e._v("Edit the file "),i("em",[e._v("/roles/sysdig-agent-deploy-hpecp/files/sysdig-agent-configmap.yaml")]),e._v(".")])]),e._v(" "),i("li",[i("p",[e._v("Enter the Sysdig Collector address and port. Check with Sysdig about which collector is accessible in the installation environment and over which port.")])]),e._v(" "),i("li",[i("p",[e._v('Hewlett Packard Enterprise recommends access of Sysdig collector over Secure Socket Layer (SSL) port. For both the "ssl" and "ssl certificate validate" keys, set the value as "true".')])]),e._v(" "),i("li",[i("p",[e._v("Set the variable related to the underlying Kubernetes deployment to true.")])]),e._v(" "),i("li",[i("p",[e._v("Enter the cluster name of the Kubernetes cluster.")])])]),e._v(" "),i("ol",{attrs:{start:"4"}},[i("li",[e._v("Run the play using following command."),i("div",{staticClass:"language-bash extra-class"},[i("pre",{pre:!0,attrs:{class:"language-bash"}},[i("code",[i("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" ansible-playbook -i hosts playbooks/sysdig-agent-deployment.yaml\n")])])])]),e._v(" "),i("li",[e._v("To verify the deployment, login to the server which has access to the Kubernetes cluster and execute the following command."),i("div",{staticClass:"language-bash extra-class"},[i("pre",{pre:!0,attrs:{class:"language-bash"}},[i("code",[i("span",{pre:!0,attrs:{class:"token function"}},[e._v("bash")]),e._v(" kubectl get all -n sysdig-agent\n")])])])])]),e._v(" "),i("p",[e._v("The output of this command displays the Sysdig agent names running on each of the nodes within the HPE Ezmeral Container Platform Kubernetes cluster. If you see a pod with a pending status, then there might be a possibility that the underlying HPE Ezmeral Container Platform worker node is not functional.")]),e._v(" "),i("p",[e._v("Figure 33 depicts the Sysdig agents running on HPE Ezmeral Container Platform Kubernetes nodes.")]),e._v(" "),i("p",[i("img",{attrs:{src:s(419),alt:""}})]),e._v(" "),i("p",[i("strong",[e._v("Figure 33.")]),e._v(" Sysdig agents running on Kubernetes nodes")]),e._v(" "),i("ol",{attrs:{start:"6"}},[i("li",[i("p",[e._v("Login to Sysdig Secure web interface at "),i("a",{attrs:{href:"https://sysdig.com/",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://sysdig.com/"),i("OutboundLink")],1),e._v(" as a user with administrative privileges.")])]),e._v(" "),i("li",[i("p",[e._v("From the Sysdig Secure web interface, click the icon named POLICY EVENTS and you will see the web interface for Policy Events tab. On the Policy Events tab, click the Groupings drop-down list and select Entire Infrastructure. The user with administrative privileges should be able to see all the cluster nodes.")])])]),e._v(" "),i("p",[e._v("Figure 34 depicts the HPE Ezmeral Container Platform Kubernetes cluster in Sysdig Secure.")]),e._v(" "),i("p",[i("img",{attrs:{src:s(420),alt:""}})]),e._v(" "),i("p",[i("strong",[e._v("Figure 34.")]),e._v(" HPE Ezmeral Container Platform Kubernetes cluster in Sysdig Secure")]),e._v(" "),i("ol",{attrs:{start:"8"}},[i("li",[i("p",[e._v("From the Sysdig Monitor web interface, click Explore icon and you will see the web interface for the "),i("strong",[e._v("Explore")]),e._v(" tab. On the "),i("em",[e._v("Explore")]),e._v(" tab, click the Data Source(two rectangles) drop-down menu and select the data source named "),i("strong",[e._v("Sysdig Agents")]),e._v(" from the drop-down list.")])]),e._v(" "),i("li",[i("p",[e._v("Open the Groupings drop-down list and select Clusters and Nodes. The user with administrative privileges should be able to see all the HPE Ezmeral Container Platform Kubernetes nodes.")])])]),e._v(" "),i("p",[e._v("Figure 35 depicts the HPE Ezmeral Container Platform Kubernetes cluster in Sysdig Monitor.")]),e._v(" "),i("p",[i("img",{attrs:{src:s(421),alt:""}})]),e._v(" "),i("p",[i("strong",[e._v("Figure 35.")]),e._v(" HPE Ezmeral Container Platform Kubernetes cluster in Sysdig Monitor")]),e._v(" "),i("div",{staticClass:"custom-block tip"},[i("p",{staticClass:"custom-block-title"},[e._v("NOTE")]),e._v(" "),i("p",[e._v("For an explanation of host requirements for agent installation, see "),i("a",{attrs:{href:"https://docs.sysdig.com/en/host-requirements-for-agent-installation.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://docs.sysdig.com/en/host-requirements-for-agent-installation.html"),i("OutboundLink")],1),e._v(".")]),e._v(" "),i("p",[e._v("It is recommended to use port 6443 to transfer data over Secure Socket Layer/ Transport Layer Security (SSL/TLS) protocol. Sysdig agents transfer data to Sysdig Cloud over HTTPS that encrypts and decrypts the requests and the responses returned by the Sysdig Cloud.")])]),e._v(" "),i("ol",{attrs:{start:"10"}},[i("li",[e._v("From the Sysdig Monitor web interface, click the EXPLORE icon. On the "),i("em",[e._v("Explore")]),e._v(" tab, click the Data Source(two rectangles) drop-down menu and select the data source named Sysdig Agents from the drop-down list. Open the Groupings drop-down list and select Deployment and Pods. A user with administrative privileges should be able to see all the agents and their details.")])]),e._v(" "),i("p",[e._v("Figure 36 depicts the Sysdig agents running on HPE Ezmeral Container Platform Kubernetes cluster.")]),e._v(" "),i("p",[i("img",{attrs:{src:s(422),alt:""}})]),e._v(" "),i("p",[i("strong",[e._v("Figure 36.")]),e._v(" Sysdig agents running on HPE Ezmeral Container Platform Kubernetes cluster")])])}),[],!1,null,null,null);t.default=a.exports}}]);