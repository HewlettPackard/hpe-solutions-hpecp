(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{529:function(e,t,s){e.exports=s.p+"assets/img/SD-SH-1.8eaad766.png"},530:function(e,t,s){e.exports=s.p+"assets/img/SD-SH-2.4a4a8945.png"},531:function(e,t,s){e.exports=s.p+"assets/img/SD-SH-3.df274f75.png"},532:function(e,t,s){e.exports=s.p+"assets/img/SD-SH-4.df274f75.png"},533:function(e,t,s){e.exports=s.p+"assets/img/SD-SH-5.687ca364.png"},572:function(e,t,s){"use strict";s.r(t);var n=s(42),i=Object(n.a)({},(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[n("h1",{attrs:{id:"securing-hpe-ezmeral-container-platform-using-sysdig-secure-and-sysdig-monitor"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#securing-hpe-ezmeral-container-platform-using-sysdig-secure-and-sysdig-monitor"}},[e._v("#")]),e._v(" Securing HPE Ezmeral Container Platform using Sysdig Secure and Sysdig Monitor")]),e._v(" "),n("p",[e._v("To address the security challenges that exist in containerized\nenvironments, this solution leverages the Sysdig SaaS Platform to secure\nand monitor the HPE Ezmeral Container Platform, an enterprise-ready\nKubernetes platform that is installed and configured on HPE Synergy\nComposable Infrastructure. After the HPE Ezmeral Container Platform\nKubernetes cluster is deployed, cluster access is granted to the Sysdig\nSaaS Platform. The Sysdig SaaS Platform is a cloud-based service where\nthe security and monitoring services will be available to the user based\non the choice of subscription. For security and monitoring of HPE\nEzmeral Container Platform containers, it is required to install the\nSysdig Agent on the Kubernetes cluster. This means Sysdig Agents that\nare lightweight entities will be installed within each node in the HPE\nEzmeral Container Platform Kubernetes cluster. These agents run as a\ndaemon to enable Sysdig Monitor and Sysdig Secure functionality.")]),e._v(" "),n("p",[e._v("Sysdig Monitor provides deep, process-level visibility into dynamic,\ndistributed production environment. Sysdig Secure provides image\nscanning, run-time protection, and forensics to identify\nvulnerabilities, block threats, enforce compliance, and audit activity\nacross the Kubernetes cluster.")]),e._v(" "),n("p",[e._v("The key security benefits are:")]),e._v(" "),n("ul",[n("li",[n("p",[e._v("Faster incident resolution using Sysdig Monitor for the cluster.")])]),e._v(" "),n("li",[n("p",[e._v("Simplified compliance for the entire solution.")])]),e._v(" "),n("li",[n("p",[e._v("Service-based access control for container security and monitoring.")])]),e._v(" "),n("li",[n("p",[e._v("Less time spent on managing platforms, containers, and\nvulnerabilities.")])])]),e._v(" "),n("p",[e._v("The implementation of Sysdig in this solution uses the Software as a\nService (SaaS) deployment method. The playbooks deploy Sysdig Agent\nsoftware to capture the data from every node in the HPE Ezmeral\nContainer Platform Kubernetes deployment and the captured data is\nrelayed back to your Sysdig SaaS Cloud portal. The deployment provides\naccess to a 90-day try-and-buy, fully featured version of the Sysdig\nsoftware. For more information about Sysdig agent deployment, see the\nHPE solutions for the HPE Ezmeral Container Platform GitHub at\n"),n("a",{attrs:{href:"https://github.com/HewlettPackard/hpe-solutions-hpecp",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://github.com/HewlettPackard/hpe-solutions-hpecp"),n("OutboundLink")],1)]),e._v(" "),n("p",[e._v("for configuring Sysdig for HPE Ezmeral Container Platform")]),e._v(" "),n("p",[e._v("To install the Sysdig agents in an automated way, use the repository\nlocated at "),n("a",{attrs:{href:"https://github.com/HewlettPackard/hpe-solutions-hpecp",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://github.com/HewlettPackard/hpe-solutions-hpecp"),n("OutboundLink")],1),e._v(".\nThe folder scripts/security/sysdig within this repository contains the\nfollowing:")]),e._v(" "),n("ul",[n("li",[n("p",[e._v("Playbooks: This folder contains the playbooks required for Sysdig agent installation.")])]),e._v(" "),n("li",[n("p",[e._v('Roles: This folder contains a role called\n"sysdig-agent-deploy-hpecp" which is responsible for performing\nthe actions required for Sysdig agent integration.')])]),e._v(" "),n("li",[n("p",[e._v("Hosts: This is the inventory file that will be used by the installer\nVM to reference hosts during Sysdig agent deployment. Provide the\ninstaller VM or the server which can access the Kubernetes\ncluster.")])])]),e._v(" "),n("p",[e._v("Figure 64 shows an overview of the steps involved in configuring\ncomposer security via the automation.\n"),n("img",{attrs:{src:s(529),alt:""}}),e._v(" "),n("strong",[e._v("Figure 64.")]),e._v(" Flow of execution for composer security")]),e._v(" "),n("div",{staticClass:"custom-block warning"},[n("p",{staticClass:"custom-block-title"},[e._v("PREREQUISITES")]),e._v(" "),n("p",[e._v("To successfully deploy Sysdig agents on the nodes, the following\nprerequisites must be met:")]),e._v(" "),n("ul",[n("li",[n("p",[e._v("HPE Ezmeral Container Platform Kubernetes cluster is up and running.")])]),e._v(" "),n("li",[n("p",[e._v("The installation user has SaaS-based access to Sysdig Secure and\nSysdig Monitor for the purpose of container security.")])]),e._v(" "),n("li",[n("p",[e._v("The installation user has admin privileges for Sysdig Secure and\nSysdig Monitor.")])]),e._v(" "),n("li",[n("p",[e._v("Sysdig agents with latest version deployed on HPE Ezmeral Container\nPlatform.")])]),e._v(" "),n("li",[n("p",[e._v("The installation user has a valid access token that is given by\nSysdig and is specific to their credentials on Sysdig Monitor and\nSysdig Secure.")])])])]),e._v(" "),n("h2",{attrs:{id:"custom-attributes-or-variable-files-and-plays"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#custom-attributes-or-variable-files-and-plays"}},[e._v("#")]),e._v(" Custom attributes or variable files and plays")]),e._v(" "),n("p",[e._v('Each playbook has a role associated with it. Each role has a set of\ntasks under the "'),n("em",[e._v("task")]),e._v('" folder and variables under the "'),n("em",[e._v("var")]),e._v('"\nfolder. These variable values must be defined by the installation user\naccording to the installation environment before running the plays:')]),e._v(" "),n("ul",[n("li",[n("p",[e._v("roles/sysdig-agent-deploy-hpecp/vars/main.yml: Used during Sysdig\nagent deployment to HPE Ezmeral Container Platform Kubernetes\ncluster. This file contains Sysdig-related variables.")])]),e._v(" "),n("li",[n("p",[e._v("sysdig-agent-deploy-hpecp/tasks/main.yml: This file contains the\nactual Sysdig agent installation steps.")])]),e._v(" "),n("li",[n("p",[e._v("sysdig-agent-deploy-hpecp/files/sysdig-agent-configmap.yaml: This\nfile is provided by Sysdig and handles the Sysdig software related\nconfiguration.")])]),e._v(" "),n("li",[n("p",[e._v("roles/sysdig-agent-deploy-hpecp/files/sysdig-agent-daemonset-v2.yaml:\nThis file is provided by Sysdig and handles the Sysdig daemon\nrelated configuration.")])])]),e._v(" "),n("h2",{attrs:{id:"executing-the-playbooks"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#executing-the-playbooks"}},[e._v("#")]),e._v(" Executing the playbooks")]),e._v(" "),n("p",[e._v("This section describes the steps that need to be performed to use the\nplaybooks:")]),e._v(" "),n("ol",[n("li",[n("p",[e._v("Login to the installer VM.")])]),e._v(" "),n("li",[n("p",[e._v("Browse the cloned directory and navigate to the following\nsub-directory.")]),e._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("cd")]),e._v(" "),n("span",{pre:!0,attrs:{class:"token variable"}},[e._v("$BASE_DIR")]),e._v("/security/sysdig\n")])])]),n("div",{staticClass:"custom-block tip"},[n("p",{staticClass:"custom-block-title"},[e._v("NOTE")]),e._v(" "),n("p",[e._v("$BASE_DIR is defined and set in Installer machine section within this\ndocument.")])])]),e._v(" "),n("li",[n("p",[e._v("Update the variables in the following files.")]),e._v(" "),n("ul",[n("li",[n("p",[e._v("Provide the Installer VM or the server which has access to the HPE\nEzmeral Container Platform Kubernetes cluster [master].")])]),e._v(" "),n("li",[n("p",[e._v("Edit the file "),n("em",[e._v("/roles/sysdig-agent-deploy-hpecp/vars/main.yml")]),e._v(".")])]),e._v(" "),n("li",[n("p",[e._v('Provide a value for the namespace for the Sysdig integration with\nHPE Ezmeral Container Platform under the "namespace" variable.')])]),e._v(" "),n("li",[n("p",[e._v('Provide the Sysdig access key or token value. This value is\nretrieved from the user setting by logging into Sysdig Secure or\nSysdig Monitor GUI in "accesskeyval" variable.')])]),e._v(" "),n("li",[n("p",[e._v("Edit the file "),n("em",[e._v("/roles/sysdig-agent-deploy-hpecp/files/sysdig-agent-configmap.yaml")]),e._v(".")])]),e._v(" "),n("li",[n("p",[e._v("Enter the Sysdig Collector address and port. Check with Sysdig about\nwhich collector is accessible in the installation environment and\nover which port.")])]),e._v(" "),n("li",[n("p",[e._v('Hewlett Packard Enterprise recommends access of Sysdig collector\nover Secure Socket Layer (SSL) port. For both the "ssl" and\n"ssl certificate validate" keys, set the value as "true".')])])]),e._v(" "),n("p",[e._v("-Set the variable related to the underlying Kubernetes deployment to true.")]),e._v(" "),n("ul",[n("li",[e._v("Enter the cluster name of the Kubernetes cluster.")])])]),e._v(" "),n("li",[n("p",[e._v("Run the play using following command.")]),e._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" ansible-playbook -i hosts playbooks/sysdig-agent-deployment.yaml\n")])])])]),e._v(" "),n("li",[n("p",[e._v("To verify the deployment, login to the server which has access to\nthe Kubernetes cluster and execute the following command.")]),e._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" kubectl get all -n sysdig-agent\n")])])]),n("p",[e._v("The output of this command displays the Sysdig agent names running on\neach of the nodes within the HPE Ezmeral Container Platform Kubernetes\ncluster. If you see a pod with a pending status, then there might be a\npossibility that the underlying HPE Ezmeral Container Platform worker\nnode is not functional.")]),e._v(" "),n("p",[e._v("Figure 65 depicts the Sysdig agents running on HPE Ezmeral Container\nPlatform Kubernetes nodes.\n"),n("img",{attrs:{src:s(530),alt:""}}),e._v(" "),n("strong",[e._v("Figure 65.")]),e._v(" Sysdig agents running on Kubernetes nodes")])]),e._v(" "),n("li",[n("p",[e._v("Login to Sysdig Secure web interface at https://sysdig.com/ as a\nuser with administrative privileges.")])]),e._v(" "),n("li",[n("p",[e._v("From the Sysdig Secure web interface, click the icon named POLICY\nEVENTS and you will see the web interface for Policy Events tab. On the\nPolicy Events tab, click the Groupings drop-down list and select Entire\nInfrastructure. The user with administrative privileges should be able\nto see all the cluster nodes.")]),e._v(" "),n("p",[e._v("Figure 66 depicts the HPE Ezmeral Container Platform Kubernetes cluster\nin Sysdig Secure.\n"),n("img",{attrs:{src:s(531),alt:""}}),e._v(" "),n("strong",[e._v("Figure 66.")]),e._v(" HPECP Kubernetes cluster in Sysdig Secure.")])]),e._v(" "),n("li",[n("p",[e._v("From the Sysdig Monitor web interface, click Explore icon and you\nwill see the web interface for the "),n("em",[e._v("Explore")]),e._v(" tab. On the "),n("em",[e._v("Explore")]),e._v("\ntab, click the Data Source (two rectangles) drop-down menu and select\nthe data source named "),n("em",[e._v("Sysdig Agents")]),e._v(" from the drop-down list.")])]),e._v(" "),n("li",[n("p",[e._v("Open the Groupings drop-down list and select Clusters and Nodes. The\nuser with administrative privileges should be able to see all the HPE\nContainer Platform Kubernetes nodes.")]),e._v(" "),n("p",[e._v("Figure 67 depicts the HPE Ezmeral Container Platform Kubernetes cluster\nin Sysdig Monitor.\n"),n("img",{attrs:{src:s(532),alt:""}}),e._v(" "),n("strong",[e._v("Figure 67.")]),e._v(" HPE Ezmeral Container Platform Kubernetes cluster in Sysdig\nMonitor")]),e._v(" "),n("div",{staticClass:"custom-block tip"},[n("p",{staticClass:"custom-block-title"},[e._v("NOTE")]),e._v(" "),n("p",[e._v("For an explanation of host requirements for agent installation, see\n"),n("a",{attrs:{href:"https://docs.sysdig.com/en/host-requirements-for-agent-installation.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://docs.sysdig.com/en/host-requirements-for-agent-installation.html"),n("OutboundLink")],1),e._v(".")]),e._v(" "),n("p",[e._v("It is recommended to use port 6443 to transfer data over Secure Socket\nLayer/ Transport Layer Security (SSL/TLS) protocol. Sysdig agents\ntransfer data to Sysdig Cloud over HTTPS that encrypts and decrypts the\nrequests and the responses returned by the Sysdig Cloud.")])])]),e._v(" "),n("li",[n("p",[e._v("From the Sysdig Monitor web interface, click the EXPLORE icon. On\nthe "),n("em",[e._v("Explore")]),e._v(" tab, click the Data Source (two rectangles) drop-down\nmenu and select the data source named Sysdig Agentsfrom the drop-down\nlist. Open the Groupings drop-down list and select Deployment and Pods.\nA user with administrative privileges should be able to see all the\nagents and their details.")]),e._v(" "),n("p",[e._v("Figure 68 depicts the Sysdig agents running on HPE Ezmeral Container\nPlatform Kubernetes cluster.\n"),n("img",{attrs:{src:s(533),alt:""}}),e._v(" "),n("strong",[e._v("Figure 68.")]),e._v(" Sysdig agents running on HPE Container Platform Kubernetes\ncluster")])])])])}),[],!1,null,null,null);t.default=i.exports}}]);