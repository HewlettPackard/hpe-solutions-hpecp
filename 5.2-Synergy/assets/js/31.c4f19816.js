(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{534:function(e,a,t){e.exports=t.p+"assets/img/SD-SP-1.c1885845.png"},573:function(e,a,t){"use strict";t.r(a);var r=t(42),s=Object(r.a)({},(function(){var e=this,a=e.$createElement,r=e._self._c||a;return r("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[r("h1",{attrs:{id:"server-profiles"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#server-profiles"}},[e._v("#")]),e._v(" Server profiles")]),e._v(" "),r("p",[e._v('Server profiles are used to configure the personality of the compute\nresources. A server profile allows a set of configuration parameters,\nincluding firmware recipe, network and storage, BIOS tuning, boot order\nconfiguration, local storage configuration, and more to be templatized.\nThese templates are the key to deliver the "infrastructure as code"\ncapabilities of the HPE Synergy platform. For the purpose of this\nsolution, a template is created which can be leveraged for HPE Ezmeral\nContainer Platform controller, Kubernetes master and worker nodes.')]),e._v(" "),r("p",[r("img",{attrs:{src:t(534),alt:""}}),e._v(" "),r("strong",[e._v("Figure 13.")]),e._v(" High Level Flow of the Server Profile Creation")]),e._v(" "),r("h2",{attrs:{id:"automation-overview"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#automation-overview"}},[e._v("#")]),e._v(" Automation overview")]),e._v(" "),r("p",[e._v("The folder "),r("strong",[e._v("infrastructure")]),e._v(" within the folder $BASE_DIR contains\nAnsible scripts to automate the creation of server profiles in HPE\nOneView. The scripts are as follows:")]),e._v(" "),r("ol",[r("li",[r("p",[r("strong",[e._v("inputs.yml")]),e._v(": This file contains input variables to create the")]),e._v(" "),r("ul",[r("li",[e._v("server profile template and server profile.")])])]),e._v(" "),r("li",[r("p",[r("strong",[e._v("server_profile_fw.yml hosts")]),e._v(": This is the inventory file which")]),e._v(" "),r("ul",[r("li",[e._v("the installer VM will use to reference nodes for which the server")]),e._v(" "),r("li",[e._v("profile needs to be created.")])])]),e._v(" "),r("li",[r("p",[r("strong",[e._v("secret.yml")]),e._v(": This is an Ansible vault file that consists of")]),e._v(" "),r("ul",[r("li",[e._v("sensitive information, such as HPE OneView IP address and")]),e._v(" "),r("li",[e._v("credentials.")])])]),e._v(" "),r("li",[r("p",[r("strong",[e._v("playbooks")]),e._v(": This folder consists of playbooks to upload firmware")]),e._v(" "),r("ul",[r("li",[e._v("bundle, create server profile templates and the server profiles")]),e._v(" "),r("li",[e._v("for controller, gateway, master and worker nodes.")])])]),e._v(" "),r("li",[r("p",[r("strong",[e._v("roles")]),e._v(": This folder consists of Ansible roles to upload firmware")]),e._v(" "),r("ul",[r("li",[e._v("bundle, create the server profile template and server profile.")]),e._v(" "),r("li",[e._v("Each role is associated with a set of tasks to accomplish the")]),e._v(" "),r("li",[e._v("expected output and they are present in the task directory within")]),e._v(" "),r("li",[e._v("the role.")])])])]),e._v(" "),r("div",{staticClass:"custom-block tip"},[r("p",{staticClass:"custom-block-title"},[e._v("NOTE")]),e._v(" "),r("p",[e._v("The parameter names are case sensitive. Ensure that parameter names and\nfunctions are accurately recorded for the installation environment. Any\nvariation in parameter names and functions will result in the failure of\nautomated configuration steps.")])]),e._v(" "),r("h2",{attrs:{id:"automated-deployment-of-server-profile"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#automated-deployment-of-server-profile"}},[e._v("#")]),e._v(" Automated deployment of server profile")]),e._v(" "),r("p",[e._v("Perform the following steps to create server profiles for all the\nbare-metal nodes participating in the HPE Ezmeral Container Platform\ncluster.")]),e._v(" "),r("h3",{attrs:{id:"details-of-playbook"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#details-of-playbook"}},[e._v("#")]),e._v(" Details of playbook")]),e._v(" "),r("h4",{attrs:{id:"using-firmware-bundle"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#using-firmware-bundle"}},[e._v("#")]),e._v(" Using firmware bundle:")]),e._v(" "),r("ul",[r("li",[e._v("Execute the following command to upload the firmware bundle to\nOneView.")])]),e._v(" "),r("div",{staticClass:"language-bash extra-class"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[r("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" ansible-playbook -i hosts playbooks/upload_firmware_bundle.yml --ask-vault-pass\n")])])]),r("ul",[r("li",[e._v("Execute the following command to create and deploy the Server Profile\ntemplate along with Firmware bundle.")])]),e._v(" "),r("div",{staticClass:"language-bash extra-class"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[r("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" ansible-playbook -i hosts playbooks/server_profile_template_fw.yml --ask-vault-pass\n")])])]),r("ul",[r("li",[e._v("Execute the following command to create and deploy Server Profile,\nupdate the firmware on Synergy Compute Module and validate the firmware\nversions.")])]),e._v(" "),r("div",{staticClass:"language-bash extra-class"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[r("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" ansible-playbook -i hosts playbooks/server_profile_fw.yml --ask-vault-pass\n")])])]),r("h4",{attrs:{id:"without-using-firmware-bundle"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#without-using-firmware-bundle"}},[e._v("#")]),e._v(" Without using Firmware bundle:")]),e._v(" "),r("ul",[r("li",[e._v("Execute the following command to create and deploy the Server Profile\ntemplate without managed Firmware manually.")])]),e._v(" "),r("div",{staticClass:"language-bash extra-class"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[r("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" ansible-playbook -i hosts playbooks/server_profile_template.yml --ask-vault-pass\n")])])]),r("ul",[r("li",[e._v("Synergy compute module will manage firmware manually.Using the server\ntemplate, server profile will be assigned to each compute module.Execute\nthe following command to carry out this action.")])]),e._v(" "),r("div",{staticClass:"language-bash extra-class"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[r("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" ansible-playbook -i hosts playbooks/server_profile_fw.yml --ask-vault-pass\n")])])])])}),[],!1,null,null,null);a.default=s.exports}}]);