<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Server profiles | HPE EZMERAL CONTAINER PLATFORM 5.2 AND HPE EZMERAL DATA FABRIC ON HPE SYNERGY SERVERS</title>
    <meta name="generator" content="VuePress 1.7.1">
    
    <meta name="description" content="Hewlett Packard Enterprise">
    
    <link rel="preload" href="/hpe-solutions-hpecp/5.2-Synergy/assets/css/0.styles.a12a8344.css" as="style"><link rel="preload" href="/hpe-solutions-hpecp/5.2-Synergy/assets/js/app.bb190295.js" as="script"><link rel="preload" href="/hpe-solutions-hpecp/5.2-Synergy/assets/js/2.3bc06f99.js" as="script"><link rel="preload" href="/hpe-solutions-hpecp/5.2-Synergy/assets/js/31.c4f19816.js" as="script"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-Synergy/assets/js/10.55b6188a.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-Synergy/assets/js/11.0ee97fd6.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-Synergy/assets/js/12.f850f5e5.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-Synergy/assets/js/13.ff45a47d.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-Synergy/assets/js/14.93c37364.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-Synergy/assets/js/15.593aa3cd.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-Synergy/assets/js/16.de376ddf.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-Synergy/assets/js/17.6271735c.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-Synergy/assets/js/18.8cda808e.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-Synergy/assets/js/19.1ce15727.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-Synergy/assets/js/20.4fcac285.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-Synergy/assets/js/21.5265126b.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-Synergy/assets/js/22.5cc802db.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-Synergy/assets/js/23.3dc40cbc.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-Synergy/assets/js/24.733d95ce.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-Synergy/assets/js/25.94eb12d1.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-Synergy/assets/js/26.e5523b8a.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-Synergy/assets/js/27.0374acf3.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-Synergy/assets/js/28.e80886d5.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-Synergy/assets/js/29.f3f8cfcf.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-Synergy/assets/js/3.b4178863.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-Synergy/assets/js/30.e69119ff.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-Synergy/assets/js/32.0763fc12.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-Synergy/assets/js/33.f79c30ba.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-Synergy/assets/js/34.b02e5cb6.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-Synergy/assets/js/35.94fd45f9.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-Synergy/assets/js/36.08c0afbf.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-Synergy/assets/js/4.d284f65a.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-Synergy/assets/js/5.e6bb7fed.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-Synergy/assets/js/6.75bcd2e8.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-Synergy/assets/js/7.e8139c64.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-Synergy/assets/js/8.289bb78b.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-Synergy/assets/js/9.0805e14f.js">
    <link rel="stylesheet" href="/hpe-solutions-hpecp/5.2-Synergy/assets/css/0.styles.a12a8344.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/hpe-solutions-hpecp/5.2-Synergy/" class="home-link router-link-active"><!----> <span class="site-name">HPE EZMERAL CONTAINER PLATFORM 5.2 AND HPE EZMERAL DATA FABRIC ON HPE SYNERGY SERVERS</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/hpe-solutions-hpecp/5.2-Synergy/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="http://www.hpe.com/info/ra" target="_blank" rel="noopener noreferrer" class="nav-link external">
  RA Library
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/hpe-solutions-hpecp/5.2-Synergy/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="http://www.hpe.com/info/ra" target="_blank" rel="noopener noreferrer" class="nav-link external">
  RA Library
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>HPE EZMERAL CONTAINER PLATFORM 5.2 on HPE Synergy</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Solution Overview</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Solution Components</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Solution Deployment</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/hpe-solutions-hpecp/5.2-Synergy/Solution-Deployment/Solution-Deployment-Flow.html" class="sidebar-link">Solution Deployment Flow</a></li><li><a href="/hpe-solutions-hpecp/5.2-Synergy/Solution-Deployment/Host-Configuration.html" class="sidebar-link">Host configuration</a></li><li><a href="/hpe-solutions-hpecp/5.2-Synergy/Solution-Deployment/Server-Profiles.html" aria-current="page" class="active sidebar-link">Server profiles</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/hpe-solutions-hpecp/5.2-Synergy/Solution-Deployment/Server-Profiles.html#automation-overview" class="sidebar-link">Automation overview</a></li><li class="sidebar-sub-header"><a href="/hpe-solutions-hpecp/5.2-Synergy/Solution-Deployment/Server-Profiles.html#automated-deployment-of-server-profile" class="sidebar-link">Automated deployment of server profile</a></li></ul></li><li><a href="/hpe-solutions-hpecp/5.2-Synergy/Solution-Deployment/Deploying-OS-On-Bare-Metal-Nodes.html" class="sidebar-link">Deploying operating system on bare-metal nodes</a></li><li><a href="/hpe-solutions-hpecp/5.2-Synergy/Solution-Deployment/Preparing-SLES-15-Hosts-For-HPECP-Installation.html" class="sidebar-link">Preparing SLES 15 hosts for HPECP installation</a></li><li><a href="/hpe-solutions-hpecp/5.2-Synergy/Solution-Deployment/Automated-HPECP-Deployment.html" class="sidebar-link">Automated HPE Ezmeral Container Platform deployment</a></li><li><a href="/hpe-solutions-hpecp/5.2-Synergy/Solution-Deployment/Manually-Install-And-Configure-HPECP.html" class="sidebar-link">Manually Install and configure HPE Ezmeral Container Platform 5.2</a></li><li><a href="/hpe-solutions-hpecp/5.2-Synergy/Solution-Deployment/HPECP-Airgap-Installation.html" class="sidebar-link">HPECP Airgap Installation</a></li><li><a href="/hpe-solutions-hpecp/5.2-Synergy/Solution-Deployment/Securing-HPECP-Using-Sysdig.html" class="sidebar-link">Securing HPE Ezmeral Container Platform using Sysdig Secure and Sysdig Monitor</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Additional Features and Functionality</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Resosurces and Additional Links</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="server-profiles"><a href="#server-profiles" class="header-anchor">#</a> Server profiles</h1> <p>Server profiles are used to configure the personality of the compute
resources. A server profile allows a set of configuration parameters,
including firmware recipe, network and storage, BIOS tuning, boot order
configuration, local storage configuration, and more to be templatized.
These templates are the key to deliver the &quot;infrastructure as code&quot;
capabilities of the HPE Synergy platform. For the purpose of this
solution, a template is created which can be leveraged for HPE Ezmeral
Container Platform controller, Kubernetes master and worker nodes.</p> <p><img src="/hpe-solutions-hpecp/5.2-Synergy/assets/img/SD-SP-1.c1885845.png" alt=""> <strong>Figure 13.</strong> High Level Flow of the Server Profile Creation</p> <h2 id="automation-overview"><a href="#automation-overview" class="header-anchor">#</a> Automation overview</h2> <p>The folder <strong>infrastructure</strong> within the folder $BASE_DIR contains
Ansible scripts to automate the creation of server profiles in HPE
OneView. The scripts are as follows:</p> <ol><li><p><strong>inputs.yml</strong>: This file contains input variables to create the</p> <ul><li>server profile template and server profile.</li></ul></li> <li><p><strong>server_profile_fw.yml hosts</strong>: This is the inventory file which</p> <ul><li>the installer VM will use to reference nodes for which the server</li> <li>profile needs to be created.</li></ul></li> <li><p><strong>secret.yml</strong>: This is an Ansible vault file that consists of</p> <ul><li>sensitive information, such as HPE OneView IP address and</li> <li>credentials.</li></ul></li> <li><p><strong>playbooks</strong>: This folder consists of playbooks to upload firmware</p> <ul><li>bundle, create server profile templates and the server profiles</li> <li>for controller, gateway, master and worker nodes.</li></ul></li> <li><p><strong>roles</strong>: This folder consists of Ansible roles to upload firmware</p> <ul><li>bundle, create the server profile template and server profile.</li> <li>Each role is associated with a set of tasks to accomplish the</li> <li>expected output and they are present in the task directory within</li> <li>the role.</li></ul></li></ol> <div class="custom-block tip"><p class="custom-block-title">NOTE</p> <p>The parameter names are case sensitive. Ensure that parameter names and
functions are accurately recorded for the installation environment. Any
variation in parameter names and functions will result in the failure of
automated configuration steps.</p></div> <h2 id="automated-deployment-of-server-profile"><a href="#automated-deployment-of-server-profile" class="header-anchor">#</a> Automated deployment of server profile</h2> <p>Perform the following steps to create server profiles for all the
bare-metal nodes participating in the HPE Ezmeral Container Platform
cluster.</p> <h3 id="details-of-playbook"><a href="#details-of-playbook" class="header-anchor">#</a> Details of playbook</h3> <h4 id="using-firmware-bundle"><a href="#using-firmware-bundle" class="header-anchor">#</a> Using firmware bundle:</h4> <ul><li>Execute the following command to upload the firmware bundle to
OneView.</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&gt;</span> ansible-playbook -i hosts playbooks/upload_firmware_bundle.yml --ask-vault-pass
</code></pre></div><ul><li>Execute the following command to create and deploy the Server Profile
template along with Firmware bundle.</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&gt;</span> ansible-playbook -i hosts playbooks/server_profile_template_fw.yml --ask-vault-pass
</code></pre></div><ul><li>Execute the following command to create and deploy Server Profile,
update the firmware on Synergy Compute Module and validate the firmware
versions.</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&gt;</span> ansible-playbook -i hosts playbooks/server_profile_fw.yml --ask-vault-pass
</code></pre></div><h4 id="without-using-firmware-bundle"><a href="#without-using-firmware-bundle" class="header-anchor">#</a> Without using Firmware bundle:</h4> <ul><li>Execute the following command to create and deploy the Server Profile
template without managed Firmware manually.</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&gt;</span> ansible-playbook -i hosts playbooks/server_profile_template.yml --ask-vault-pass
</code></pre></div><ul><li>Synergy compute module will manage firmware manually.Using the server
template, server profile will be assigned to each compute module.Execute
the following command to carry out this action.</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&gt;</span> ansible-playbook -i hosts playbooks/server_profile_fw.yml --ask-vault-pass
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/hpe-solutions-hpecp/5.2-Synergy/Solution-Deployment/Host-Configuration.html" class="prev">
        Host configuration
      </a></span> <span class="next"><a href="/hpe-solutions-hpecp/5.2-Synergy/Solution-Deployment/Deploying-OS-On-Bare-Metal-Nodes.html">
        Deploying operating system on bare-metal nodes
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/hpe-solutions-hpecp/5.2-Synergy/assets/js/app.bb190295.js" defer></script><script src="/hpe-solutions-hpecp/5.2-Synergy/assets/js/2.3bc06f99.js" defer></script><script src="/hpe-solutions-hpecp/5.2-Synergy/assets/js/31.c4f19816.js" defer></script>
  </body>
</html>
