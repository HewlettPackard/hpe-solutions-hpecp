<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Host configuration | HPE EZMERAL CONTAINER PLATFORM 5.2 AND HPE EZMERAL DATA FABRIC ON HPE SYNERGY SERVERS</title>
    <meta name="generator" content="VuePress 1.7.1">
    
    <meta name="description" content="Hewlett Packard Enterprise">
    
    <link rel="preload" href="/hpe-solutions-hpecp/5.2-Synergy/assets/css/0.styles.a12a8344.css" as="style"><link rel="preload" href="/hpe-solutions-hpecp/5.2-Synergy/assets/js/app.bb190295.js" as="script"><link rel="preload" href="/hpe-solutions-hpecp/5.2-Synergy/assets/js/2.3bc06f99.js" as="script"><link rel="preload" href="/hpe-solutions-hpecp/5.2-Synergy/assets/js/35.94fd45f9.js" as="script"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-Synergy/assets/js/10.55b6188a.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-Synergy/assets/js/11.0ee97fd6.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-Synergy/assets/js/12.f850f5e5.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-Synergy/assets/js/13.ff45a47d.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-Synergy/assets/js/14.93c37364.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-Synergy/assets/js/15.593aa3cd.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-Synergy/assets/js/16.de376ddf.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-Synergy/assets/js/17.6271735c.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-Synergy/assets/js/18.8cda808e.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-Synergy/assets/js/19.1ce15727.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-Synergy/assets/js/20.4fcac285.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-Synergy/assets/js/21.5265126b.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-Synergy/assets/js/22.5cc802db.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-Synergy/assets/js/23.3dc40cbc.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-Synergy/assets/js/24.733d95ce.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-Synergy/assets/js/25.94eb12d1.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-Synergy/assets/js/26.e5523b8a.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-Synergy/assets/js/27.0374acf3.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-Synergy/assets/js/28.e80886d5.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-Synergy/assets/js/29.f3f8cfcf.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-Synergy/assets/js/3.b4178863.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-Synergy/assets/js/30.e69119ff.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-Synergy/assets/js/31.c4f19816.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-Synergy/assets/js/32.0763fc12.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-Synergy/assets/js/33.f79c30ba.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-Synergy/assets/js/34.b02e5cb6.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-Synergy/assets/js/36.08c0afbf.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-Synergy/assets/js/4.d284f65a.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-Synergy/assets/js/5.e6bb7fed.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-Synergy/assets/js/6.75bcd2e8.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-Synergy/assets/js/7.e8139c64.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-Synergy/assets/js/8.289bb78b.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-Synergy/assets/js/9.0805e14f.js">
    <link rel="stylesheet" href="/hpe-solutions-hpecp/5.2-Synergy/assets/css/0.styles.a12a8344.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/hpe-solutions-hpecp/5.2-Synergy/" class="home-link router-link-active"><!----> <span class="site-name">HPE EZMERAL CONTAINER PLATFORM 5.2 AND HPE EZMERAL DATA FABRIC ON HPE SYNERGY SERVERS</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/hpe-solutions-hpecp/5.2-Synergy/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="http://www.hpe.com/info/ra" target="_blank" rel="noopener noreferrer" class="nav-link external">
  RA Library
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/hpe-solutions-hpecp/5.2-Synergy/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="http://www.hpe.com/info/ra" target="_blank" rel="noopener noreferrer" class="nav-link external">
  RA Library
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>HPE EZMERAL CONTAINER PLATFORM 5.2 on HPE Synergy</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Solution Overview</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Solution Components</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Solution Deployment</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/hpe-solutions-hpecp/5.2-Synergy/Solution-Deployment/Solution-Deployment-Flow.html" class="sidebar-link">Solution Deployment Flow</a></li><li><a href="/hpe-solutions-hpecp/5.2-Synergy/Solution-Deployment/Host-Configuration.html" aria-current="page" class="active sidebar-link">Host configuration</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/hpe-solutions-hpecp/5.2-Synergy/Solution-Deployment/Host-Configuration.html#preparing-the-execution-environment" class="sidebar-link">Preparing the execution environment</a></li><li class="sidebar-sub-header"><a href="/hpe-solutions-hpecp/5.2-Synergy/Solution-Deployment/Host-Configuration.html#installer-machine" class="sidebar-link">Installer machine</a></li></ul></li><li><a href="/hpe-solutions-hpecp/5.2-Synergy/Solution-Deployment/Server-Profiles.html" class="sidebar-link">Server profiles</a></li><li><a href="/hpe-solutions-hpecp/5.2-Synergy/Solution-Deployment/Deploying-OS-On-Bare-Metal-Nodes.html" class="sidebar-link">Deploying operating system on bare-metal nodes</a></li><li><a href="/hpe-solutions-hpecp/5.2-Synergy/Solution-Deployment/Preparing-SLES-15-Hosts-For-HPECP-Installation.html" class="sidebar-link">Preparing SLES 15 hosts for HPECP installation</a></li><li><a href="/hpe-solutions-hpecp/5.2-Synergy/Solution-Deployment/Automated-HPECP-Deployment.html" class="sidebar-link">Automated HPE Ezmeral Container Platform deployment</a></li><li><a href="/hpe-solutions-hpecp/5.2-Synergy/Solution-Deployment/Manually-Install-And-Configure-HPECP.html" class="sidebar-link">Manually Install and configure HPE Ezmeral Container Platform 5.2</a></li><li><a href="/hpe-solutions-hpecp/5.2-Synergy/Solution-Deployment/HPECP-Airgap-Installation.html" class="sidebar-link">HPECP Airgap Installation</a></li><li><a href="/hpe-solutions-hpecp/5.2-Synergy/Solution-Deployment/Securing-HPECP-Using-Sysdig.html" class="sidebar-link">Securing HPE Ezmeral Container Platform using Sysdig Secure and Sysdig Monitor</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Additional Features and Functionality</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Resosurces and Additional Links</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="host-configuration"><a href="#host-configuration" class="header-anchor">#</a> Host configuration</h1> <p>This section outlines the steps to configure the automation environment
and utilizes the automation environment to create the server profile for
all Synergy nodes and install SLES 15 SP2 operating system on each of
them.</p> <h2 id="preparing-the-execution-environment"><a href="#preparing-the-execution-environment" class="header-anchor">#</a> Preparing the execution environment</h2> <p>This section provides a detailed overview and steps to configure the
components deployed for this solution.</p> <h2 id="installer-machine"><a href="#installer-machine" class="header-anchor">#</a> Installer machine</h2> <p>This document assumes that a server running Centos 7 with the following
configuration exists within the deployment environment and is accessible
to the installation user to be used in an installer machine.</p> <ol><li><p>At least 500 GB of free disk space (especially in the &quot;/&quot;
partition), 4 CPU cores and 8GB RAM.</p></li> <li><p>One (1) network interface with static IP address configured on same
network as the management plane of the bare-metal servers and has
access to internet.</p></li></ol> <p>In this solution, a virtual machine is used to act as an installer
machine and the same host is utilized as an Ansible Engine host.</p> <h3 id="setup-the-prerequisites"><a href="#setup-the-prerequisites" class="header-anchor">#</a> Setup the prerequisites</h3> <p>Login to the installer VM and perform the following steps:</p> <ol><li>Use the following commands to install and enable Python 3.6.x.</li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&gt;</span> yum -y <span class="token function">install</span> centos-release-scl

<span class="token operator">&gt;</span> yum -y <span class="token function">install</span> rh-python36

<span class="token operator">&gt;</span> scl <span class="token builtin class-name">enable</span> rh-python36 <span class="token function">bash</span>
</code></pre></div><ol start="2"><li>Use the following commands to create and activate a Python3 virtual
environment for deploying this solution.</li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&gt;</span> python3 -m venv <span class="token operator">&lt;</span>virtual_environment_name<span class="token operator">&gt;</span>

<span class="token operator">&gt;</span> <span class="token builtin class-name">source</span> <span class="token operator">&lt;</span>virtual_environment_name<span class="token operator">&gt;</span>/bin/activate
</code></pre></div><ol start="3"><li>Use the following command to install Ansible 2.9.</li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&gt;</span> python3 -m pip <span class="token function">install</span> <span class="token assign-left variable">ansible</span><span class="token operator">==</span><span class="token number">2.9</span>.0
</code></pre></div><ol start="4"><li><p>Disable SELinux</p> <ul><li><p>Edit the /etc/selinux/config file and set the SELINUX to
disabled</p></li> <li><p>Reboot the server</p></li> <li><p>Verify the SELinux status by running the following command:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&gt;</span> sestatus
</code></pre></div></li></ul></li> <li><p>Execute the following commands in the Ansible Engine to download the
repositories.</p></li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&gt;</span> <span class="token function">mkdir</span> --p /opt/hpe/solutions/hpecp/

<span class="token operator">&gt;</span> <span class="token builtin class-name">cd</span> /opt/hpe/solutions/hpecp/

<span class="token operator">&gt;</span> yum <span class="token function">install</span> --y <span class="token function">git</span>

<span class="token operator">&gt;</span> <span class="token function">git</span> clone https://github.com/HewlettPackard/hpe-solutions-hpecp.git

<span class="token operator">&gt;</span> <span class="token function">git</span> clone <span class="token operator">&lt;</span>https://github.com/HewlettPackard/oneview-ansible.git<span class="token operator">&gt;</span>

<span class="token operator">&gt;</span> <span class="token builtin class-name">cd</span> oneview-ansible

<span class="token operator">&gt;</span> pip <span class="token function">install</span> --r requirements.txt

<span class="token operator">&gt;</span> <span class="token builtin class-name">export</span> <span class="token assign-left variable">ANSIBLE_LIBRARY</span><span class="token operator">=</span>/opt/hpe/solutions/hpecp/oneview-ansible/library

<span class="token operator">&gt;</span> <span class="token builtin class-name">export</span> <span class="token assign-left variable">ANSIBLE_MODULE_UTILS</span><span class="token operator">=</span>/opt/hpe/solutions/hpecp/oneview-ansible/library/module_utils

</code></pre></div><div class="custom-block tip"><p class="custom-block-title">NOTE</p> <ul><li><p>The value for the constant &quot;$BASE_DIR&quot; referred to in this
deployment guide is
/opt/hpe/solutions/hpecp/hpe-solutions-hpecp/Synergy/scripts/</p></li> <li><p>This solution utilizes the Service Pack for ProLiant (SPP)/firmware
bundle ISO image to enable an unattended update of firmware on the
servers. Hence, ensure this image is available on the installer
machine. Solution utilizes the ISO image of SLES 15 SP 2 to enable
an unattended installation of SLES on the servers. Hence, ensure
this image is also available on the installer machine.</p></li></ul></div> <h3 id="ansible-inventory-file"><a href="#ansible-inventory-file" class="header-anchor">#</a> Ansible inventory file</h3> <p>The files that are cloned from the GitHub site include a sample
inventory file. The installation user should review this file (located
on the installer VM at $BASE_DIR/infrastructure/hosts and
$BASE_DIR/prepare_hpecp_hosts/hosts*) and ensure that the information
within the file accurately reflects the information in their
environment.</p> <p>Use an editor such as vi or nano to edit the inventory file.</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&gt;</span> <span class="token function">vi</span> <span class="token variable">$BASE_DIR</span>/infrastructure/hosts

<span class="token operator">&gt;</span> <span class="token function">vi</span> <span class="token variable">$BASE_DIR</span>/prepare_hpecp_hosts/hosts
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">NOTE</p> <p>The values provided in the variable files, inventory files, figures, and
tables in this document are intended to be used for reference purpose.
It is expected that the installation user updates them to suit the local
environment.</p> <p>By default, the forks parameter in Ansible is limited to 5. Execute the
following command to update the Ansible configuration to increase the
value of number of hosts that are getting configured using this
playbook.</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&gt;</span> <span class="token builtin class-name">export</span> <span class="token assign-left variable">ANSIBLE_FORKS</span><span class="token operator">=</span><span class="token operator">&lt;</span>number_of_hosts_present_in_the_ansible_inventory_file<span class="token operator">&gt;</span>
</code></pre></div></div> <h3 id="ansible-vault"><a href="#ansible-vault" class="header-anchor">#</a> Ansible vault</h3> <p>A preconfigured Ansible vault file (<em>secret.yml</em>) is provided as a part
of this solution, which consists of sensitive information to support the
host and virtual machine deployment.</p> <p>Run the following commands on the installer VM to edit the vault to
match the installation environment.</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&gt;</span> ansible-vault edit <span class="token variable">$BASE_DIR</span>/infrastructure/secret.yml
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">NOTE</p> <p>The default password for the Ansible vault file is <strong>changeme</strong>.</p></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/hpe-solutions-hpecp/5.2-Synergy/Solution-Deployment/Solution-Deployment-Flow.html" class="prev">
        Solution Deployment Flow
      </a></span> <span class="next"><a href="/hpe-solutions-hpecp/5.2-Synergy/Solution-Deployment/Server-Profiles.html">
        Server profiles
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/hpe-solutions-hpecp/5.2-Synergy/assets/js/app.bb190295.js" defer></script><script src="/hpe-solutions-hpecp/5.2-Synergy/assets/js/2.3bc06f99.js" defer></script><script src="/hpe-solutions-hpecp/5.2-Synergy/assets/js/35.94fd45f9.js" defer></script>
  </body>
</html>
