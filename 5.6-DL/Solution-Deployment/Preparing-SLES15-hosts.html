<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Preparing SLES 15 hosts for HPERE installation | HPE EZMERAL RUNTIME ENTERPRISE 5.6 ON DL USING REST API BASED DEPLOYMENT</title>
    <meta name="generator" content="VuePress 1.9.8">
    
    <meta name="description" content="Hewlett Packard Enterprise">
    
    <link rel="preload" href="/hpe-solutions-hpecp/5.6/assets/css/0.styles.279e6b91.css" as="style"><link rel="preload" href="/hpe-solutions-hpecp/5.6/assets/js/app.5eb3f62d.js" as="script"><link rel="preload" href="/hpe-solutions-hpecp/5.6/assets/js/2.fca4e8e3.js" as="script"><link rel="preload" href="/hpe-solutions-hpecp/5.6/assets/js/29.07727917.js" as="script"><link rel="prefetch" href="/hpe-solutions-hpecp/5.6/assets/js/10.f72b1bc4.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.6/assets/js/11.e7a729e8.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.6/assets/js/12.8d8de7ec.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.6/assets/js/13.1fa676d3.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.6/assets/js/14.b727f089.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.6/assets/js/15.68fff555.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.6/assets/js/16.8e3946ff.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.6/assets/js/17.1a766592.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.6/assets/js/18.25785d36.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.6/assets/js/19.a51d4ada.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.6/assets/js/20.4bdc3691.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.6/assets/js/21.b46c2990.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.6/assets/js/22.aa02a81f.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.6/assets/js/23.380c9844.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.6/assets/js/24.8e3f5155.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.6/assets/js/25.cc3c1d5b.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.6/assets/js/26.660ea81c.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.6/assets/js/27.25440428.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.6/assets/js/28.36e5fac4.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.6/assets/js/3.5da8aeaf.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.6/assets/js/4.23bc7f74.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.6/assets/js/5.d1a782d6.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.6/assets/js/6.7d9e5104.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.6/assets/js/7.ae9e8e36.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.6/assets/js/8.031d06a3.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.6/assets/js/9.09279ca2.js">
    <link rel="stylesheet" href="/hpe-solutions-hpecp/5.6/assets/css/0.styles.279e6b91.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/hpe-solutions-hpecp/5.6/" class="home-link router-link-active"><!----> <span class="site-name">HPE EZMERAL RUNTIME ENTERPRISE 5.6 ON DL USING REST API BASED DEPLOYMENT</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/hpe-solutions-hpecp/5.6/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="http://www.hpe.com/info/ra" target="_blank" rel="noopener noreferrer" class="nav-link external">
  RA Library
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/hpe-solutions-hpecp/5.6/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="http://www.hpe.com/info/ra" target="_blank" rel="noopener noreferrer" class="nav-link external">
  RA Library
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>HPE EZMERAL RUNTIME ENTERPRISE 5.6 ON DL USING REST API BASED DEPLOYMENT</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Solution Overview</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Solution Components</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Solution Deployment</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/hpe-solutions-hpecp/5.6/Solution-Deployment/Solution-deployment-flow.html" class="sidebar-link">Solution Deployment Flow</a></li><li><a href="/hpe-solutions-hpecp/5.6/Solution-Deployment/Host-Configuration.html" class="sidebar-link">Host Configuration</a></li><li><a href="/hpe-solutions-hpecp/5.6/Solution-Deployment/Operating-system-deployment.html" class="sidebar-link">Deploying operating system on bare-metal nodes</a></li><li><a href="/hpe-solutions-hpecp/5.6/Solution-Deployment/Preparing-SLES15-hosts.html" aria-current="page" class="active sidebar-link">Preparing SLES 15 hosts for HPERE installation</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/hpe-solutions-hpecp/5.6/Solution-Deployment/Preparing-SLES15-hosts.html#input-files" class="sidebar-link">Input Files</a></li><li class="sidebar-sub-header"><a href="/hpe-solutions-hpecp/5.6/Solution-Deployment/Preparing-SLES15-hosts.html#installation-process" class="sidebar-link">Installation Process</a></li></ul></li><li><a href="/hpe-solutions-hpecp/5.6/Solution-Deployment/Automated-ERE-Deployment.html" class="sidebar-link">Automated HPE Ezmeral Runtime Enterprise deployment</a></li><li><a href="/hpe-solutions-hpecp/5.6/Solution-Deployment/Manual-ERE-Deployment.html" class="sidebar-link">Manually Install and configure HPE Ezmeral Runtime Enterprise 5.6.0</a></li><li><a href="/hpe-solutions-hpecp/5.6/Solution-Deployment/HPERE-Airgap-Installation.html" class="sidebar-link">HPERE Airgap Installation</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Additional Features and Functionality</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Resosurces and Additional Links</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="preparing-sles-15-hosts-for-hpere-installation"><a href="#preparing-sles-15-hosts-for-hpere-installation" class="header-anchor">#</a> Preparing SLES 15 hosts for HPERE installation</h1> <div class="custom-block tip"><p class="custom-block-title">Prerequisites</p> <p>Centos 7 or RHEL <a href="/hpe-solutions-hpecp/5.6/Solution-Deployment/Host-Configuration.html#installer-machine">Installer machine</a> with the following configurations is essential.</p> <ol><li><p>Enable Python3 and Ansible Environment as mentioned in <a href="/hpe-solutions-hpecp/5.6/Solution-Deployment/Host-Configuration.html#installer-machine">Installer machine</a> section of deployment guide.</p></li> <li><p>Password less SSH is configured to target hosts from the installer machine. Steps for configuring password less SSH is as follows:</p> <ul><li>Execute the following command on installer machine to generate a new SSH key pair.</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&gt;</span> ssh-keygen
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">Note</p> <p>To generate a SSH key pair of specific algorithm or specific key size as per user requirements, use the following command.</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&gt;</span> ssh-keygen <span class="token parameter variable">-t</span> <span class="token operator">&lt;</span>algorithm<span class="token operator">&gt;</span> <span class="token parameter variable">-b</span> <span class="token operator">&lt;</span>keysize<span class="token operator">&gt;</span>
</code></pre></div></div></li></ol></div> <h2 id="input-files"><a href="#input-files" class="header-anchor">#</a> Input Files</h2> <ul><li>Update vars.yml file with required detail for registration.</li></ul> <p>Edit vars.yml present in “$BASE_DIR/group_vars/all/” folder with the following command and enter the details listed below.
Command to edit vars.yml</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&gt;</span> ansible-vault edit vars.yml
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">Note</p> <p>Default password for Ansible Vault file vars.yml is “changeme”.</p></div> <ul><li><p>Mode: There are two modes of registering the server to registration server, RMT and User Email. Permissible values are 1 (For registering the SUSE server to RMT) and 2 (For registering the SUSE server using Email)</p></li> <li><p>Mode 1: Registration using RMT server.</p> <ul><li>Update the Mode:1 section in vars.yml with the following inputs
<ol><li>RMT_URL: RMT server ip address.</li></ol></li></ul></li> <li><p>Mode 2: Registration using User Email Id and RegCode</p> <ul><li>Update the Mode:2 section in vars.yml with the following inputs
<ol><li>email: User Email-id which will be used for server registration.</li> <li>base_code:- Registration code which will be used for server registration.</li> <li>caas_code:- Registration code for caas module.</li> <li>ha_code:- Registration code for ha module.</li></ol></li></ul></li></ul> <div class="custom-block tip"><p class="custom-block-title">Note:</p> <div class="language- extra-class"><pre><code>1.  Email and Reg_codes are applicable only for Mode 2 else leave blank.
2.  sles_packages: sles modules which will be installed separated by comma.
3.  Zypper_packages: 27zypper packages which will be installed separated by comma.
</code></pre></div></div> <ul><li>Example values for the registration details in vars.yml are as follows.</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment">#Mode 1 for RMT Registration and Mode 2 for User Registration</span>

Mode: <span class="token number">2</span>
Email: jim. ***@***.com
base_code: 8BAB9EC****
caas_code: 21E02******
ha_code: 87D73*****
RMT_URL: http://20.**.**.**

sles_packages: <span class="token punctuation">[</span>sle-module-public-cloud/15.6.0/x86_64,
sle-module-legacy/15.6.0/x86_64, sle-module-python2/15.6.0/x86_64,
sle-module-containers/15.6.0/x86_64,
sle-module-basesystem/15.6.0/x86_64,
sle-module-desktop-applications/15.6.0/x86_64<span class="token punctuation">]</span>

zypper_packages: <span class="token punctuation">[</span>iputils, bind-utils, autofs, libcgroup1,kernel-default-devel,gcc-c++,perl,pciutils,rsyslog,firewalld<span class="token punctuation">]</span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">Note:</p> <p>Don’t modify the sles_packages and zypper_pacakges as these packages are required for HPERE implementation changes made to this section may impact the installation.</p></div> <h2 id="installation-process"><a href="#installation-process" class="header-anchor">#</a> Installation Process</h2> <ul><li><p>Enable Python3 and Ansible Environment as mentioned in <a href="/hpe-solutions-hpecp/5.6/Solution-Deployment/Host-Configuration.html#installer-machine">Installer machine</a> section of deployment guide.</p></li> <li><p>Change the current working directory to &quot;$BASE_DIR&quot; using the following command and Execute the playbook using the following commands.</p></li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&gt;</span> <span class="token builtin class-name">cd</span> <span class="token variable">$BASE_DIR</span>
<span class="token operator">&gt;</span> ansible-playbook <span class="token parameter variable">-i</span> hosts playbooks/prepare_hosts.yml --ask-vault-pass
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">NOTE</p> <p>During the playbook execution, while installing the packageHub Module it might throw an error in the first attempt. This is a known issue from SUSE and is being taken care by re-installing the module.</p> <p>Link for reference <a href="https://www.suse.com/support/kb/doc/?id=000019505" target="_blank" rel="noopener noreferrer">https://www.suse.com/support/kb/doc/?id=000019505<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <ul><li>In case the script fails while checking the internet connection from the hosts, kindly cross verify the internet from the hosts and then re-run the script.</li> <li>While checking the apparomor service the error is expected as it verifies the apparmor service status on the hosts and if it running, it will stop and disable the same.</li></ul></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/hpe-solutions-hpecp/5.6/Solution-Deployment/Operating-system-deployment.html" class="prev">
        Deploying operating system on bare-metal nodes
      </a></span> <span class="next"><a href="/hpe-solutions-hpecp/5.6/Solution-Deployment/Automated-ERE-Deployment.html">
        Automated HPE Ezmeral Runtime Enterprise deployment
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/hpe-solutions-hpecp/5.6/assets/js/app.5eb3f62d.js" defer></script><script src="/hpe-solutions-hpecp/5.6/assets/js/2.fca4e8e3.js" defer></script><script src="/hpe-solutions-hpecp/5.6/assets/js/29.07727917.js" defer></script>
  </body>
</html>
