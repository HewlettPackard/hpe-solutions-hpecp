(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{396:function(s,t,a){s.exports=a.p+"assets/img/figure11.46c634fd.png"},428:function(s,t,a){"use strict";a.r(t);var e=a(14),n=Object(e.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"deploying-operating-system-on-bare-metal-nodes"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#deploying-operating-system-on-bare-metal-nodes"}},[s._v("#")]),s._v(" Deploying operating system on bare-metal nodes")]),s._v(" "),t("p",[t("img",{attrs:{src:a(396),alt:""}})]),s._v(" "),t("p",[s._v("Figure 11: High Level Flow diagram of the OS Deployment Process")]),s._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("Pre-requisites")]),s._v(" "),t("ul",[t("li",[s._v("Centos 7 or RHEL "),t("RouterLink",{attrs:{to:"/Solution-Deployment/Host-Configuration.html#installer-machine"}},[s._v("Installer machine")]),s._v(" with the following configurations is essential to initiate the OS deployment process.\n"),t("ol",[t("li",[s._v("At least 600 GB disk space (especially in the “/” partition), 4 CPU cores and 8GB RAM.")]),s._v(" "),t("li",[s._v("1 network interface with static IP address configured on same network as the management plane of the bare-metal servers and has access to internet.")]),s._v(" "),t("li",[s._v("Python 3.6 or above is present and latest version associated pip is present.")]),s._v(" "),t("li",[s._v("Ansible 2.9 should be installed")]),s._v(" "),t("li",[s._v("OS ISO image is present in the HTTP file path within the installer machine.")]),s._v(" "),t("li",[s._v("Ensure that SELinux status is disabled.")])])],1)])]),s._v(" "),t("h3",{attrs:{id:"suse-hosts-configuration"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#suse-hosts-configuration"}},[s._v("#")]),s._v(" SUSE hosts Configuration")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[s._v("* 2 network interfaces for the production network\n\n* 1 local drive to be used as the boot device\n\n* Boot mode is set to UEFI\n\n* Boot order – Hard disk\n\n* Secure Boot – disabled\n")])])]),t("h2",{attrs:{id:"installation"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#installation"}},[s._v("#")]),s._v(" Installation")]),s._v(" "),t("ol",[t("li",[s._v("Enable Python3 and Ansible Environment as mentioned in Installer machine section of deployment guide.")]),s._v(" "),t("li",[s._v("Setup the installer machine.")])]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sh")]),s._v(" setup.sh\n")])])]),t("p",[s._v("Enter the installer machine OS. (“rhel7” for RHEL OS and “centos7” for Centos OS)")]),s._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("NOTE")]),s._v(" "),t("p",[s._v("Run the below command to fix any unwanted space, tabs error.")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-i")]),s._v(" ‘s/r$//’ "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("path"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("/setup.sh\n")])])])]),s._v(" "),t("ol",{attrs:{start:"3"}},[t("li",[s._v("Execute "),t("strong",[s._v("setup.sh")]),s._v(' script to install requirements for os deployment. Script expects the installer machine OS type, Please enter "rhel7" if the installer machine OS type is RHEL or "centos7" if the installer machine OS type is CentOS.')])]),s._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("NOTE")]),s._v(" "),t("p",[s._v("Run the below command to fix any unwanted space, tabs error.")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-i")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s/r$//'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("path"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("/setup.sh\n")])])])]),s._v(" "),t("ol",{attrs:{start:"4"}},[t("li",[s._v("The vars.yml file contains config and server section, both of which needs to be updated with values for all the variables present within them.")])]),s._v(" "),t("p",[s._v("a. Edit config section in vars.yml file present in “$BASE_DIR/group_vars/all/” folder with the following command and add the details of web server and operating system to be installed.\nDefault password for Ansible Vault file “vars.yml” is "),t("strong",[s._v("changeme")]),s._v(".")]),s._v(" "),t("p",[s._v("Command to edit vars.yml")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" ansible-vault edit vars.yml\n")])])]),t("p",[s._v("b. Example values for the input configuration is as follows")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n“HTTP_server_base_url” "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" “http://10.0.x.x/”,\n“HTTP_file_path” "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" “/usr/share/nginx/html/”,\n“OS_type” "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" “sles15”,\n“OS_image_name” "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" “"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("os_iso_image_name_with_extension"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("”\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("NOTE")]),s._v(" "),t("p",[s._v("Acceptable values for “OS_type” variable is “sles15” for SUSE 15 SP3.")])]),s._v(" "),t("p",[s._v("c. Edit server section in vars.yml file present in “$BASE_DIR/group_vars/all/” folder\nExample values for the input configuration for deploying SLES 15 SP3 is as follows.")]),s._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("Note")]),s._v(" "),t("ul",[t("li",[s._v("It is recommended to provide a complex password for the “Host_Password” variable.")])])]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        “Server_serial_number” "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" “MXxxxxxDP”,\n        “ILO_Address” "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" “10.0.x.x”,\n        “ILO_Username” "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" “username”,\n        “ILO_Password” "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" “password”,\n        “Hostname” "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" “sles01.twentynet.local”,\n        “NodeRole” "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" “controller”,\n        “Bonding_Interface1” "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" “eth*”,\n        “Bonding_Interface2” "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" “eth*”,\n        “Host_IP” "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" “20.x.x.x”,\n        “Host_Username” "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" “root”,\n        “Host_Password” "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" “Password”,\n        “Host_Netmask” "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" “255.x.x.x”,\n        “Host_Prefix” "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" “8”,\n        “Host_Gateway” "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" “20.x.x.x”,\n        “Host_DNS” "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" “20.x.x.x”,\n        “Host_Search” "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" “twentynet.local”,\n        “GPU_Host” "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" “yes”\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        “Server_serial_number” "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" “MXxxxxxDQ”,\n        “ILO_Address” "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" “10.0.x.x”,\n        “ILO_Username” "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" “username”,\n        “ILO_Password” "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" “password”,\n        “Hostname” "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" “sles02.twentynet.local”,\n        “NodeRole” "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" “gateway”,\n        “Bonding_Interface1” "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" “eth*”,\n        “Bonding_Interface2” "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" “eth*”,\n        “Host_IP” "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" “20.0.x.x”,\n        “Host_Username” "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" “root”,\n        “Host_Password” "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" “Password”,\n        “Host_Netmask” "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" “255.x.x.x”,\n        “Host_Prefix” "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" “8”,\n        “Host_Gateway” "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" “20.x.x.x”,\n        “Host_DNS” "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" “20.x.x.x”,\n        “Host_Search” "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" “twentynet.local”,\n        “GPU_Host” "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" “No”\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n")])])]),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("NOTE")]),s._v(" "),t("p",[s._v("Acceptable values for “GPU_Host” variable is “yes” for host which has GPU cards and “No” for hosts which do not have GPU cards.")])]),s._v(" "),t("ol",{attrs:{start:"5"}},[t("li",[s._v('Change the current working directory to "$BASE_DIR" and execute the playbook to deploy operating system using the following command.')])]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$BASE_DIR")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" ansible-playbook "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-i")]),s._v(" hosts playbooks/os_deployment.yml --ask-vault-pass\n")])])]),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("NOTE")]),s._v(" "),t("ol",[t("li",[s._v("Generic settings done as part of kickstart file for SLES are as follows. It is recommended that the user reviews and modifies the kickstart files (autoinst.xml file) to suit their requirements.")])]),s._v(" "),t("ul",[t("li",[t("p",[s._v("Minimal Installation")])]),s._v(" "),t("li",[t("p",[s._v("Language – en_US")])]),s._v(" "),t("li",[t("p",[s._v("Keyboard & layout – US")])]),s._v(" "),t("li",[t("p",[s._v("Partition")])]),s._v(" "),t("li",[t("p",[s._v("/boot/efi ,fstype=”vfat” ,size=500MiB")])]),s._v(" "),t("li",[t("p",[s._v("root, size = 150G")])]),s._v(" "),t("li",[t("p",[s._v("srv , size = 100G")])]),s._v(" "),t("li",[t("p",[s._v("swap, size = 62.96G")])]),s._v(" "),t("li",[t("p",[s._v("var, size = 100G")])]),s._v(" "),t("li",[t("p",[s._v("home, size = 25G")]),s._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("NOTE")]),s._v(" "),t("p",[s._v("Specified Partitions are inline with HPERE implementation and is advised not to make changes to this.")])])]),s._v(" "),t("li",[t("p",[s._v("timezone – America/NewYork")])]),s._v(" "),t("li",[t("p",[s._v("NIC teaming is performed with devices as specified in Bonding_Interface field of vars.yml, server section of the input file.\nIt is further assigned with the Host_IP, Netmask, Domain as defined in the input file.")]),s._v(" "),t("ul",[t("li",[s._v("Signature handling (accepting file without checksum, with non-trusted gpg key, unsigned file etc) is disabled by default to avoid any pop-ups and warnings and have an unattended installation. These properties can be modified according to the requirements in kickstart_files/autoinst.xml.")])])])]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("accept_file_without_checksum\nconfig:type"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("”boolean”"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("true"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/accept_file_without_checksum"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n+ "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("accept_non_trusted_gpg_key\nconfig:type"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("”boolean”"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("true"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/accept_non_trusted_gpg_key"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n+ "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("accept_unknown_gpg_key\nconfig:type"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("”boolean”"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("true"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/accept_unknown_gpg_key"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n+ "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("accept_unsigned_file\nconfig:type"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("”boolean”"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("true"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/accept_unsigned_file"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n+ "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("accept_verification_failed\nconfig:type"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("”boolean”"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("false"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/accept_verification_failed"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n+ "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("import_gpg_key\nconfig:type"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("”boolean”"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("true"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/import_gpg_key"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])])])])])}),[],!1,null,null,null);t.default=n.exports}}]);