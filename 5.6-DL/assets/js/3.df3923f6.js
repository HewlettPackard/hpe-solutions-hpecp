(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{347:function(e,t,s){e.exports=s.p+"assets/img/figure36.c85797fc.png"},348:function(e,t,s){e.exports=s.p+"assets/img/figure37.4ca56563.png"},349:function(e,t,s){e.exports=s.p+"assets/img/figure38.0464a926.png"},350:function(e,t,s){e.exports=s.p+"assets/img/figure39.1394f50f.png"},351:function(e,t,s){e.exports=s.p+"assets/img/figure40.3b344400.png"},352:function(e,t,s){e.exports=s.p+"assets/img/figure41.6c27fa28.png"},353:function(e,t,s){e.exports=s.p+"assets/img/figure42.ff1dd893.png"},354:function(e,t,s){e.exports=s.p+"assets/img/figure43.6f145913.png"},355:function(e,t,s){e.exports=s.p+"assets/img/figure44.de1cb572.png"},356:function(e,t,s){e.exports=s.p+"assets/img/figure45.d66d1945.png"},357:function(e,t,s){e.exports=s.p+"assets/img/figure46.19ed36f6.png"},358:function(e,t,s){e.exports=s.p+"assets/img/figure47.a56796e3.png"},359:function(e,t,s){e.exports=s.p+"assets/img/figure48.d4a2a6ca.png"},360:function(e,t,s){e.exports=s.p+"assets/img/figure49.5546a75f.png"},361:function(e,t,s){e.exports=s.p+"assets/img/figure50.bb186cda.png"},362:function(e,t,s){e.exports=s.p+"assets/img/figure51.631f6480.png"},363:function(e,t,s){e.exports=s.p+"assets/img/figure52.01f39732.png"},364:function(e,t,s){e.exports=s.p+"assets/img/figure53.fb6bc4ad.png"},365:function(e,t,s){e.exports=s.p+"assets/img/figure54.fcbf72d5.png"},366:function(e,t,s){e.exports=s.p+"assets/img/figure55.1a66c9c9.png"},367:function(e,t,s){e.exports=s.p+"assets/img/figure56.17d98ddc.png"},368:function(e,t,s){e.exports=s.p+"assets/img/figure57.82580b50.png"},369:function(e,t,s){e.exports=s.p+"assets/img/figure58.e51ba2ee.png"},370:function(e,t,s){e.exports=s.p+"assets/img/figure59.7a3b5964.png"},424:function(e,t,s){"use strict";s.r(t);var a=s(14),r=Object(a.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"hpere-airgap-installation"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#hpere-airgap-installation"}},[e._v("#")]),e._v(" HPERE Airgap Installation")]),e._v(" "),t("h2",{attrs:{id:"solution-components-overview"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#solution-components-overview"}},[e._v("#")]),e._v(" Solution components overview")]),e._v(" "),t("ol",[t("li",[t("p",[e._v("RMT server")])]),e._v(" "),t("li",[t("p",[e._v("Repo server")]),e._v(" "),t("p",[e._v("a.  Docker registry")]),e._v(" "),t("p",[e._v("b.  K8s RPMs registry")])]),e._v(" "),t("li",[t("p",[e._v("Deploying HPE Ezmeral Runtime Enterprise")])])]),e._v(" "),t("h2",{attrs:{id:"solution-architecture"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#solution-architecture"}},[e._v("#")]),e._v(" Solution architecture")]),e._v(" "),t("p",[t("img",{attrs:{src:s(347),alt:""}})]),e._v(" "),t("p",[e._v("Figure 36: HPERE Airgap Architecture")]),e._v(" "),t("h2",{attrs:{id:"rmt-server"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#rmt-server"}},[e._v("#")]),e._v(" RMT server")]),e._v(" "),t("h3",{attrs:{id:"server-hardware-configuration"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#server-hardware-configuration"}},[e._v("#")]),e._v(" Server hardware configuration")]),e._v(" "),t("ol",[t("li",[t("p",[e._v("Network adapter – 1 interface on the production network.")])]),e._v(" "),t("li",[t("p",[e._v("CPU - 12 vCPU")])]),e._v(" "),t("li",[t("p",[e._v("Memory - 36 GB")])]),e._v(" "),t("li",[t("p",[e._v("Hard disk - a minimum of 3 TB")]),e._v(" "),t("p",[e._v("a.  / - 2 TB")]),e._v(" "),t("p",[e._v("b.  /home - 1 TB")]),e._v(" "),t("p",[e._v("c.  /swap - 70 GB")])]),e._v(" "),t("li",[t("p",[e._v("OS - SUSE Enterprise Linux 15 SP3")])])]),e._v(" "),t("p",[t("img",{attrs:{src:s(348),alt:""}})]),e._v(" "),t("h3",{attrs:{id:"partition-details"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#partition-details"}},[e._v("#")]),e._v(" Partition details")]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[e._v("\nsles15rmt:~ "),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# lsblk")]),e._v("\n\n**NAME MAJ:MIN RM SIZE RO TYPE MOUNTPOINT**\n\nsda "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("8")]),e._v(":0 "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),e._v(" 10T "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),e._v(" disk\n\n├─sda1 "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("8")]),e._v(":1 "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),e._v(" 8M "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),e._v(" part\n\n└─sda2 "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("8")]),e._v(":2 "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),e._v(" 10T "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),e._v(" part\n\n├─system-root "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("254")]),e._v(":0 "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),e._v(" 2T "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),e._v(" lvm /\n\n├─system-swap "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("254")]),e._v(":1 "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("70")]),e._v(".8G "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),e._v(" lvm\n\n└─system-home "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("254")]),e._v(":2 "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("953")]),e._v(".2G "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),e._v(" lvm /home\n\nsr0 "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("11")]),e._v(":0 "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("1")]),e._v(" 663M "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),e._v(" rom\n\nsr1 "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("11")]),e._v(":1 "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("1")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("1")]),e._v(".1G "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),e._v(" rom\n")])])]),t("h3",{attrs:{id:"configuring-rmt-server"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#configuring-rmt-server"}},[e._v("#")]),e._v(" Configuring RMT server")]),e._v(" "),t("ol",[t("li",[t("p",[e._v("While installing OS or once the OS is installed on the server to be used as SLES RMT server, provide the following details:")]),e._v(" "),t("ul",[t("li",[t("p",[e._v("While installing OS")]),e._v(" "),t("ul",[t("li",[e._v('Select the registration method as “register system via scc.suse.com” and provide the "registered email address" and registration code for “SUSE Linux Enterprise Server for x86, AMD64, Intel64”')])])]),e._v(" "),t("li",[t("p",[e._v("Once OS is installed, register the system and enable required modules by executing below commands.")]),e._v(" "),t("ul",[t("li",[t("p",[e._v("SUSEConnect -r REGISTRATION_CODE -e EMAIL_ADDRESS")])]),e._v(" "),t("li",[t("p",[e._v("SUSEConnect -p sle-ha/15.6.0/x86_64 -r ADDITIONAL REGCODE")])]),e._v(" "),t("li",[t("p",[e._v("SUSEConnect -p sle-caas/15.6.0/x86_64 -r ADDITIONAL REGCODE")])]),e._v(" "),t("li",[t("p",[e._v("SUSEConnect -p sle-module-containers/15.6.0/x86_64")])]),e._v(" "),t("li",[t("p",[e._v("SUSEConnect -p sle-module-desktop-applications/15.6.0/x86_64")])]),e._v(" "),t("li",[t("p",[e._v("SUSEConnect -p sle-module-development-tools/15.6.0/x86_64")])]),e._v(" "),t("li",[t("p",[e._v("SUSEConnect -p sle-module-cap-tools/15.6.0/x86_64")])]),e._v(" "),t("li",[t("p",[e._v("SUSEConnect -p PackageHub/15.6.0/x86_64")])]),e._v(" "),t("li",[t("p",[e._v("SUSEConnect -d -p sle-module-server-applications/15.6.0/x86_64")])]),e._v(" "),t("li",[t("p",[e._v("SUSEConnect -p sle-module-legacy/15.6.0/x86_64")])]),e._v(" "),t("li",[t("p",[e._v("SUSEConnect -p sle-module-public-cloud/15.6.0/x86_64")])]),e._v(" "),t("li",[t("p",[e._v("SUSEConnect -p sle-module-web-scripting/15.6.0/x86_64")])])])])])]),e._v(" "),t("li",[t("p",[e._v("Once the server is registered to SUSE and the required modules are enabled, perform the following steps to install RMT service. Ensure the server is connected to the internet at this moment.")]),e._v(" "),t("ul",[t("li",[e._v("Install the prerequisite modules")])]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("zypper")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("in")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("screen")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("vim")]),e._v(" iputils bind-utils\n")])])]),t("p",[e._v("ii. Install RMT server module")]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("zypper")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("in")]),e._v(" rmt-server\n")])])])]),e._v(" "),t("li",[t("p",[e._v("Configure RMT")])])]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" yast2 rmt\n")])])]),t("p",[e._v("This will open a wizard for configuring RMT service")]),e._v(" "),t("p",[e._v("i.  Enter your organization credentials. To retrieve your credentials, login to <scc.suse.com/proxies> and look for the “Mirroring Credentials”")]),e._v(" "),t("p",[t("img",{attrs:{src:s(349),alt:""}}),e._v("\nFigure 38. Retrieve Credentials")]),e._v(" "),t("p",[t("img",{attrs:{src:s(350),alt:""}}),e._v("\nFigure 39. RMT configuration step 1")]),e._v(" "),t("p",[t("img",{attrs:{src:s(351),alt:""}}),e._v("\nFigure 40. RMT configuration step 1 successful")]),e._v(" "),t("p",[e._v("ii.  Enter credentials for a new MariaDB user and database name. This user will then be created. Then select Next.")]),e._v(" "),t("p",[t("img",{attrs:{src:s(352),alt:""}}),e._v("\nFigure 41: RMT configuration step 2")]),e._v(" "),t("p",[e._v("iii.  If a password for the MariaDB root user is already set, you are required to enter it. If no password is set for root, you are asked to enter a new one.")]),e._v(" "),t("p",[t("img",{attrs:{src:s(353),alt:""}})]),e._v(" "),t("p",[e._v("Figure 42: RMT configuration set database root password")]),e._v(" "),t("p",[e._v("iv.  Enter a common name for the SSL certificates. The common name should usually be the fully qualified domain name (FQDN) of the server. Enter all domain names and IP addresses with which you want to reach the RMT server as alternative common names.")]),e._v(" "),t("p",[t("img",{attrs:{src:s(354),alt:""}})]),e._v(" "),t("p",[e._v("Figure 43: RMT configuration step 3")]),e._v(" "),t("p",[e._v("v.  When all common names are entered, select Next.")]),e._v(" "),t("p",[e._v("vi. Provide a password for the CA private certificate key and click OK.")]),e._v(" "),t("p",[t("img",{attrs:{src:s(355),alt:""}})]),e._v(" "),t("p",[e._v("Figure 44: RMT configuration setting CA private key")]),e._v(" "),t("p",[e._v("vii.  If firewalld is enabled on this system, enable the checkbox to open the required ports.\n"),t("img",{attrs:{src:s(356),alt:""}})]),e._v(" "),t("p",[e._v("Figure 45: RMT configuration step 4")]),e._v(" "),t("p",[e._v("viii.  Continue with Next.")]),e._v(" "),t("p",[t("img",{attrs:{src:s(357),alt:""}})]),e._v(" "),t("p",[e._v("Figure 46: RMT configuration step 5")]),e._v(" "),t("p",[e._v("ix.  To view the summary, click Next. Close YaST by clicking Finish. YaST then enables and starts all zypper services and timers.")]),e._v(" "),t("p",[t("img",{attrs:{src:s(358),alt:""}})]),e._v(" "),t("p",[e._v("Figure 47: RMT configuration Summary")]),e._v(" "),t("h2",{attrs:{id:"enabling-slp-announcements"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#enabling-slp-announcements"}},[e._v("#")]),e._v(" Enabling SLP Announcements")]),e._v(" "),t("p",[e._v("The SLP is service discovery protocol that allows computers and other devices to find services in a LAN without prior configuration. RMT\nincludes the SLP service description file /etc/slp.reg.d/rmt-server.reg.")]),e._v(" "),t("p",[e._v("To enable SLP announcements of the RMT service, follow these steps:")]),e._v(" "),t("ol",[t("li",[e._v("If firewalld is running, open relevant ports and reload the firewalld configuration:")])]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" firewall-cmd –permanent –add-port"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("427")]),e._v("/tcp\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" firewall-cmd –permanent –add-port"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("427")]),e._v("/udp\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" firewall-cmd –reload\n")])])]),t("ol",{attrs:{start:"2"}},[t("li",[e._v("Verify that SLP server is installed and possibly install it:")])]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("zypper")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("install")]),e._v(" openslp-server\n")])])]),t("ol",{attrs:{start:"3"}},[t("li",[e._v("Enable and start the SLP service:")])]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" systemctl "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("enable")]),e._v(" slpd.service\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" systemctl restart slpd.service\n")])])]),t("h2",{attrs:{id:"mirror-suse-products-and-packages"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mirror-suse-products-and-packages"}},[e._v("#")]),e._v(" Mirror SUSE products and packages")]),e._v(" "),t("ol",[t("li",[e._v("Synchronise all repositories and ID that you have access to.")])]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" rmt-cli "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("sync")]),e._v("\n")])])]),t("ol",{attrs:{start:"2"}},[t("li",[e._v("List and enable all the products")])]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" rmt-cli product list –all\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" rmt-cli product "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("enable")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("ID"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v("\n")])])]),t("ol",{attrs:{start:"3"}},[t("li",[e._v("Start mirror of enabled products")])]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("screen")]),e._v(" rmt-cli mirror\n")])])]),t("ol",{attrs:{start:"4"}},[t("li",[e._v("Register clients to the RMT server using the following URL")])]),e._v(" "),t("ul",[t("li",[e._v("As a boot parameter")])]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("regurl")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("http://"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("rmt_server_fqdn"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v("/\n")])])]),t("ol",{attrs:{start:"2"}},[t("li",[e._v("As a local subscription server")])]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" SUSEConnect –url http://"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("rmt_server_fqdn"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v("/\n")])])]),t("h2",{attrs:{id:"download-the-packages"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#download-the-packages"}},[e._v("#")]),e._v(" Download the packages")]),e._v(" "),t("p",[e._v("The complete set of air gap container image files can be downloaded with the air gap utility script and import them to a local filesystem or remote container registry which are necessary for installing Kubernetes cluster in HPERE in an airgap environment. Download them when the system is connected to internet. Once they are downloaded, disconnect the server from the internet. See "),t("a",{attrs:{href:"https://docs.containerplatform.hpe.com/56/reference/deploying-the-platform/phase-4/using-the-air-gap-utility-script.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Using the Air Gap Utility"),t("OutboundLink")],1)]),e._v(" "),t("h3",{attrs:{id:"using-the-air-gap-utility"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#using-the-air-gap-utility"}},[e._v("#")]),e._v(" Using the Air Gap Utility:")]),e._v(" "),t("p",[e._v("HPE Ezmeral Runtime Enterprise provides a utility you can use to query,filter, and download all air gap container images necessary for your environment to a local filesystem or remote registry. Below steps shows how to use the air gap utility to download files in an air-gapped HPE Ezmeral Runtime Enterprise environment.")]),e._v(" "),t("p",[t("strong",[e._v("Installing the Air Gap Utility Package")])]),e._v(" "),t("p",[e._v("Before downloading files for your air gap environment, you must first install the air gap script package. You can install the package on any non-platform host, even outside the platform installation. Python 2.7 or Python 3.6 and greater is required for install.")]),e._v(" "),t("p",[t("strong",[e._v("To install the air gap utility package:")])]),e._v(" "),t("ol",[t("li",[t("p",[e._v("Download the air gap utility package from the following links:")]),e._v(" "),t("ul",[t("li",[t("p",[t("a",{attrs:{href:"https://ezmeral-platform-releases.s3.amazonaws.com/5.6.0/hpeairgaputil-1.3-py2.py3-none-any.whl",target:"_blank",rel:"noopener noreferrer"}},[e._v("HPE air gap utility (North America download site)"),t("OutboundLink")],1)])]),e._v(" "),t("li",[t("p",[t("a",{attrs:{href:"https://ezmeral-platform-releases-seoul.s3.ap-northeast-2.amazonaws.com/5.6.0/hpeairgaputil-1.3-py2.py3-none-any.whl",target:"_blank",rel:"noopener noreferrer"}},[e._v("HPE air gap utility (Asia Pacific download site)"),t("OutboundLink")],1)])])])]),e._v(" "),t("li",[t("p",[e._v("Install Skopeo. In the CLI, enter the following:")])])]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("zypper")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("install")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-y")]),e._v(" skopeo\n")])])]),t("ol",{attrs:{start:"3"}},[t("li",[e._v("Install the hpeairgaputil package")])]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" pip3 "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("install")]),e._v(" hpeairgaputil-1.3-py2.py3-none-any.whl\n")])])]),t("p",[e._v("Using Air Gap filters:")]),e._v(" "),t("ol",[t("li",[e._v("To display a list of options available in the hpe-airgap-util, use the following command:")])]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" hpe-airgap-util –help\n")])])]),t("ol",{attrs:{start:"2"}},[t("li",[e._v("To copy all required and optional container images use below commands:")])]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" hpe-airgap-util "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("--release")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("5.6")]),e._v(".0 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("--required")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("--copy")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("--dest_url")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("docker-registry-server-ip"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(":5000\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" hpe-airgap-util "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("--release")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("5.6")]),e._v(".0 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("--optional")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("--copy")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("--dest_url")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("docker-registry-server-ip"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(":5000\n")])])]),t("h2",{attrs:{id:"disconnect-from-internet"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#disconnect-from-internet"}},[e._v("#")]),e._v(" Disconnect from internet")]),e._v(" "),t("p",[e._v("Once the server is connected to SUSE customer center, up to date with the repositories, packages, RPMs and files, and they are mirrored into the local repository, it is time to disconnect the server from the internet. Refer to appendix "),t("a",{attrs:{href:"#simulating-an-air-gap-environment"}},[e._v("Simulating an air gap environment")]),e._v(" for the configuration steps utilized in this document.")]),e._v(" "),t("h3",{attrs:{id:"registering-to-rmt-server"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#registering-to-rmt-server"}},[e._v("#")]),e._v(" Registering to RMT server")]),e._v(" "),t("p",[e._v("Once OS is installed, please refer to the “Automated HPE Ezmeral Runtime Enterprise deployment” section and run prepare_hosts playbook\nfor registering client systems to RMT server.")]),e._v(" "),t("p",[e._v("Make sure following modules are enabled and up to date by running")]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("zypper")]),e._v(" refresh\n")])])]),t("ul",[t("li",[t("p",[e._v("SUSEConnect -p sle-ha/15.6.0/x86_64")])]),e._v(" "),t("li",[t("p",[e._v("SUSEConnect -p sle-caas/15.6.0/x86_64")])]),e._v(" "),t("li",[t("p",[e._v("SUSEConnect -p sle-module-containers/15.6.0/x86_64")])]),e._v(" "),t("li",[t("p",[e._v("SUSEConnect -p sle-module-desktop-applications/15.6.0/x86_64")])]),e._v(" "),t("li",[t("p",[e._v("SUSEConnect -p sle-module-development-tools/15.6.0/x86_64")])]),e._v(" "),t("li",[t("p",[e._v("SUSEConnect -p sle-module-cap-tools/15.6.0/x86_64")])]),e._v(" "),t("li",[t("p",[e._v("SUSEConnect -p PackageHub/15.6.0/x86_64")])]),e._v(" "),t("li",[t("p",[e._v("SUSEConnect -d -p sle-module-server-applications/15.6.0/x86_64")])]),e._v(" "),t("li",[t("p",[e._v("SUSEConnect -p sle-module-legacy/15.6.0/x86_64")])]),e._v(" "),t("li",[t("p",[e._v("SUSEConnect -p sle-module-public-cloud/15.6.0/x86_64")])]),e._v(" "),t("li",[t("p",[e._v("SUSEConnect -p sle-module-web-scripting/15.6.0/x86_64")])])]),e._v(" "),t("h2",{attrs:{id:"docker-registry-and-k8s-rpms-repository-server"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#docker-registry-and-k8s-rpms-repository-server"}},[e._v("#")]),e._v(" Docker registry and K8s RPMs repository server")]),e._v(" "),t("h3",{attrs:{id:"server-hardware-configuration-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#server-hardware-configuration-2"}},[e._v("#")]),e._v(" Server hardware configuration")]),e._v(" "),t("ol",[t("li",[t("p",[e._v("Network adapter – 1 interface on the production network.")])]),e._v(" "),t("li",[t("p",[e._v("CPU - 2 vCPU")])]),e._v(" "),t("li",[t("p",[e._v("Memory - 16 GB")])]),e._v(" "),t("li",[t("p",[e._v("Hard disk - a minimum of 500 GB")])]),e._v(" "),t("li",[t("p",[e._v("OS - SUSE Enterprise Linux 15 SP3")])])]),e._v(" "),t("p",[t("img",{attrs:{src:s(359),alt:""}})]),e._v(" "),t("h3",{attrs:{id:"partition-details-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#partition-details-2"}},[e._v("#")]),e._v(" Partition details")]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[e._v("NAME            MAJ:MIN     RM  SIZE    RO  TYPE    MOUNTPOINT\n\nsda             "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("8")]),e._v(":0         "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),e._v("   500G "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),e._v(" disk\n\n├─sda1          "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("8")]),e._v(":1         "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),e._v("   500M "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),e._v(" part /boot/efi\n\n└─sda2          "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("8")]),e._v(":2         "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),e._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("499")]),e._v(".5G "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),e._v(" part\n\n├─system-swap   "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("254")]),e._v(":0       "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),e._v("   63G "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),e._v(" lvm "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v("SWAP"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v("\n\n├─system-root   "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("254")]),e._v(":1       "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),e._v("   150G "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),e._v(" lvm /\n\n├─system-var    "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("254")]),e._v(":2       "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),e._v("   100G "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),e._v(" lvm /var\n\n├─system-srv    "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("254")]),e._v(":3       "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),e._v("   100G "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),e._v(" lvm /srv\n\n└─system-home   "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("254")]),e._v(":4       "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),e._v("   25G "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),e._v(" lvm /home\n\nsr0             "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("11")]),e._v(":0        "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("1")]),e._v("   1024M "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),e._v(" rom\n\nsr1             "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("11")]),e._v(":1        "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("1")]),e._v("   1024M "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),e._v(" rom ```\n\n")])])]),t("h3",{attrs:{id:"configuring-docker-registry"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#configuring-docker-registry"}},[e._v("#")]),e._v(" Configuring docker registry")]),e._v(" "),t("p",[e._v("Login to the server which would be utilized as the docker register andperform the following steps:")]),e._v(" "),t("ol",[t("li",[t("p",[e._v("Register to the RMT server. Refer to section "),t("a",{attrs:{href:"#registering-to-rmt-server"}},[e._v("Registering to RMT server")]),e._v(" for more details.")])]),e._v(" "),t("li",[t("p",[e._v("Install and start Docker on SLES")])])]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("zypper")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("install")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("docker")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("docker")]),e._v(" –version\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" systemctl "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("enable")]),e._v(" docker.service\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" systemctl start docker.service\n")])])]),t("ol",{attrs:{start:"3"}},[t("li",[e._v("Create registry on SLES as a docker container with restart policy as always.")])]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("docker")]),e._v(" run "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-d")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-p")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("5000")]),e._v(":5000 –restart"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("always –name registry registry:2\n")])])]),t("ol",{attrs:{start:"4"}},[t("li",[t("p",[e._v("Disconnect the server from the internet. Refer to section "),t("a",{attrs:{href:"#simulating-an-air-gap-environment"}},[e._v("Simulating an air gap environment")]),e._v(" for more details.")])]),e._v(" "),t("li",[t("p",[e._v("Pull, Tag & Push an image to the local registry")])])]),e._v(" "),t("ul",[t("li",[t("p",[e._v("Copy the container images tar file from the repository server into this server.")])]),e._v(" "),t("li",[t("p",[e._v("Navigate to the folder containing images required for deploying HPERE")])])]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("cd")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("path_to_the_images_tar_file"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v("\n")])])]),t("ul",[t("li",[e._v("Load the tar file containing the images required to setup the kubernetes cluster from HPERE in an airgap environment. See Appendix for detailed list of images needed.")])]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("docker")]),e._v(" load "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-i")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("images_tar_file"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v("\n")])])]),t("ul",[t("li",[e._v("Tag each of the image from the list using the following command")])]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("docker")]),e._v(" tag "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("individual image name extracted from images_tar_file"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" localhost:5000/"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("individual image name extracted from images_tar_file"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v("\n")])])]),t("ul",[t("li",[e._v("Push each of the tagged image using the following command")])]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("docker")]),e._v(" push localhost:5000/"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("individual image name extracted from images_tar_file"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v("\n")])])]),t("ul",[t("li",[e._v("Test the presence of images")])]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("docker")]),e._v(" images\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("docker")]),e._v(" images "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("grep")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("internal registry "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("ip")]),e._v(" address"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(":5000\n")])])]),t("h3",{attrs:{id:"validate-registry-from-local-environment"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#validate-registry-from-local-environment"}},[e._v("#")]),e._v(" Validate registry from local environment")]),e._v(" "),t("ol",[t("li",[e._v("Within the same server")])]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("docker")]),e._v(" pull "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("image_not_present_in_registry"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v("  - fail sinceinternet isn’t available\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("docker")]),e._v(" pull "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("image_within_registry"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" - success\n")])])]),t("ol",{attrs:{start:"2"}},[t("li",[t("p",[e._v("Outside of this registry server, on the hosts that need access to the local docker registry")]),e._v(" "),t("ul",[t("li",[e._v("Create or update the /etc/docker/daemon.json on the docker hosts which needs access to the above created docker registry. Assuming there are no other settings in the file, it should have the following contents:")])]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n“insecure-registries” "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v("“"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("registry_server_ip_address"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(":5000”"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])]),t("p",[e._v('Substitute the “<registry_server_ip_address>" with the address of insecure registry.')]),e._v(" "),t("ul",[t("li",[e._v("Restart Docker for the changes to take effect.")])]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" systemctl restart docker.service\n")])])]),t("p",[e._v("iii.  Pull the images")]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("docker")]),e._v(" pull "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("image_not_present_in_registry"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#### fail since internet isn’t available")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("docker")]),e._v(" pull "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("image_within_registry"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("### success")]),e._v("\n")])])])])]),e._v(" "),t("h2",{attrs:{id:"hpere-deployment"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#hpere-deployment"}},[e._v("#")]),e._v(" HPERE Deployment")]),e._v(" "),t("h3",{attrs:{id:"operating-system-deployment-for-hpere-hosts"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#operating-system-deployment-for-hpere-hosts"}},[e._v("#")]),e._v(" Operating System Deployment for HPERE hosts")]),e._v(" "),t("p",[e._v("The supported version of SLES for deploying HPE Runtime Enterprise is SUSE Enterprise Linux 15 SP3. This section outlines the manual steps involved in deploying OS for the servers used as HPERE controller, HPERE gateway, ubernetes master and ubernetes worker nodes.")]),e._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[e._v("NOTE")]),e._v(" "),t("p",[e._v("OS can be deployed by using the playbook located in "),t("a",{attrs:{href:"https://github.com/HewlettPackard/hpe-solutions-hpecp/blob/master/LTI/HPECP_v5.5_restAPI/playbooks/os_deployment.yml",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://github.com/HewlettPackard/hpe-solutions-hpecp/blob/master/LTI/HPECP_v5.5_restAPI/playbooks/os_deployment.yml"),t("OutboundLink")],1),e._v(". Please refer to the “"),t("RouterLink",{attrs:{to:"/Solution-Deployment/Operating-system-deployment.html#installation"}},[e._v("Deploying operating system on bare-metal nodes")]),e._v("” section in this document for more details.")],1)]),e._v(" "),t("ol",[t("li",[t("p",[e._v("Boot using the installation Media select language & and the product “Sles 15 SP3”.")])]),e._v(" "),t("li",[t("p",[e._v("Select you registration method as the RMT server set up previously in section RMT server and choose “yes” to receive updated repos.")])])]),e._v(" "),t("p",[t("img",{attrs:{src:s(360),alt:""}})]),e._v(" "),t("p",[e._v("Figure 49. Registration Method")]),e._v(" "),t("ol",{attrs:{start:"3"}},[t("li",[t("p",[e._v("Select the following Extension and Modules:")]),e._v(" "),t("ul",[t("li",[t("p",[e._v("sle-ha/15.3/x86_64")])]),e._v(" "),t("li",[t("p",[e._v("PackageHub/15.3/x86_64")])]),e._v(" "),t("li",[t("p",[e._v("sle-module-legacy/15.3/x86_64")])]),e._v(" "),t("li",[t("p",[e._v("sle-module-python2/15.3/x86_64")])]),e._v(" "),t("li",[t("p",[e._v("sle-module-containers/15.3/x86_64")])]),e._v(" "),t("li",[t("p",[e._v("sle-module-basesystem/15.3/x86_64")])]),e._v(" "),t("li",[t("p",[e._v("sle-module-public-cloud/15.3/x86_64")])]),e._v(" "),t("li",[t("p",[e._v("sle-module-desktop-applications/15.3/x86_64")])]),e._v(" "),t("li",[t("p",[e._v("sle-module-server-applications/15.3/x86_64")])]),e._v(" "),t("li",[t("p",[e._v("sle-module-development-tools/15.3/x86_64")])])])])]),e._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[e._v("NOTE")]),e._v(" "),t("p",[e._v("Alternatively, refer to the section "),t("a",{attrs:{href:"#disconnect-from-internet"}},[e._v("Registering to RMT server")]),e._v(" for registering to RMT server once OS is installed.")])]),e._v(" "),t("ol",{attrs:{start:"4"}},[t("li",[e._v("Using guided Partitioning setup, the OS partition as shown below\n"),t("img",{attrs:{src:s(361),alt:""}})])]),e._v(" "),t("p",[e._v("Figure 50. OS Partitioning\n5.  Choose “minimal” installation mode:\n"),t("img",{attrs:{src:s(362),alt:""}})]),e._v(" "),t("p",[e._v("Figure 51. System Role")]),e._v(" "),t("ol",{attrs:{start:"6"}},[t("li",[e._v("In the install summary ensure SSH access is enabled and then click Install.\n"),t("img",{attrs:{src:s(363),alt:""}})])]),e._v(" "),t("p",[e._v("Figure 52: Enable SSH Access")]),e._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[e._v("NOTE")]),e._v(" "),t("p",[e._v("DNS/Bind A record, PTR record is required for the HPERE installation.")])]),e._v(" "),t("h2",{attrs:{id:"hpere-host-preparation"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#hpere-host-preparation"}},[e._v("#")]),e._v(" HPERE Host preparation")]),e._v(" "),t("p",[e._v("This section covers manual steps for preparing Hosts for Ezmeral Runtime Enterprise. Automated script is available for HPERE Host preparation at https://github.com/HewlettPackard/hpe-solutions-hpecp/tree/master/HPECP_v5.5_restAPI/playbooks/prepare_hosts.yml . Please refer to the following section "),t("a",{attrs:{href:"./Preparing-SLES15-hosts#preparing-sles-15-hosts-for-hpere-installation"}},[e._v("Host Preparation")]),e._v(" section in this document for more details.")]),e._v(" "),t("ol",[t("li",[e._v("If using proxy or ignore, setup proxy as shown below in the configuration file - /etc/sysconfig/proxy")])]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("NO_PROXY")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("”localhost, "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("127.0")]),e._v(".0.1l”\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("HTTP_PROXY")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("”http://"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("proxy server"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(":port/”\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("HTTPS_PROXY")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("” http://"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("proxy server"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(":port/”\n")])])]),t("ol",{attrs:{start:"2"}},[t("li",[e._v("Fix autofs configuration.")])]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("zypper")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("in")]),e._v(" autofs\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("sed")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-i")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v("''")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-e")]),e._v(" “s"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#/net.*$|/net -hosts|g” /etc/auto.master")]),e._v("\n")])])]),t("ol",{attrs:{start:"3"}},[t("li",[e._v("Install libcgroup V1")])]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("zypper")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("in")]),e._v(" libcgroup1\n")])])]),t("ol",{attrs:{start:"4"}},[t("li",[e._v("Reboot the server")])]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("reboot")]),e._v("\n")])])]),t("ol",{attrs:{start:"5"}},[t("li",[e._v("Perform a system update if necessary")])]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("zypper")]),e._v(" up –non-interactive\n")])])]),t("h2",{attrs:{id:"preparing-legacy-gpu-hosts"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#preparing-legacy-gpu-hosts"}},[e._v("#")]),e._v(" Preparing legacy GPU hosts")]),e._v(" "),t("p",[e._v("All the above repos for worker hosts are required. In addition, perform the following steps from GPU_Driver_Installation. Except of course, you will be using zypper instead of yum.")]),e._v(" "),t("p",[e._v("For the new kernel to load.")]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("zypper")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("install")]),e._v(" kernel-default-devel gcc-c++ perl pciutils\n")])])]),t("p",[e._v("In addition, you need to install the following package before running the NVIDIA installer on the host.")]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("zypper")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("in")]),e._v(" libglvnd-devel\n")])])]),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[e._v("NOTE")]),e._v(" "),t("p",[e._v("If the server is not rebooted platform install will fail. You may choose to not reboot now for GPU hosts.")])]),e._v(" "),t("h2",{attrs:{id:"hpere-controller"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#hpere-controller"}},[e._v("#")]),e._v(" HPERE controller")]),e._v(" "),t("p",[e._v("Once the OS is installed as per the section "),t("a",{attrs:{href:"./Operating-system-deployment#deploying-operating-system-on-bare-metal-nodes"}},[e._v("Operating System Deployment for HPERE hosts")]),e._v(", login to the server to be configured as the HPERE controller and perform the steps as per "),t("a",{attrs:{href:"#hpere-host-preparation"}},[e._v("Host preparation")]),e._v(" section.")]),e._v(" "),t("h3",{attrs:{id:"installing-hpere-controller-for-sles"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#installing-hpere-controller-for-sles"}},[e._v("#")]),e._v(" Installing HPERE Controller for SLES")]),e._v(" "),t("p",[e._v("On the same server, perform the following steps to install HPERE controller")]),e._v(" "),t("ol",[t("li",[t("p",[e._v("Copy the hpe-cp-sles-release-5.6.0-xxxx.bin to /root folder from the repository server.")]),e._v(" "),t("p",[e._v("You can download .bin file from https://ezmeral-platform-releases.s3.amazonaws.com/5.6.0/3086/hpe-cp-sles-release-5.6.0-3086.bin")])]),e._v(" "),t("li",[t("p",[e._v("Copy the feed.json file from the repository server to the /srv/bluedata/catalog folder.")])])]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("mkdir")]),e._v(" –p /srv/bluedata/catalog\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("cp")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("location_of_feed.json_in_controller"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" /srv/bluedata/catalog/\n")])])]),t("ol",{attrs:{start:"3"}},[t("li",[e._v("Give execute permission using the following command")])]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("chmod")]),e._v(" +x /root/hpe-cp-sles-release-5.6.0-xxxx.bin\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("chmod")]),e._v(" +x /srv/bluedata/catalog/\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("chmod")]),e._v(" +x /srv/bluedata/catalog/*\n")])])]),t("ol",{attrs:{start:"4"}},[t("li",[e._v("Execute the HPERE bin file using the following command")])]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" ./hpe-cp-sles-release-5.6.0-3086.bin –default-password admin123\n")])])]),t("ol",{attrs:{start:"5"}},[t("li",[t("p",[e._v("Once completed, Login to the controller via browser to land to the admin UI")])]),e._v(" "),t("li",[t("p",[e._v("Once logged in to the HPERE Controller UI, configure the controller by providing the details as shown in the following figure and click submit.")])])]),e._v(" "),t("p",[t("img",{attrs:{src:s(364),alt:""}})]),e._v(" "),t("ol",{attrs:{start:"7"}},[t("li",[e._v("Controller installation is then instantiated, wait until it is complete.")])]),e._v(" "),t("p",[t("img",{attrs:{src:s(365),alt:""}})]),e._v(" "),t("ol",{attrs:{start:"8"}},[t("li",[e._v("Once the installation is complete, the HPERE login page would be accessible.")])]),e._v(" "),t("p",[t("img",{attrs:{src:s(366),alt:""}})]),e._v(" "),t("p",[t("img",{attrs:{src:s(367),alt:""}})]),e._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[e._v("NOTE")]),e._v(" "),t("p",[e._v("Default credentials to HPERE login access is admin/admin123")])]),e._v(" "),t("h2",{attrs:{id:"hpere-gateway-server"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#hpere-gateway-server"}},[e._v("#")]),e._v(" HPERE gateway server")]),e._v(" "),t("p",[e._v("Once the OS is installed as per the section "),t("a",{attrs:{href:"./Operating-system-deployment#installation"}},[e._v("Operating System Deployment for HPERE hosts")]),e._v(", login to the server to be configured as the HPERE controller and perform the steps as per "),t("RouterLink",{attrs:{to:"/Solution-Deployment/Manual-ERE-Deployment.html#hpe-ezmeral-runtime-enterprise-gateway"}},[e._v("gateway")]),e._v(" section.")],1),e._v(" "),t("h3",{attrs:{id:"airgap-settings-in-hpere-controller"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#airgap-settings-in-hpere-controller"}},[e._v("#")]),e._v(" Airgap settings in HPERE Controller")]),e._v(" "),t("p",[e._v("The Air Gap tab of the System Settings screen allows the Platform Administrator to specify “air gap” settings to be used when the Kubernetes hosts, clusters, and tenants within HP Ezmeral Runtime Enterprise do not have connectivity to the Internet.")]),e._v(" "),t("p",[e._v("Enter the following settings:")]),e._v(" "),t("ul",[t("li",[t("p",[e._v("Yum repository section of this tab:")]),e._v(" "),t("ul",[t("li",[t("p",[e._v("Base URL: This is the URL to the YUM repository.")])]),e._v(" "),t("li",[t("p",[e._v("Repo GPG URL: This is the URL to the YUM repository GNU Privacy Guard (optional).")])]),e._v(" "),t("li",[t("p",[e._v("RPM GPG URL: This is the URL to the RPM repository GNU Privacy Guard (optional).")])])])]),e._v(" "),t("li",[t("p",[e._v("The Container Registry section of this tab:")]),e._v(" "),t("ul",[t("li",[t("p",[e._v("Container URL: URL to the Docker registry that contains the images needed for air-gap Kubernetes installations within HPE Container Platform.")])]),e._v(" "),t("li",[t("p",[e._v("Username: Username to access the Docker registry, if needed.")])]),e._v(" "),t("li",[t("p",[e._v("Password: Password to access the Docker registry, if needed.")])]),e._v(" "),t("li",[t("p",[e._v("Secured: Checking the Secured checkbox indicates that the Kubernetes air-gap Docker registry is secure.")])]),e._v(" "),t("li",[t("p",[e._v("Docker Client Certificate: Location of the Docker registry certificate if you are using a secured connection. Clicking the Browse button opens a browser-standard Open dialog box that allows you to navigate to and locate the certificate to add.")])]),e._v(" "),t("li",[t("p",[e._v("Clicking Submit saves your changes.")])])]),e._v(" "),t("p",[t("img",{attrs:{src:s(368),alt:""}})])])]),e._v(" "),t("h2",{attrs:{id:"kubernetes-hosts"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#kubernetes-hosts"}},[e._v("#")]),e._v(" Kubernetes hosts")]),e._v(" "),t("h3",{attrs:{id:"preparing-kubernetes-hosts"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#preparing-kubernetes-hosts"}},[e._v("#")]),e._v(" Preparing Kubernetes hosts")]),e._v(" "),t("p",[e._v("Once the OS is installed as per the section "),t("RouterLink",{attrs:{to:"/Solution-Deployment/Operating-system-deployment.html#installation"}},[e._v("Operating System Deployment for HPERE hosts")]),e._v(", login to the server to be configured as the HPERE controller and perform the steps as per "),t("a",{attrs:{href:"#hpere-host-preparation"}},[e._v("Host preparation")]),e._v(" section.")],1),e._v(" "),t("p",[e._v("After the hosts are prepared, login to the servers and perform the following:")]),e._v(" "),t("ul",[t("li",[e._v("Edit the /etc/sysctl.conf file and turn off reverse path filter (add the following line if necessary):")])]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("vi")]),e._v(" /etc/sysctl.conf\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" net.ipv4.conf.all.rp_filter "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),e._v("\n")])])]),t("ul",[t("li",[e._v("Reboot the server for changes to reflect")])]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("reboot")]),e._v("\n")])])]),t("ul",[t("li",[e._v("Turn off swap")])]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" swapoff –a\n")])])]),t("p",[e._v("Once above-mentioned configurations are completed on the host, we can perform the ubernetes host installation and create the ubernetes cluster")]),e._v(" "),t("h3",{attrs:{id:"kubernetes-host-installation"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#kubernetes-host-installation"}},[e._v("#")]),e._v(" Kubernetes host installation")]),e._v(" "),t("p",[e._v("Please refer to the “"),t("RouterLink",{attrs:{to:"/Solution-Deployment/Manual-ERE-Deployment.html#add-kubernetes-hosts"}},[e._v("Adding Kubernetes Hosts")]),e._v("” section in this document for installing Hosts.")],1),e._v(" "),t("h3",{attrs:{id:"creating-a-kubernetes-cluster"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#creating-a-kubernetes-cluster"}},[e._v("#")]),e._v(" Creating a Kubernetes Cluster")]),e._v(" "),t("p",[e._v("Please refer to the “"),t("RouterLink",{attrs:{to:"/Solution-Deployment/Manual-ERE-Deployment.html#create-a-kubernetes-cluster"}},[e._v("Creating Kubernetes Cluster")]),e._v("” section in this document for creating cluster.")],1),e._v(" "),t("h3",{attrs:{id:"launching-kubernetes-dashboard"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#launching-kubernetes-dashboard"}},[e._v("#")]),e._v(" Launching Kubernetes Dashboard")]),e._v(" "),t("p",[e._v("Please refer to the “"),t("RouterLink",{attrs:{to:"/Solution-Deployment/Manual-ERE-Deployment.html#launch-the-kubernetes-dashboard"}},[e._v("Launching Kubernetes Dashboard")]),e._v("” section to launch kubernetes dashboard")],1),e._v(" "),t("h3",{attrs:{id:"validating-the-deployment"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#validating-the-deployment"}},[e._v("#")]),e._v(" Validating the deployment")]),e._v(" "),t("p",[e._v("The following example is based on the WordPress and MySQL with Persistent Volume described [here](https://kubernetes.io/docs/tutorials stateful-application/mysql-wordpress-persistent-volume/).")]),e._v(" "),t("p",[e._v("MySQL and WordPress each require a Persistent Volume to store data. Their Persistent Volume Claims will be created at the deployment step. HPE Ezmeral Runtime Enterprise uses MapR as the default persistent volume.")]),e._v(" "),t("p",[e._v("Begin by adding a Secret generator in kustomization.yaml by executing the following command, being sure to replace YOUR_PASSWORD with the password you want to use.")]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("mkdir")]),e._v(" wordpress\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("cd")]),e._v(" wordpress\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("cat")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<<")]),e._v("EOF "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v("./kustomization.yaml\n")])])]),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[e._v("secretGenerator:\n- name: mysql-pass\nliterals:\n- "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("password")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("YOUR_PASSWORD\nEOF\n")])])]),t("p",[e._v("Next, use either of the following methods, create manifests based on the following two yaml manifest files for the MySQL and WordPress services, respectively:")]),e._v(" "),t("ul",[t("li",[t("p",[t("a",{attrs:{href:"https://kubernetes.io/examples/application/wordpress/mysql-deployment.yaml",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://kubernetes.io/examples/application/wordpress/mysql-deployment.yaml"),t("OutboundLink")],1)])]),e._v(" "),t("li",[t("p",[t("a",{attrs:{href:"https://kubernetes.io/examples/application/wordpress/wordpress-deployment.yaml",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://kubernetes.io/examples/application/wordpress/wordpress-deployment.yaml"),t("OutboundLink")],1)])])]),e._v(" "),t("p",[e._v("If you installed HPE ERE with tenant storage, then MapR will already be registered as the default Storage Class in this namespace.")]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" kubectl get StorageClass\n")])])]),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[e._v("NAME               PROVISIONER     AGE\ndefault "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("default"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" com.mapr.csi-kdf 39h\n")])])]),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" kubectl describe StorageClass\n")])])]),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[e._v("Name "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v(":")]),e._v(" default\nIsDefaultClass "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v(":")]),e._v(" Yes\nAnnotations "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v(":")]),e._v(" storageclass.kubernetes.io/is-default-class"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("true\nProvisioner "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v(":")]),e._v(" com.mapr.csi-kdf\nParameters "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v(":")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("cldbHosts")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("192.168")]),e._v(".20.131:7222,cluster"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("epic.mapr.cluster,csi.storage.k8s.io/provisioner-secret-name"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("mapr-user-secret,csi.storage.k8s.io/provisioner-secret-namespace"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("mapr-csi,csiNodePublishSecretName"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("mapr-ticket-secret,csiNodePublishSecretNamespace"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("mapr-csi,mountPrefix"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("/mapr-csi,namePrefix"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("k8s-1-,platinum"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("true,restServers"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("192.168")]),e._v(".20.131:8443,securityType"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("secure\nAllowVolumeExpansion "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("unset"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v("\nMountOptions "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("none"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v("\nReclaimPolicy "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v(":")]),e._v(" Delete\nVolumeBindingMode "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v(":")]),e._v(" Immediate\nEvents "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("none"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v("\n")])])]),t("p",[e._v("In these two manifest files, both the WordPress service and MySQL are requesting a persistent volume (PV)")]),e._v(" "),t("p",[e._v("Neither pod makes any explicit request for a specific storageClassName. Hence, they will use the default MapR StorageClass.")]),e._v(" "),t("ul",[t("li",[e._v("Edit the WordPress manifest yaml to use the NodePort service instead of LoadBalancer service. This needs to be done for HPE ERE to re-map the ports.")])]),e._v(" "),t("p",[e._v("Continue by adding these two manifests to the kustomization.yaml file.")]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("cat")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<<")]),e._v("EOF "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">>")]),e._v("./kustomization.yaml\n")])])]),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[e._v("resources:\n- mysql-deployment.yaml\n- wordpress-deployment.yaml\nEOF\n")])])]),t("ul",[t("li",[e._v("The kustomization.yaml contains all of the resources for deploying a WordPress site and a MySQL database. You can apply the directory, and then verify both the MapR volumes and the services, as follows:")])]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" kubectl apply –kustomize ./\n")])])]),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[e._v("secret/mysql-pass-9tt65k5fgm created\nservice/wordpress-mysql created\nservice/wordpress created\ndeployment.apps/wordpress-mysql created\ndeployment.apps/wordpress created\npersistentvolumeclaim/mysql-pv-claim created\npersistentvolumeclaim/wp-pv-claim created\n")])])]),t("p",[e._v("Confirm that PVC is using the MapR StorageClass (see highlighted text below).")]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" kubectl get pvc\n")])])]),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[e._v("NAME            STATUS                  VOLUME                       CAPACITY ACCESS MODES  STORAGECLASS AGE\n\nmysql-pv-claim  Bound   mapr-pv-16f97a33-b8dd-488a-b6db-1d94a84286e2 20Gi       RWO         default     48s\nwp-pv-claim     Bound   mapr-pv-896b3504-e9ba-4593-b9a0-88a9ece392b5 20Gi       RWO         default     48s\n")])])]),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" kubectl get "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("pv")]),e._v("\n")])])]),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[e._v("NAME CAPACITY ACCESS MODES RECLAIM POLICY STATUS CLAIM STORAGECLASS REASON AGE\n\nmapr-pv-32850109-ef66-42db-9522-b563fbc01eae 10Gi RWO Delete Bound bdwebterm/pvc-kd-977sb-0 default 41h\nmapr-pv-a24b1733-39db-40d2-bdaf-0be7c22ed83b 10Gi RWO Delete Bound bdwebterm/pvc-kd-nbwhn-0 default 31h\nmapr-pv-dbf96aed-dafd-47b7-87d4-7d343f182d8b 20Gi RWO Delete Bound default/mysql-pv-claim default 69s\nmapr-pv-e3c1db71-2865-425c-971e-c01466e9d295 20Gi RWO Delete Bound default/wp-pv-claim default 69s\nmapr-pv-ed5f1be3-9be2-4470-83cf-67f9b31e9dbf 10Gi RWO Delete Bound bdwebterm/pvc-kd-dl2\n")])])]),t("ul",[t("li",[e._v("Label the WordPress service so that the front-end NodePort service will be exposed via the HPE Container Platform Gateway host. This step is not necessary if the service was created in the namespace of a tenant that has the Map Services to Gateway option enabled.")])]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" kubectl get services\n")])])]),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[e._v("NAME TYPE CLUSTER-IP EXTERNAL-IP PORT"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("S"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" AGE\nkubernetes ClusterIP "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("10.96")]),e._v(".0.1 "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("none"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("443")]),e._v("/TCP 26h\nwordpress NodePort "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("10.96")]),e._v(".98.248 "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("none"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("80")]),e._v(":30996/TCP 24s\nwordpress-mysql ClusterIP None "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("none"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("3306")]),e._v("/TCP 24s\n")])])]),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" kubectl label svc wordpress hpecp.hpe.com/hpecp-internal-gateway"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("true\n")])])]),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[e._v("service/wordpress labeled\n")])])]),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" kubectl describe "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("service")]),e._v(" wordpress\n")])])]),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[e._v("Name: wordpress\nNamespace: default\nLabels: "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("app")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("wordpress\nhpecp.hpe.com/hpecp-internal-gateway"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("true\nAnnotations: hpecp-internal-gateway/80: mip.storage.enterprise.net:10006\nSelector: "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("app")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("wordpress,tier"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("frontend\nType: NodePort\nIP: "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("10.96")]),e._v(".98.248\nPort: "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("unset"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("80")]),e._v("/TCP\nTargetPort: "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("80")]),e._v("/TCP\nNodePort: "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("unset"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("30996")]),e._v("/TCP\nEndpoints: "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("10.244")]),e._v(".2.9:80\nSession Affinity: None\nExternal Traffic Policy: Cluster\nEvents:\nType Reason Age From Message\n---- ------ ---- ---- -------\nNormal Service 26s kubedirector Created HPECP K8S "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("service")]),e._v("\n")])])]),t("ul",[t("li",[e._v("Copy the IP address and port number (see highlighted text above) to your browser. You should see set-up page similar to the following screenshot:")])]),e._v(" "),t("p",[t("img",{attrs:{src:s(369),alt:""}})]),e._v(" "),t("p",[e._v("Figure 58: Wordpress Application")]),e._v(" "),t("p",[e._v("Destroy the application deployments (e.g. pods) and restart the deployments, making sure to preserve the WordPress application information and still preserved.")]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" kubectl delete deployment wordpress\n")])])]),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[e._v("deployment.extensions “wordpress” deleted\n")])])]),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" kubectl delete deployment wordpress-mysql\n")])])]),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[e._v("deployment.extensions “wordpress-mysql” deleted\n")])])]),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" kubectl get pods\n")])])]),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[e._v("No resources found.\n")])])]),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" kubectl get deployments\n")])])]),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[e._v("No resources found.\n")])])]),t("p",[e._v("The service is gone, as expected.")]),e._v(" "),t("p",[t("img",{attrs:{src:s(370),alt:""}})]),e._v(" "),t("p",[e._v("Reapply the same deployment, and reconnect to persistent storage.")]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" kubectl apply "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-k")]),e._v(" ./\n")])])]),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[e._v("secret/mysql-pass-9tt65k5fgm unchanged\nservice/wordpress-mysql unchanged\nservice/wordpress unchanged\ndeployment.apps/wordpress-mysql created\ndeployment.apps/wordpress created\npersistentvolumeclaim/mysql-pv-claim unchanged\npersistentvolumeclaim/wp-pv-claim unchanged\n")])])]),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" kubectl get pods\n")])])]),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[e._v("NAME READY STATUS RESTARTS AGE\nwordpress-594759d7f6-jdnvp "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("1")]),e._v("/1 Running "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),e._v(" 27s\nwordpress-mysql-847b7b996d-dwf6s "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("1")]),e._v("/1 Running "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),e._v(" 28s\n")])])]),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" kubectl describe "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("service")]),e._v(" wordpress\n")])])]),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[e._v("Name: wordpress\nNamespace: default\nLabels: "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("app")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("wordpress\nHpecp.hpe.com/hpecp-internal-gateway"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("true\nAnnotations: hpecp-internal-gateway/80: mip.storage.enterprise.net:10006\nSelector: "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("app")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("wordpress,tier"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("frontend\nType: NodePort\nIP: "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("10.96")]),e._v(".35.129\nPort: "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("unset"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("80")]),e._v("/TCP\nTargetPort: "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("80")]),e._v("/TCP\nNodePort: "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("unset"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("31589")]),e._v("/TCP\nEndpoints: "),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("10.244")]),e._v(".1.18:80\nSession Affinity: None\nExternal Traffic Policy: Cluster\nEvents:\nType Reason Age From Message\n---- ------ ---- ---- -------\nNormal Service 12m kubedirector Created HPECP K8S "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("service")]),e._v("\n")])])]),t("p",[e._v("The WordPress service is restored.")]),e._v(" "),t("ul",[t("li",[e._v("Finally, you will need to delete the entire deployment in order to free up all of the resources, including the persistent storage.")])]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" kubectl delete "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-k")]),e._v(" ./\n")])])]),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[e._v("secret “mysql-pass-9tt65k5fgm” deleted\n"),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("service")]),e._v(" “wordpress-mysql” deleted\n"),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("service")]),e._v(" “wordpress” deleted\ndeployment.apps “wordpress-mysql” deleted\ndeployment.apps “wordpress” deleted\npersistentvolumeclaim “mysql-pv-claim” deleted\npersistentvolumeclaim “wp-pv-claim” deleted\n")])])]),t("h2",{attrs:{id:"appendix"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#appendix"}},[e._v("#")]),e._v(" Appendix")]),e._v(" "),t("h3",{attrs:{id:"simulating-an-air-gap-environment"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#simulating-an-air-gap-environment"}},[e._v("#")]),e._v(" Simulating an air gap environment")]),e._v(" "),t("ol",[t("li",[e._v("Update a dummy gateway IP address in either of the following files")])]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("vi")]),e._v(" /etc/sysconfig/network/ifcfg-eth0\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("vi")]),e._v(" /etc/sysconfig/network/ifroute-eth0\n")])])]),t("ol",{attrs:{start:"2"}},[t("li",[e._v("Restart the network")])]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" systemctl restart network\n")])])]),t("ol",{attrs:{start:"3"}},[t("li",[e._v("Validate if the server is disconnected to internet or not")])]),e._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("curl")]),e._v(" api.ipify.org\n")])])]),t("p",[e._v("This command provides the external facing IP address of the server in the event server is connected to the internet")]),e._v(" "),t("h3",{attrs:{id:"suse-rmt-server"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#suse-rmt-server"}},[e._v("#")]),e._v(" SUSE RMT server")]),e._v(" "),t("p",[e._v("This section provides a detailed list of SUSE RPMs required for bringing up the HPERE setup on SUSE Linux SP3 in an airgap environment.")]),e._v(" "),t("h3",{attrs:{id:"suse-products-and-extensions-overview"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#suse-products-and-extensions-overview"}},[e._v("#")]),e._v(" SUSE products and extensions overview")]),e._v(" "),t("table",[t("thead",[t("tr",[t("th",[e._v("ID")]),e._v(" "),t("th",[e._v("Product")]),e._v(" "),t("th",[e._v("Mandatory")]),e._v(" "),t("th",[e._v("Mirror ?")])])]),e._v(" "),t("tbody",[t("tr",[t("td",[e._v("4450")]),e._v(" "),t("td",[e._v("SLE-15-SP3-Desktop-NVIDIA-Driver for")]),e._v(" "),t("td",[e._v("Mandatory")]),e._v(" "),t("td",[e._v("Mirror")])]),e._v(" "),t("tr",[t("td",[e._v("4001")]),e._v(" "),t("td",[e._v("SLE-Module-Basesystem15-SP3-Pool for sle-15-x86_64")]),e._v(" "),t("td",[e._v("Mandatory")]),e._v(" "),t("td",[e._v("Mirror")])]),e._v(" "),t("tr",[t("td",[e._v("3999")]),e._v(" "),t("td",[e._v("SLE-Module-Basesystem15-SP3-Updates for sle-15-x86_64")]),e._v(" "),t("td",[e._v("Mandatory")]),e._v(" "),t("td",[e._v("Mirror")])]),e._v(" "),t("tr",[t("td",[e._v("4098")]),e._v(" "),t("td",[e._v("SLE-Module-Containers15-SP3-Pool for sle-15-x86_64")]),e._v(" "),t("td",[e._v("Mandatory")]),e._v(" "),t("td",[e._v("Mirror")])]),e._v(" "),t("tr",[t("td",[e._v("4096")]),e._v(" "),t("td",[e._v("SLE-Module-Containers15-SP3-Updates for sle-15-x86_64")]),e._v(" "),t("td",[e._v("Mandatory")]),e._v(" "),t("td",[e._v("Mirror")])]),e._v(" "),t("tr",[t("td",[e._v("4118")]),e._v(" "),t("td",[e._v("SLE-Module-Desktop-Applications15-SP3-Pool for sle-15-x86_64")]),e._v(" "),t("td",[e._v("Mandatory")]),e._v(" "),t("td",[e._v("Mirror")])]),e._v(" "),t("tr",[t("td",[e._v("4116")]),e._v(" "),t("td",[e._v("SLE-Module-Desktop-Applications15-SP3-Updates for sle-15-x86_64")]),e._v(" "),t("td",[e._v("Mandatory")]),e._v(" "),t("td",[e._v("Mirror")])]),e._v(" "),t("tr",[t("td",[e._v("4138")]),e._v(" "),t("td",[e._v("SLE-Module-DevTools15-SP3-Pool for sle-15-x86_64")]),e._v(" "),t("td",[e._v("Mandatory")]),e._v(" "),t("td",[e._v("Mirror")])]),e._v(" "),t("tr",[t("td",[e._v("4136")]),e._v(" "),t("td",[e._v("SLE-Module-DevTools15-SP3-Updates for sle-15-x86_64")]),e._v(" "),t("td",[e._v("Mandatory")]),e._v(" "),t("td",[e._v("Mirror")])]),e._v(" "),t("tr",[t("td",[e._v("4173")]),e._v(" "),t("td",[e._v("SLE-Module-HPC15-SP3-Pool for sle-15-x86_64")]),e._v(" "),t("td",[e._v("Mandatory")]),e._v(" "),t("td",[e._v("Mirror")])]),e._v(" "),t("tr",[t("td",[e._v("4171")]),e._v(" "),t("td",[e._v("SLE-Module-HPC15-SP3-Updates for sle-15-x86_64")]),e._v(" "),t("td",[e._v("Mandatory")]),e._v(" "),t("td",[e._v("Mirror")])]),e._v(" "),t("tr",[t("td",[e._v("4193")]),e._v(" "),t("td",[e._v("SLE-Module-Legacy15-SP3-Pool for sle-15-x86_64")]),e._v(" "),t("td",[e._v("Mandatory")]),e._v(" "),t("td",[e._v("Mirror")])]),e._v(" "),t("tr",[t("td",[e._v("4191")]),e._v(" "),t("td",[e._v("SLE-Module-Legacy15-SP3-Updates for sle-15-x86_64")]),e._v(" "),t("td",[e._v("Mandatory")]),e._v(" "),t("td",[e._v("Mirror")])]),e._v(" "),t("tr",[t("td",[e._v("4033")]),e._v(" "),t("td",[e._v("SLE-Module-Packagehub-Subpackages15-SP3-Pool for sle-15-x86_64")]),e._v(" "),t("td",[e._v("Mandatory")]),e._v(" "),t("td",[e._v("Mirror")])]),e._v(" "),t("tr",[t("td",[e._v("4030")]),e._v(" "),t("td",[e._v("SLE-Module-Packagehub-Subpackages15-SP3-Updates for sle-15-x86_64")]),e._v(" "),t("td",[e._v("Mandatory")]),e._v(" "),t("td",[e._v("Mirror")])]),e._v(" "),t("tr",[t("td",[e._v("4223")]),e._v(" "),t("td",[e._v("SLE-Module-Public-Cloud15-SP3-Pool for sle-15-x86_64")]),e._v(" "),t("td",[e._v("Mandatory")]),e._v(" "),t("td",[e._v("Mirror")])]),e._v(" "),t("tr",[t("td",[e._v("4221")]),e._v(" "),t("td",[e._v("SLE-Module-Public-Cloud15-SP3-Updates for sle-15-x86_64")]),e._v(" "),t("td",[e._v("Mandatory")]),e._v(" "),t("td",[e._v("Mirror")])]),e._v(" "),t("tr",[t("td",[e._v("4243")]),e._v(" "),t("td",[e._v("SLE-Module-Python2-15-SP3-Pool for sle-15-x86_64")]),e._v(" "),t("td",[e._v("Mandatory")]),e._v(" "),t("td",[e._v("Mirror")])]),e._v(" "),t("tr",[t("td",[e._v("4241")]),e._v(" "),t("td",[e._v("SLE-Module-Python2-15-SP3-Updates for sle-15-x86_64")]),e._v(" "),t("td",[e._v("Mandatory")]),e._v(" "),t("td",[e._v("Mirror")])]),e._v(" "),t("tr",[t("td",[e._v("4058")]),e._v(" "),t("td",[e._v("SLE-Module-Server-Applications15-SP3-Pool for sle-15-x86_64")]),e._v(" "),t("td",[e._v("Mandatory")]),e._v(" "),t("td",[e._v("Mirror")])]),e._v(" "),t("tr",[t("td",[e._v("4056")]),e._v(" "),t("td",[e._v("SLE-Module-Server-Applications15-SP3-Updates for sle-15-x86_64")]),e._v(" "),t("td",[e._v("Mandatory")]),e._v(" "),t("td",[e._v("Mirror")])]),e._v(" "),t("tr",[t("td",[e._v("4163")]),e._v(" "),t("td",[e._v("SLE-Module-Web-Scripting15-SP3-Pool for sle-15-x86_64")]),e._v(" "),t("td",[e._v("Mandatory")]),e._v(" "),t("td",[e._v("Mirror")])]),e._v(" "),t("tr",[t("td",[e._v("4161")]),e._v(" "),t("td",[e._v("SLE-Module-Web-Scripting15-SP3-Updates for sle-15-x86_64")]),e._v(" "),t("td",[e._v("Mandatory")]),e._v(" "),t("td",[e._v("Mirror")])]),e._v(" "),t("tr",[t("td",[e._v("4078")]),e._v(" "),t("td",[e._v("SLE-Product-HA15-SP3-Pool for sle-15-x86_64")]),e._v(" "),t("td",[e._v("Mandatory")]),e._v(" "),t("td",[e._v("Mirror")])]),e._v(" "),t("tr",[t("td",[e._v("4076")]),e._v(" "),t("td",[e._v("SLE-Product-HA15-SP3-Updates for sle-15-x86_64")]),e._v(" "),t("td",[e._v("Mandatory")]),e._v(" "),t("td",[e._v("Mirror")])]),e._v(" "),t("tr",[t("td",[e._v("3934")]),e._v(" "),t("td",[e._v("SLE-Product-HPC-15-SP3-Pool for sle-15-x86_64")]),e._v(" "),t("td",[e._v("Mandatory")]),e._v(" "),t("td",[e._v("Mirror")])]),e._v(" "),t("tr",[t("td",[e._v("3932")]),e._v(" "),t("td",[e._v("SLE-Product-HPC-15-SP3-Updates for sle-15-x86_64")]),e._v(" "),t("td",[e._v("Mandatory")]),e._v(" "),t("td",[e._v("Mirror")])]),e._v(" "),t("tr",[t("td",[e._v("3939")]),e._v(" "),t("td",[e._v("SLE-Product-SLED15-SP3-Pool for sle-15-x86_64")]),e._v(" "),t("td",[e._v("Mandatory")]),e._v(" "),t("td",[e._v("Mirror")])]),e._v(" "),t("tr",[t("td",[e._v("3937")]),e._v(" "),t("td",[e._v("SLE-Product-SLED15-SP3-Updates for sle-15-x86_64")]),e._v(" "),t("td",[e._v("Mandatory")]),e._v(" "),t("td",[e._v("Mirror")])]),e._v(" "),t("tr",[t("td",[e._v("3963")]),e._v(" "),t("td",[e._v("SLE-Product-SLES15-SP3-Pool for sle-15-x86_64")]),e._v(" "),t("td",[e._v("Mandatory")]),e._v(" "),t("td",[e._v("Mirror")])]),e._v(" "),t("tr",[t("td",[e._v("3960")]),e._v(" "),t("td",[e._v("SLE-Product-SLES15-SP3-Updates for sle-15-x86_64")]),e._v(" "),t("td",[e._v("Mandatory")]),e._v(" "),t("td",[e._v("Mirror")])]),e._v(" "),t("tr",[t("td",[e._v("4278")]),e._v(" "),t("td",[e._v("SLE-Product-WE15-SP3-Pool for sle-15-x86_64")]),e._v(" "),t("td",[e._v("Mandatory")]),e._v(" "),t("td",[e._v("Mirror")])]),e._v(" "),t("tr",[t("td",[e._v("4276")]),e._v(" "),t("td",[e._v("SLE-Product-WE15-SP3-Updates for sle-15-x86_64")]),e._v(" "),t("td",[e._v("Mandatory")]),e._v(" "),t("td",[e._v("Mirror")])]),e._v(" "),t("tr",[t("td",[e._v("3962")]),e._v(" "),t("td",[e._v("SLE15-SP3-Installer-Updates for sle-15-x86_64")]),e._v(" "),t("td",[e._v("Mandatory")]),e._v(" "),t("td",[e._v("Mirror")])]),e._v(" "),t("tr",[t("td",[e._v("4923")]),e._v(" "),t("td",[e._v("SUSE-CAASP-4.5-Pool for sle-15-x86_64")]),e._v(" "),t("td",[e._v("Mandatory")]),e._v(" "),t("td",[e._v("Mirror")])]),e._v(" "),t("tr",[t("td",[e._v("4921")]),e._v(" "),t("td",[e._v("SUSE-CAASP-4.5-Updates for sle-15-x86_64")]),e._v(" "),t("td",[e._v("Mandatory")]),e._v(" "),t("td",[e._v("Mirror")])]),e._v(" "),t("tr",[t("td",[e._v("4028")]),e._v(" "),t("td",[e._v("SUSE-PackageHub-15-SP3-Backports-Pool for sle-15-x86_64")]),e._v(" "),t("td",[e._v("Mandatory")]),e._v(" "),t("td",[e._v("Mirror")])]),e._v(" "),t("tr",[t("td",[e._v("4032")]),e._v(" "),t("td",[e._v("SUSE-PackageHub-15-SP3-Pool for sle-15-x86_64")]),e._v(" "),t("td",[e._v("Mandatory")]),e._v(" "),t("td",[e._v("Mirror")])])])])])}),[],!1,null,null,null);t.default=r.exports}}]);