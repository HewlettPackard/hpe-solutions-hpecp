<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Integrating External Ezmeral DataFabric with Ezmeral Runtime Enterprise 5.6.0 | HPE EZMERAL RUNTIME ENTERPRISE 5.6 ON DL USING REST API BASED DEPLOYMENT</title>
    <meta name="generator" content="VuePress 1.9.9">
    
    <meta name="description" content="Hewlett Packard Enterprise">
    
    <link rel="preload" href="/hpe-solutions-hpecp/5.6-DL/assets/css/0.styles.061d7421.css" as="style"><link rel="preload" href="/hpe-solutions-hpecp/5.6-DL/assets/js/app.8923c765.js" as="script"><link rel="preload" href="/hpe-solutions-hpecp/5.6-DL/assets/js/2.146d8cdc.js" as="script"><link rel="preload" href="/hpe-solutions-hpecp/5.6-DL/assets/js/8.1cec6e18.js" as="script"><link rel="prefetch" href="/hpe-solutions-hpecp/5.6-DL/assets/js/10.8f4901f7.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.6-DL/assets/js/11.816cd34f.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.6-DL/assets/js/12.64277655.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.6-DL/assets/js/13.31a3a1dc.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.6-DL/assets/js/14.caee3b2c.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.6-DL/assets/js/15.8425e92f.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.6-DL/assets/js/16.4ecadfb0.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.6-DL/assets/js/17.18e9b30a.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.6-DL/assets/js/18.fd0ff370.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.6-DL/assets/js/19.0cb7945e.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.6-DL/assets/js/20.93d2674b.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.6-DL/assets/js/21.d38656a1.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.6-DL/assets/js/22.f0b611af.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.6-DL/assets/js/23.e16c103f.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.6-DL/assets/js/24.3c2d4007.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.6-DL/assets/js/25.07d276ca.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.6-DL/assets/js/26.9e3b5bd7.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.6-DL/assets/js/27.9ba2b8a5.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.6-DL/assets/js/3.83402623.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.6-DL/assets/js/4.bd6a5c4e.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.6-DL/assets/js/5.b9790a40.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.6-DL/assets/js/6.fc86fae7.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.6-DL/assets/js/7.5094cb73.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.6-DL/assets/js/9.fd047300.js">
    <link rel="stylesheet" href="/hpe-solutions-hpecp/5.6-DL/assets/css/0.styles.061d7421.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/hpe-solutions-hpecp/5.6-DL/" class="home-link router-link-active"><!----> <span class="site-name">HPE EZMERAL RUNTIME ENTERPRISE 5.6 ON DL USING REST API BASED DEPLOYMENT</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/hpe-solutions-hpecp/5.6-DL/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="http://www.hpe.com/info/ra" target="_blank" rel="noopener noreferrer" class="nav-link external">
  RA Library
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/hpe-solutions-hpecp/5.6-DL/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="http://www.hpe.com/info/ra" target="_blank" rel="noopener noreferrer" class="nav-link external">
  RA Library
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>HPE EZMERAL RUNTIME ENTERPRISE 5.6 ON DL USING REST API BASED DEPLOYMENT</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Solution Overview</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Solution Components</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Solution Deployment</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Additional Features and Functionality</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/hpe-solutions-hpecp/5.6-DL/Additional-Features-and-Functionality/Lite-Touch-Installation.html" class="sidebar-link">Lite Touch Installation (LTI)</a></li><li><a href="/hpe-solutions-hpecp/5.6-DL/Additional-Features-and-Functionality/Create-Datafabric-Cluster-ERE.html" aria-current="page" class="active sidebar-link">Integrating External Ezmeral DataFabric with Ezmeral Runtime Enterprise 5.6.0</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/hpe-solutions-hpecp/5.6-DL/Additional-Features-and-Functionality/Deploy-Stateful-application-Kubedirector.html" class="sidebar-link">Deploying stateful application using KubeDirector</a></li><li><a href="/hpe-solutions-hpecp/5.6-DL/Additional-Features-and-Functionality/Role-Based-Access-Control.html" class="sidebar-link">HPE Ezmeral Runtime Enterprise – Role Based Access Control</a></li><li><a href="/hpe-solutions-hpecp/5.6-DL/Additional-Features-and-Functionality/Physical-Worker-Node-labelling-ERE.html" class="sidebar-link">Physical Worker Node Labeling in HPE Ezmeral Runtime Enterprise</a></li><li><a href="/hpe-solutions-hpecp/5.6-DL/Additional-Features-and-Functionality/Istio-Kiali-ERE.html" class="sidebar-link">Istio with Kiali dashboard deployment on HPERE</a></li><li><a href="/hpe-solutions-hpecp/5.6-DL/Additional-Features-and-Functionality/Install-and-Configure-Velero.html" class="sidebar-link">Install and Configure Velero</a></li><li><a href="/hpe-solutions-hpecp/5.6-DL/Additional-Features-and-Functionality/Expand-and-Shrink-Cluster.html" class="sidebar-link">Expand and Shrink Cluster</a></li><li><a href="/hpe-solutions-hpecp/5.6-DL/Additional-Features-and-Functionality/External-Load-Balancing-using-NGINX.html" class="sidebar-link">External Load Balancing using NGINX</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Resources and additional links</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="integrating-external-ezmeral-datafabric-with-ezmeral-runtime-enterprise-5-6-0"><a href="#integrating-external-ezmeral-datafabric-with-ezmeral-runtime-enterprise-5-6-0" class="header-anchor">#</a> Integrating External Ezmeral DataFabric with Ezmeral Runtime Enterprise 5.6.0</h1> <p>HPE EXternal Ezmeral data fabric deployed on 5x HPE ProLiant DL385 Gen11 Servers. The HPE Ezmeral Runtime Enterprise out of the box supports the installation and configuration of the persistent data fabric for AI and analytics and K8s workload. This persistent volume is provided by HPE Ezmeral DataFabric which is a distributed file and object store that manages both structured and unstructured data. It is designed to store data at an Exabyte scale, support trillions of files, and combine analytics and operations into a single platform. It supports industry-standard protocols and APIs, including POSIX, NFS, S3, and HDFS.</p> <h3 id="external-data-fabric-installation-and-configuration"><a href="#external-data-fabric-installation-and-configuration" class="header-anchor">#</a> External Data Fabric installation and configuration</h3> <p><strong>1, Host Configuration</strong></p> <p>we need to follow all the steps at this location <strong>Installing Core and Ecosystem Components (hpe.com)</strong> post OS installation. OS installation can be done using the same steps used in os installation section.</p> <div class="custom-block tip"><p class="custom-block-title">Pre-requisites</p> <p>OS installation automation can be done by following below link  “<a href="/hpe-solutions-hpecp/5.6-DL/Solution-Deployment/Operating-system-deployment.html#installation">Deploying operating system on bare-metal nodes</a>”
or
Perform steps below manually which are pre-requisites</p> <ul><li>Set the hostnames</li> <li>Set the DNS</li> <li>Set the resolv.conf</li> <li>Set the etc hosts</li> <li>Set the time sync across nodes</li> <li>Check the raw disk, should not have any partitions</li> <li>Set the password less ssh (ssh-keygen, ssh-copy-id -i ~/.ssh/id_rsa.pub remote-host)</li> <li>Apply packages</li> <li>Regiter servers using the valid suse subscription<div class="language-bash extra-class"><pre class="language-bash"><code>SUSEConnect <span class="token parameter variable">-r</span> ******** <span class="token parameter variable">-e</span> example@xyz.com <span class="token comment">#Base June 2022</span>
SUSEConnect <span class="token parameter variable">-p</span> sle-module-basesystem/15.3/x86_64
SUSEConnect <span class="token parameter variable">-p</span> sle-module-containers/15.3/x86_64
SUSEConnect <span class="token parameter variable">-p</span> PackageHub/15.3/x86_64
SUSEConnect <span class="token parameter variable">-p</span> sle-module-legacy/15.3/x86_64
SUSEConnect <span class="token parameter variable">-p</span> sle-module-python2/15.3/x86_64
SUSEConnect <span class="token parameter variable">-p</span> sle-module-public-cloud/15.3/x86_64
SUSEConnect <span class="token parameter variable">-p</span> sle-module-desktop-applications/15.3/x86_64
SUSEConnect <span class="token parameter variable">-p</span> sle-module-desktop-applications/15.3/x86_64
SUSEConnect <span class="token parameter variable">-p</span> sle-module-python2/15.3/x86_64
SUSEConnect <span class="token parameter variable">-p</span> sle-module-development-tools/15.3/x86_64
</code></pre></div></li></ul></div> <ul><li>Install Java 11 zypper install java-11-openjdk-11.0.9.0-3.48.1</li> <li>easy_install pip</li> <li>Install python zypper in python-2.7.18</li> <li>zypper in java-11-openjdk-devel</li> <li>zypper install -y python3-devel python3-setuptools</li> <li>Disable firewall and apparmor
<ul><li>systemctl stop apparmor</li> <li>systemctl stop firewalld</li></ul></li> <li>Create a user named mapr on all the nodes
<ul><li>groupadd -g 5000 mapr</li> <li>useradd mapr -u 5000 -g 5000 -m -s /bin/bash</li> <li>usermod -aG wheel mapr</li> <li>passwd mapr</li> <li>visudo and comment the below line
<ul><li>Defaults targetpw # ask for the password of the target user i.e. root</li></ul></li></ul></li></ul> <div class="custom-block tip"><p class="custom-block-title">Note</p> <p>The password should be same on all the nodes as later it will be used for EDF installation by mapr-installer-cli</p></div> <h3 id="preparing-installer-node-for-mapr-installation"><a href="#preparing-installer-node-for-mapr-installation" class="header-anchor">#</a> <strong>Preparing installer node for mapr installation</strong></h3> <p>Follow the steps mentioned in <a href="https://docs.datafabric.hpe.com/70/MapRInstaller.html" target="_blank" rel="noopener noreferrer">https://docs.datafabric.hpe.com/70/MapRInstaller.html<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <ul><li><p>Download the installer bits on to installer server (<a href="https://mapr.com/download/" target="_blank" rel="noopener noreferrer">https://mapr.com/download/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>) and run the file</p> <p>Or</p> <p>wget <a href="https://package.mapr.hpe.com/releases/installer/mapr-setup.sh" target="_blank" rel="noopener noreferrer">https://package.mapr.hpe.com/releases/installer/mapr-setup.sh<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> -P /tmp</p></li> <li><p>chmod +x /tmp/mapr-setup.sh</p></li> <li><p>./mapr-setup.sh -y
You will receive the url (<a href="https://abc.domainname:9443" target="_blank" rel="noopener noreferrer">https://abc.domainname:9443<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>) to access mapr installer UI. To login use <strong>Username mapr and password</strong> mapr configured previously.</p></li> <li><p>Perform the following steps to change the location of the temporary directory used by Java processes using java.io.tmpdir variable:</p></li> <li><p>Create a custom tmp directory for mapr and set its permission similar to /tmp.</p></li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&gt;</span> <span class="token function">mkdir</span> /opt/mapr/tmp
<span class="token operator">&gt;</span> <span class="token function">chmod</span> <span class="token number">777</span> /opt/mapr/tmp
</code></pre></div><ul><li>Set the custom tmp directory as java.io.tmpdir</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&gt;</span> <span class="token builtin class-name">export</span> <span class="token assign-left variable">JDK_JAVA_OPTIONS</span><span class="token operator">=</span><span class="token string">&quot;-Djava.io.tmpdir=/opt/mapr/tmp&quot;</span>
</code></pre></div><ul><li><strong>Start the Installer</strong>. Open the Installer URL:</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code>https://<span class="token operator">&lt;</span>Installer Node hostname/IPaddress<span class="token operator">&gt;</span>:9443
</code></pre></div><ul><li><p>You are prompted to log in as the cluster administrator user that you configured while running the mapr-setup.sh script.
Credentials: mapr/mapr</p> <p><img src="/hpe-solutions-hpecp/5.6-DL/assets/img/figure61.5a7cc6b9.png" alt=""></p> <p><strong>Figure 61.</strong> Sign in Dashboard</p> <p><img src="/hpe-solutions-hpecp/5.6-DL/assets/img/figure62.ee4cc2f9.png" alt=""></p> <p><strong>Figure 62.</strong> Dashboard page</p></li> <li><p>Check the mapr &amp; MEP version.
<img src="/hpe-solutions-hpecp/5.6-DL/assets/img/figure63.d1175dc0.png" alt=""></p> <p><strong>Figure 63.</strong> Mapr &amp; MEP Version information</p></li> <li><p>MapR Control System (MCS): Click on cldb node list to login MCS, below is the cldb node list.
<img src="/hpe-solutions-hpecp/5.6-DL/assets/img/figure64.c84aff27.png" alt=""></p> <p><strong>Figure 64.</strong> Nodes information</p></li> <li><p>Services:</p> <p><img src="/hpe-solutions-hpecp/5.6-DL/assets/img/figure65.506f1db1.png" alt=""></p> <p><strong>Figure 65.</strong> Services information</p></li> <li><p>Adding license is mandatory for date fabric services to functional.</p></li> <li><p>Click on get free trail license and proceed with providing login HPE account credentials and Cluster ID. Then download the license and upload it here.
<img src="/hpe-solutions-hpecp/5.6-DL/assets/img/figure66.bec53249.png" alt=""></p> <p><strong>Figure 66.</strong> License information</p></li></ul> <h3 id="ezmeral-external-data-fabric-integration-with-hpe-ezmeral-runtime-enterprise-5-6"><a href="#ezmeral-external-data-fabric-integration-with-hpe-ezmeral-runtime-enterprise-5-6" class="header-anchor">#</a> Ezmeral External Data Fabric Integration with HPE Ezmeral Runtime Enterprise 5.6</h3> <div class="custom-block tip"><p class="custom-block-title">Pre-requisites</p> <div class="language- extra-class"><pre><code>::: tip NOTE
Please read the complete procedure before you start this registration process.
</code></pre></div><ul><li><p>The HPE Ezmeral Runtime Enterprise deployment must not have configured tenant storage.</p></li> <li><p>When deploying the Data Fabric on Bare Metal cluster:</p> <ul><li><p>Keep the UID for the mapr user at the default of 5000.</p></li> <li><p>Keep the GID for the mapr group at the default of 5000.</p></li></ul></li> <li><p>The Data Fabric (DF) cluster on Bare Metal must be a SECURE cluster.</p></li> <li><p>From HPE Ezmeral Runtime Enterprise 5.6 Primary controller</p> <ul><li>Verify the directory /opt/bluedata/tmp/ext-bm-mapr exist. If not create a directory.</li></ul></li></ul></div> <h4 id="procedure"><a href="#procedure" class="header-anchor">#</a> Procedure</h4> <p>After Data Fabric registration is completed, the configuration will look as follows:</p> <p><img src="/hpe-solutions-hpecp/5.6-DL/assets/img/figure67.0bb65cc9.png" alt=""></p> <p><strong>Figure 67.</strong> Data fabric</p> <p><strong>Registration Steps:</strong></p> <ul><li>Log in as mapr user, to a CLDB node of an HPE Ezmeral Data Fabric on Bare Metal cluster, and:</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&gt;</span> <span class="token function">mkdir</span> <span class="token operator">&lt;</span>working-dir-on-bm-df<span class="token operator">&gt;</span>
</code></pre></div><ul><li>On the Primary Controller of HPE Ezmeral Runtime Enterprise installation, do the following:</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&gt;</span> <span class="token function">scp</span> /opt/bluedata/common-install/scripts/mapr/gen-external-secrets.sh mapr@<span class="token operator">&lt;</span>cldb_node_ip_address<span class="token operator">&gt;</span>:<span class="token operator">&lt;</span>working-dir-on-bm-df<span class="token operator">&gt;</span>/
</code></pre></div><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&gt;</span> <span class="token function">scp</span> /opt/bluedata/common-install/scripts/mapr/prepare-bm-tenants.sh <span class="token operator">&gt;</span> mapr@<span class="token operator">&lt;</span>cldb_node_ip_address<span class="token operator">&gt;</span>:<span class="token operator">&lt;</span>working-dir-on-bm-df<span class="token operator">&gt;</span>/
</code></pre></div><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&gt;</span> <span class="token function">mkdir</span> /opt/bluedata/tmp/ext-bm-mapr/
</code></pre></div><ul><li>Create a user-defined manifest for the procedure:
<ul><li>If you are not specifying any keys (i.e. to generate default values for all keys):</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&gt;</span> <span class="token function">touch</span> /opt/bluedata/tmp/ext-bm-mapr/ext-dftenant-manifest.user-defined
</code></pre></div><ul><li>Else, specify the following parameters:</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&gt;</span> <span class="token function">cat</span> <span class="token operator">&lt;&lt;</span> <span class="token string">EOF<span class="token bash punctuation"> <span class="token operator">&gt;</span> /opt/bluedata/tmp/ext-bm-mapr/ext-dftenant-manifest.user-defined </span>
EXT_MAPR_MOUNT_DIR=&quot;/&lt;user_specified_directory_in_mount_path_for_volumes&gt;&quot;
TENANT_VOLUME_NAME_TAG=&quot;&lt;user_defined_tag_to_be_included_in_tenant_volume_names&gt;&quot;
EOF</span>
</code></pre></div></li> <li>On the CLDB node of the HPE Ezmeral Data Fabric on BareMetal cluster:</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&gt;</span> <span class="token builtin class-name">cd</span> <span class="token operator">&lt;</span>working-path-on-bm-df<span class="token operator">&gt;</span>/
<span class="token operator">&gt;</span> ./prepare-bm-tenants.sh
</code></pre></div><ul><li><p>On the Primary Controller of HPE Ezmeral Runtime Enterprise:</p> <ul><li>Move or remove any existing “bm-info-*.tar” from /opt/bluedata/tmp/ext-bm-mapr/</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&gt;</span> <span class="token function">scp</span> bm-info-*.tar root@<span class="token operator">&lt;</span>**controller_node_ip_address**<span class="token operator">&gt;</span>/opt/bluedata/tmp/ext-bm-mapr/
<span class="token operator">&gt;</span> <span class="token builtin class-name">cd</span> /opt/bluedata/tmp/ext-bm-mapr/
<span class="token operator">&gt;</span> <span class="token assign-left variable">LOG_FILE_PATH</span><span class="token operator">=</span>./<span class="token operator">&lt;</span>**log_file_name**<span class="token operator">&gt;</span>/opt/bluedata/bundles/hpe-cp-*/startscript.sh <span class="token parameter variable">--action</span> ext-bm-df-registration
</code></pre></div></li> <li><p>When prompted, enter the Platform Administrator username and password. HPE Ezmeral Runtime Enterprise uses this information for REST API access to its management module.</p></li></ul> <div class="custom-block tip"><p class="custom-block-title">NOTE</p> <p>The ext-bm-df-registration action validates the contents of bm-info-&lt;8_byte_uuid&gt;.tar, and finalizes the ext-dftenant-manifest. The following keys-values will be automatically added to the manifest:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token assign-left variable">CLDB_LIST</span><span class="token operator">=</span><span class="token string">&quot;&lt;comma-separated;FQDN_or_IP_address_for_each_CLDB_node&gt;&quot;</span>
<span class="token assign-left variable">CLDB_PORT</span><span class="token operator">=</span><span class="token string">&quot;&lt;port_number_for_CLDB_service&gt;&quot;</span>
<span class="token assign-left variable">SECURE</span><span class="token operator">=</span><span class="token string">&quot;&lt;true_or_false&gt;&quot;</span> <span class="token punctuation">(</span>Default is <span class="token boolean">true</span><span class="token punctuation">)</span>
<span class="token assign-left variable">CLUSTER_NAME</span><span class="token operator">=</span><span class="token string">&quot;&lt;name_of_DataFabric_cluster&gt;&quot;</span>
<span class="token assign-left variable">REST_URL</span><span class="token operator">=</span><span class="token string">&quot;&lt;REST_server_hostname:port&gt;&quot;</span> <span class="token punctuation">(</span>or space-delimited list of <span class="token operator">&lt;</span>REST_server_hostname:port<span class="token operator">&gt;</span> values<span class="token punctuation">)</span>
<span class="token assign-left variable">TICKET_FILE_LOCATION</span><span class="token operator">=</span><span class="token string">&quot;&lt;path_to_service_ticket_for_HCP_admin&gt;&quot;</span>
<span class="token assign-left variable">SSL_TRUSTSTORE_LOCATION</span><span class="token operator">=</span><span class="token string">&quot;&lt;path_to_ssl_truststore&gt;&quot;</span>
<span class="token assign-left variable">EXT_SECRETS_FILE_LOCATION</span><span class="token operator">=</span><span class="token string">&quot;&lt;path_to_external_secrets_file&gt;&quot;</span>
</code></pre></div></div> <h3 id="validation"><a href="#validation" class="header-anchor">#</a> <strong>Validation:</strong></h3> <p>To confirm that the Registration is completed, check the following:</p> <ul><li>On the HPE Ezmeral Runtime Enterprise, view the Kubernetes and EPIC Dashboards, and ensure that the POSIX Client and Mount Path services on all hosts are in normal state.</li></ul> <h3 id="reference-links"><a href="#reference-links" class="header-anchor">#</a> Reference Links</h3> <ul><li><p>Below is the reference for Integration Reference
<a href="https://docs.containerplatform.hpe.com/56/reference/hpe-ezmeral-data-fabric-admini/registering_baremetal_storage_5.4.3_and_higher_multiple_instance.html" target="_blank" rel="noopener noreferrer">HPE Ezmeral Runtime Enterprise 5.6 Documentation | HPE Support<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p>Below is the reference link for EDF cluster creation
<a href="https://docs.datafabric.hpe.com/70/AdvancedInstallation/c_install_prerequisites.html" target="_blank" rel="noopener noreferrer">Installer Prerequisites and Guidelines (hpe.com)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/hpe-solutions-hpecp/5.6-DL/Additional-Features-and-Functionality/Lite-Touch-Installation.html" class="prev">
        Lite Touch Installation (LTI)
      </a></span> <span class="next"><a href="/hpe-solutions-hpecp/5.6-DL/Additional-Features-and-Functionality/Deploy-Stateful-application-Kubedirector.html">
        Deploying stateful application using KubeDirector
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/hpe-solutions-hpecp/5.6-DL/assets/js/app.8923c765.js" defer></script><script src="/hpe-solutions-hpecp/5.6-DL/assets/js/2.146d8cdc.js" defer></script><script src="/hpe-solutions-hpecp/5.6-DL/assets/js/8.1cec6e18.js" defer></script>
  </body>
</html>
