(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{391:function(s,t,a){"use strict";a.r(t);var e=a(42),r=Object(e.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"deploying-wordpress-application-using-nimble-persistent-volume"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#deploying-wordpress-application-using-nimble-persistent-volume"}},[s._v("#")]),s._v(" Deploying WordPress application using Nimble persistent volume")]),s._v(" "),a("p",[s._v("Create the required PVC for the deployment.")]),s._v(" "),a("blockquote",[a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" kubectl create --f mariadb-pvc.yaml wordpress-pvc.yaml\n")])])])]),s._v(" "),a("p",[s._v("Sample pvc files are as follows.")]),s._v(" "),a("blockquote",[a("div",{staticClass:"language-yaml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" PersistentVolumeClaim\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiVersion")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" v1\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("my"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("wordpress"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("mariadb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("spec")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("accessModes")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" ReadWriteOnce\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("resources")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("requests")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("storage")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 50Gi\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("storageClassName")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" hpe"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("standard\n")])])])]),s._v(" "),a("p",[s._v("PVC for the Wordpress application.")]),s._v(" "),a("blockquote",[a("div",{staticClass:"language-yaml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiVersion")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" v1\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" PersistentVolumeClaim\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" my"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("wordpress\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("spec")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("accessModes")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" ReadWriteOnce\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("resources")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("requests")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("storage")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 20Gi\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("storageClassName")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" hpe"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("standard\n")])])])]),s._v(" "),a("p",[s._v("Use Helm to deploy WordPress using the PVC created previously. When WordPress is deployed, the volume will be attached, formatted, and mounted.")]),s._v(" "),a("ol",[a("li",[s._v("Add the WordPress chart.")])]),s._v(" "),a("blockquote",[a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" helm repo "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" bitnami https://charts.bitnami.com/bitnami\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" helm repo update\n")])])])]),s._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[s._v("Deploy WordPress by setting persistence.existingClaim=<existing_PVC> to the PVC  "),a("strong",[s._v("my-wordpress")]),s._v(" created in the previous step.")])]),s._v(" "),a("blockquote",[a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" helm "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" my-wordpress bitnami/wordpress --version "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9.2")]),s._v(".1 --set service.type"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ClusterIP,wordpressUsername"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("admin,wordpressPassword"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("adminpassword,mariadb.mariadbRootPassword"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("secretpassword,persistence.existingClaim"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("my-wordpress,allowEmptyPassword"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("kubectl get pods\nNAME READY STATUS RESTARTS AGE\nmy-wordpress-69b7976c85-9mfjv "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1 Running "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" 2m\nmy-wordpress-mariadb-0 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1 Running "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" 2m\n\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" kubectl describe svc wordpress\nName: wordpress\nNamespace: default\nLabels: "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("app")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("wordpress\nhpecp.hpe.com/hpecp-internal-gateway"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true\nAnnotations: hpecp-internal-gateway/80: hcpgw1.twentynet.local:10003\nSelector: "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("app")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("wordpress,tier"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("frontend\nType: NodePort\nIP: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.96")]),s._v(".129.177\nPort: "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("unset"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("/TCP\nTargetPort: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("/TCP\nNodePort: "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("unset"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("31535")]),s._v("/TCP\nEndpoints: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.192")]),s._v(".0.164:80\nSession Affinity: None\nExternal Traffic Policy: Cluster\nEvents: "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])])])]),s._v(" "),a("p",[s._v("Open a browser on your workstation to hcpgw1.twentynet.local:10003 and you should see, "),a("strong",[s._v('"Hello World!"')]),s._v(".")])])}),[],!1,null,null,null);t.default=r.exports}}]);