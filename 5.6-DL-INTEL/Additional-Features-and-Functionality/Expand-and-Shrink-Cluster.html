<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Expand and Shrink Cluster | HPE EZMERAL RUNTIME ENTERPRISE 5.6 ON DL INTEL USING REST API BASED DEPLOYMENT</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="Hewlett Packard Enterprise">
    
    <link rel="preload" href="/hpe-solutions-hpecp/5.6-DL-INTEL/assets/css/0.styles.b0221bd9.css" as="style"><link rel="preload" href="/hpe-solutions-hpecp/5.6-DL-INTEL/assets/js/app.88771529.js" as="script"><link rel="preload" href="/hpe-solutions-hpecp/5.6-DL-INTEL/assets/js/2.853dd763.js" as="script"><link rel="preload" href="/hpe-solutions-hpecp/5.6-DL-INTEL/assets/js/18.58e97f4a.js" as="script"><link rel="prefetch" href="/hpe-solutions-hpecp/5.6-DL-INTEL/assets/js/10.7aace867.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.6-DL-INTEL/assets/js/11.5a195989.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.6-DL-INTEL/assets/js/12.a5be33a3.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.6-DL-INTEL/assets/js/13.653f635f.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.6-DL-INTEL/assets/js/14.02620a5c.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.6-DL-INTEL/assets/js/15.4a1d2d93.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.6-DL-INTEL/assets/js/16.f4dace30.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.6-DL-INTEL/assets/js/17.04626699.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.6-DL-INTEL/assets/js/19.e6ea9433.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.6-DL-INTEL/assets/js/20.9c87b202.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.6-DL-INTEL/assets/js/21.3f95e64b.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.6-DL-INTEL/assets/js/22.358761d3.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.6-DL-INTEL/assets/js/23.8ee2dd72.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.6-DL-INTEL/assets/js/24.2c2d52c6.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.6-DL-INTEL/assets/js/25.873483a4.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.6-DL-INTEL/assets/js/26.ad306399.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.6-DL-INTEL/assets/js/27.5c9057ea.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.6-DL-INTEL/assets/js/28.23e7b66a.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.6-DL-INTEL/assets/js/29.87df6791.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.6-DL-INTEL/assets/js/3.70f4c69e.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.6-DL-INTEL/assets/js/4.24726c73.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.6-DL-INTEL/assets/js/5.1a9a87ed.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.6-DL-INTEL/assets/js/6.a190ca0e.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.6-DL-INTEL/assets/js/7.8b95968d.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.6-DL-INTEL/assets/js/8.829ca227.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.6-DL-INTEL/assets/js/9.ae080779.js">
    <link rel="stylesheet" href="/hpe-solutions-hpecp/5.6-DL-INTEL/assets/css/0.styles.b0221bd9.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/hpe-solutions-hpecp/5.6-DL-INTEL/" class="home-link router-link-active"><!----> <span class="site-name">HPE EZMERAL RUNTIME ENTERPRISE 5.6 ON DL INTEL USING REST API BASED DEPLOYMENT</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/hpe-solutions-hpecp/5.6-DL-INTEL/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="http://www.hpe.com/info/ra" target="_blank" rel="noopener noreferrer" class="nav-link external">
  RA Library
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/hpe-solutions-hpecp/5.6-DL-INTEL/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="http://www.hpe.com/info/ra" target="_blank" rel="noopener noreferrer" class="nav-link external">
  RA Library
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>HPE EZMERAL RUNTIME ENTERPRISE 5.6 ON DL INTEL USING REST API BASED DEPLOYMENT</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Solution Overview</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Solution Components</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Solution Deployment</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Additional Features and Functionality</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/hpe-solutions-hpecp/5.6-DL-INTEL/Additional-Features-and-Functionality/Lite-Touch-Installation.html" class="sidebar-link">Lite Touch Installation (LTI)</a></li><li><a href="/hpe-solutions-hpecp/5.6-DL-INTEL/Additional-Features-and-Functionality/Create-Datafabric-Cluster-ERE.html" class="sidebar-link">Integrating External Ezmeral DataFabric with Ezmeral Runtime Enterprise 5.6.x</a></li><li><a href="/hpe-solutions-hpecp/5.6-DL-INTEL/Additional-Features-and-Functionality/Deploy-Stateful-application-Kubedirector.html" class="sidebar-link">Deploying stateful application using KubeDirector</a></li><li><a href="/hpe-solutions-hpecp/5.6-DL-INTEL/Additional-Features-and-Functionality/Role-Based-Access-Control.html" class="sidebar-link">HPE Ezmeral Runtime Enterprise – Role Based Access Control</a></li><li><a href="/hpe-solutions-hpecp/5.6-DL-INTEL/Additional-Features-and-Functionality/Physical-Worker-Node-labelling-ERE.html" class="sidebar-link">Physical Worker Node Labeling in HPE Ezmeral Runtime Enterprise</a></li><li><a href="/hpe-solutions-hpecp/5.6-DL-INTEL/Additional-Features-and-Functionality/Istio-Kiali-ERE.html" class="sidebar-link">Istio with Kiali dashboard deployment on HPERE</a></li><li><a href="/hpe-solutions-hpecp/5.6-DL-INTEL/Additional-Features-and-Functionality/Install-and-Configure-Velero.html" class="sidebar-link">Install and Configure Velero</a></li><li><a href="/hpe-solutions-hpecp/5.6-DL-INTEL/Additional-Features-and-Functionality/Expand-and-Shrink-Cluster.html" aria-current="page" class="active sidebar-link">Expand and Shrink Cluster</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/hpe-solutions-hpecp/5.6-DL-INTEL/Additional-Features-and-Functionality/External-Load-Balancing-using-NGINX.html" class="sidebar-link">External Load Balancing using NGINX</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Resources and additional links</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="expand-and-shrink-cluster"><a href="#expand-and-shrink-cluster" class="header-anchor">#</a> Expand and Shrink Cluster</h1> <p>Expanding a Kubernetes cluster adds more resources and High Availability to your cluster for example expanding from 1 K8s master host to 3 k8s masters hosts adds High Availability protection to the Kubernetes cluster. Shrinking a Kubernetes cluster is also preferred when an existing cluster resource are needed for use elsewhere to manage effective usage of on-demand resources.</p> <p>In HPE Ezmeral Runtime Enterprise 5.6.x you expand and shrink your Internal Kubernetes Clusters and not the imported clusters that are managed by the platform. In the RA we an automated approach to expand or shrink your exiting Kubernetes cluster. The high-level flow of the automated process is as follows:</p> <p>Below Figure shows the high-level flow of the Cluster Modification Functionality.</p> <p><img src="/hpe-solutions-hpecp/5.6-DL-INTEL/assets/img/figure125.0ff7e5a0.png" alt=""></p> <h3 id="pre-requisites"><a href="#pre-requisites" class="header-anchor">#</a> Pre-Requisites</h3> <ol><li><p>Refer to Installer Machine section to set up the required python and ansible environment.</p></li> <li><p>Python module 'requests'.</p></li> <li><p>The hosts to be added or removed from the cluster must be in the available list of HOSTS.</p></li> <li><p>An existing compute clusters.</p></li></ol> <h3 id="procedure"><a href="#procedure" class="header-anchor">#</a> Procedure</h3> <ul><li>Enter the console username and password in the <em>config_secrets.json</em> file</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&gt;</span> ansible-vault edit config_secrets.json
</code></pre></div><ul><li>Enter the config details in the <em>user_input.json</em> file</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&gt;</span> <span class="token function">vi</span> user_input.json
</code></pre></div><ul><li>Run the python script <em>expand_shrink.py</em></li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&gt;</span> python expand_shrink.py
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/hpe-solutions-hpecp/5.6-DL-INTEL/Additional-Features-and-Functionality/Install-and-Configure-Velero.html" class="prev">
        Install and Configure Velero
      </a></span> <span class="next"><a href="/hpe-solutions-hpecp/5.6-DL-INTEL/Additional-Features-and-Functionality/External-Load-Balancing-using-NGINX.html">
        External Load Balancing using NGINX
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/hpe-solutions-hpecp/5.6-DL-INTEL/assets/js/app.88771529.js" defer></script><script src="/hpe-solutions-hpecp/5.6-DL-INTEL/assets/js/2.853dd763.js" defer></script><script src="/hpe-solutions-hpecp/5.6-DL-INTEL/assets/js/18.58e97f4a.js" defer></script>
  </body>
</html>
