<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Preparing SLES 15 hosts for HPECP installation | HPE EZMERAL CONTAINER PLATFORM 5.2 AND HPE EZMERAL DATA FABRIC ON HPE DL SERVERS</title>
    <meta name="generator" content="VuePress 1.7.1">
    
    <meta name="description" content="Hewlett Packard Enterprise">
    
    <link rel="preload" href="/hpe-solutions-hpecp/5.2-DL/assets/css/0.styles.e9880461.css" as="style"><link rel="preload" href="/hpe-solutions-hpecp/5.2-DL/assets/js/app.dd6b52cc.js" as="script"><link rel="preload" href="/hpe-solutions-hpecp/5.2-DL/assets/js/2.b184eb69.js" as="script"><link rel="preload" href="/hpe-solutions-hpecp/5.2-DL/assets/js/32.e13ba8e9.js" as="script"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-DL/assets/js/10.6b38407a.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-DL/assets/js/11.8c5bbc2b.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-DL/assets/js/12.c7e4c0bf.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-DL/assets/js/13.d2a69700.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-DL/assets/js/14.baa7caa6.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-DL/assets/js/15.b0aef8fd.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-DL/assets/js/16.aedb41e9.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-DL/assets/js/17.1d494768.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-DL/assets/js/18.fb95fb61.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-DL/assets/js/19.cba6e74c.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-DL/assets/js/20.df48fb3a.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-DL/assets/js/21.75b7039d.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-DL/assets/js/22.eecc5564.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-DL/assets/js/23.1ecffb4a.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-DL/assets/js/24.f883ddc0.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-DL/assets/js/25.109ad33a.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-DL/assets/js/26.ff745f72.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-DL/assets/js/27.fce55436.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-DL/assets/js/28.16bcd6c4.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-DL/assets/js/29.4070eefd.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-DL/assets/js/3.ff6b14f5.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-DL/assets/js/30.71926e53.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-DL/assets/js/31.f537a6dc.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-DL/assets/js/4.131e772a.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-DL/assets/js/5.8d190c43.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-DL/assets/js/6.bb4245c0.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-DL/assets/js/7.fa8cb543.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-DL/assets/js/8.8a3b4bb7.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-DL/assets/js/9.5c3a8c9f.js">
    <link rel="stylesheet" href="/hpe-solutions-hpecp/5.2-DL/assets/css/0.styles.e9880461.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/hpe-solutions-hpecp/5.2-DL/" class="home-link router-link-active"><!----> <span class="site-name">HPE EZMERAL CONTAINER PLATFORM 5.2 AND HPE EZMERAL DATA FABRIC ON HPE DL SERVERS</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/hpe-solutions-hpecp/5.2-DL/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="http://www.hpe.com/info/ra" target="_blank" rel="noopener noreferrer" class="nav-link external">
  RA Library
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/hpe-solutions-hpecp/5.2-DL/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="http://www.hpe.com/info/ra" target="_blank" rel="noopener noreferrer" class="nav-link external">
  RA Library
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>HPE Ezmeral Container Platform 5.2 on HPE DL Servers</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Solution Overview</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Solution Components</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Solution Deployment</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/hpe-solutions-hpecp/5.2-DL/Solution-Deployment/Solution-Deployment-Flow.html" class="sidebar-link">Solution Deployment Flow</a></li><li><a href="/hpe-solutions-hpecp/5.2-DL/Solution-Deployment/Host-Configuration.html" class="sidebar-link">Host configuration</a></li><li><a href="/hpe-solutions-hpecp/5.2-DL/Solution-Deployment/Deploying-OS-On-Bare-Metal-Nodes.html" class="sidebar-link">Deploying operating system on bare-metal nodes</a></li><li><a href="/hpe-solutions-hpecp/5.2-DL/Solution-Deployment/Preparing-SLES-15-Hosts-For-HPECP-Installation.html" aria-current="page" class="active sidebar-link">Preparing SLES 15 hosts for HPECP installation</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/hpe-solutions-hpecp/5.2-DL/Solution-Deployment/Preparing-SLES-15-Hosts-For-HPECP-Installation.html#input-files" class="sidebar-link">Input Files</a></li><li class="sidebar-sub-header"><a href="/hpe-solutions-hpecp/5.2-DL/Solution-Deployment/Preparing-SLES-15-Hosts-For-HPECP-Installation.html#installation-process" class="sidebar-link">Installation Process</a></li></ul></li><li><a href="/hpe-solutions-hpecp/5.2-DL/Solution-Deployment/Automated-HPECP-Deployment.html" class="sidebar-link">Automated HPE Ezmeral Container Platform deployment</a></li><li><a href="/hpe-solutions-hpecp/5.2-DL/Solution-Deployment/Manually-Install-And-Configure-HPECP.html" class="sidebar-link">Manually Install and configure HPE Ezmeral Container Platform 5.2</a></li><li><a href="/hpe-solutions-hpecp/5.2-DL/Solution-Deployment/HPECP-Airgap-Installation.html" class="sidebar-link">HPECP Airgap Installation</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Additional Features and Functionality</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Resosurces and Additional Links</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="preparing-sles-15-hosts-for-hpecp-installation"><a href="#preparing-sles-15-hosts-for-hpecp-installation" class="header-anchor">#</a> Preparing SLES 15 hosts for HPECP installation</h1> <div class="custom-block warning"><p class="custom-block-title">PREREQUISITES</p> <p>Centos 7 or RHEL 7 Installer machine with the following configurations is
essential.</p> <ol><li><p>Enable Python3 and Ansible Environment as mentioned in <a href="/hpe-solutions-hpecp/5.2-DL/Solution-Deployment/host-configuration.html#installer-machine">Installer machine</a> section of deployment guide.</p></li> <li><p>Password less SSH is configured to target hosts from the installer
machine. Steps for configuring password less SSH is as follows:</p> <ul><li>Execute the following command on installer machine to generate a new
SSH key pair.</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&gt;</span> ssh-keygen
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">NOTE</p> <p>To generate a SSH key pair of specific algorithm or specific key size as
per user requirements, use the following command.</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&gt;</span> ssh-keygen -t <span class="token operator">&lt;</span>algorithm<span class="token operator">&gt;</span> -b <span class="token operator">&lt;</span>keysize<span class="token operator">&gt;</span>
</code></pre></div></div></li></ol></div> <h2 id="input-files"><a href="#input-files" class="header-anchor">#</a> Input Files</h2> <ul><li><p>Update reg_detail.yaml file with required details.</p></li> <li><p>Open reg_detail.yaml present in &quot;$BASE_DIR/prepare_hpecp_hosts&quot;
folder with the following command and Enter the details listed below.</p></li> <li><p>Command to edit reg_details.yaml</p></li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&gt;</span> ansible-vault edit reg_details.yaml
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">NOTE</p> <p>Default password for Ansible Vault file reg_details.yaml is &quot;changeme&quot;.</p></div> <ul><li><p>Mode: There are two modes of registering the server to registration
server, RMT and User Email. Permissible values are 1 (For registering
the SUSE server to RMT) and 2 (For registering the SUSE server using
Email)</p></li> <li><p>Mode 1: Registration using RMT server.</p> <ul><li><p>Update the reg_details.yaml with the following inputs</p> <ol><li>RMT_URL: RMT server ip address.</li></ol></li></ul></li> <li><p>Mode 2: Registration using User Email Id and RegCode</p> <ul><li><p>Update the reg_details.yaml with the following inputs</p> <ol><li><p>email: User Email-id which will be used for server registration.</p></li> <li><p>base_code:- Registration code which will be used for server
registration.</p></li> <li><p>caas_code:- Registration code for caas module.</p></li> <li><p>ha_code:- Registration code for ha module.</p></li></ol></li></ul></li></ul> <div class="custom-block tip"><p class="custom-block-title">NOTE</p> <ol><li><p>Email and Reg_codes are applicable only for Mode 2 else leave blank.</p></li> <li><p>sles_packages: sles modules which will be installed separated by
comma.</p></li> <li><p>Zypper_packages: zypper packages which will be installed separated
by comma.</p></li></ol></div> <ul><li>Example values for the reg_details.yaml are as follows.</li></ul> <div class="language-yaml extra-class"><pre class="language-yaml"><code>
<span class="token punctuation">---</span>

<span class="token comment">#Mode 1 for RMT Registration and Mode 2 for User Registration</span>

<span class="token key atrule">Mode</span><span class="token punctuation">:</span> <span class="token number">2</span>

<span class="token key atrule">Email</span><span class="token punctuation">:</span> jim. <span class="token important">***@***.com</span>

<span class="token key atrule">base_code</span><span class="token punctuation">:</span> 8BAB9EC<span class="token important">****</span>

<span class="token key atrule">caas_code</span><span class="token punctuation">:</span> 21E02<span class="token important">******</span>

<span class="token key atrule">ha_code</span><span class="token punctuation">:</span> 87D73<span class="token important">*****</span>

<span class="token key atrule">RMT_URL</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//20.<span class="token important">**.**.**</span>

<span class="token key atrule">sles_packages</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>sle<span class="token punctuation">-</span>module<span class="token punctuation">-</span>public<span class="token punctuation">-</span>cloud/15.2/x86_64<span class="token punctuation">,</span>
sle<span class="token punctuation">-</span>module<span class="token punctuation">-</span>legacy/15.2/x86_64<span class="token punctuation">,</span> sle<span class="token punctuation">-</span>module<span class="token punctuation">-</span>python2/15.2/x86_64<span class="token punctuation">,</span>
sle<span class="token punctuation">-</span>module<span class="token punctuation">-</span>containers/15.2/x86_64<span class="token punctuation">,</span> sle<span class="token punctuation">-</span>module<span class="token punctuation">-</span>basesystem/15.2/x86_64<span class="token punctuation">,</span>
sle<span class="token punctuation">-</span>module<span class="token punctuation">-</span>desktop<span class="token punctuation">-</span>applications/15.2/x86_64<span class="token punctuation">]</span>

<span class="token key atrule">zypper_packages</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>iputils<span class="token punctuation">,</span> bind<span class="token punctuation">-</span>utils<span class="token punctuation">,</span> autofs<span class="token punctuation">,</span> libcgroup1<span class="token punctuation">,</span>
kernel<span class="token punctuation">-</span>default<span class="token punctuation">-</span>devel<span class="token punctuation">,</span>gcc<span class="token punctuation">-</span>c++<span class="token punctuation">,</span>perl<span class="token punctuation">,</span>pciutils<span class="token punctuation">,</span>rsyslog<span class="token punctuation">,</span>firewalld<span class="token punctuation">]</span>

</code></pre></div><div class="custom-block tip"><p class="custom-block-title">NOTE</p> <p>Don't modify the sles_packages and zypper_pacakges as these
packages are required for HPECP implementation changes made to this
section may impact the installation.</p></div> <h2 id="installation-process"><a href="#installation-process" class="header-anchor">#</a> Installation Process</h2> <ol><li><p>Enable Python3 and Ansible Environment as mentioned in &quot;Installer
machine&quot; section of deployment guide.</p></li> <li><p>Change the current working directory to &quot;prepare_hpecp_hosts&quot;
using the following command</p></li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&gt;</span> <span class="token builtin class-name">cd</span> <span class="token variable">$BASE_DIR</span>/prepare_hpecp_hosts
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">NOTE</p> <p>$BASE_DIR is defined and set in <a href="/hpe-solutions-hpecp/5.2-DL/solution-deployment/host-configuration.html#installer-machine">Installer machine</a> section in
deployment guide.</p></div> <ol start="3"><li>Execute the copy.sh script to copy the ssh keys to the SLES hosts.</li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&gt;</span> <span class="token function">sh</span> copy.sh
</code></pre></div><p>User needs to enter the SLES hosts password at the prompt.</p> <div class="custom-block tip"><p class="custom-block-title">NOTE</p> <p>By default, the forks parameter in Ansible is limited to 5. Update
the Ansible configuration to increase the value to number of hosts that
are getting configured using this playbook by executing the following
command.</p> <div class="language- extra-class"><pre class="language-text"><code>&gt; export ANSIBLE_FORKS=&lt;number_of_hosts_present_in_the_ansible_inventory_file&gt;
</code></pre></div></div> <ol start="4"><li>Execute the playbook using the following command.</li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&gt;</span> ansible-playbook -i inventory prepare_host.yml --ask-vault-pass
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">NOTE</p> <p>During the playbook execution, while installing the packageHub
Module it might throw an error in the first attempt. This is a known
issue from SUSE and is being taken care by re-installing the module.</p> <p>Link for reference <a href="https://www.suse.com/support/kb/doc/?id=000019505" target="_blank" rel="noopener noreferrer">https://www.suse.com/support/kb/doc/?id=000019505<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <ul><li><p>In case the script fails while checking the internet connection from
the hosts, kindly cross verify the internet from the hosts and then
re-run the script.</p></li> <li><p>While checking the appromor service the error is expected as it
verifies the appromor service status on the hosts and if it running, it
will stop and disable the same.</p></li></ul></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/hpe-solutions-hpecp/5.2-DL/Solution-Deployment/Deploying-OS-On-Bare-Metal-Nodes.html" class="prev">
        Deploying operating system on bare-metal nodes
      </a></span> <span class="next"><a href="/hpe-solutions-hpecp/5.2-DL/Solution-Deployment/Automated-HPECP-Deployment.html">
        Automated HPE Ezmeral Container Platform deployment
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/hpe-solutions-hpecp/5.2-DL/assets/js/app.dd6b52cc.js" defer></script><script src="/hpe-solutions-hpecp/5.2-DL/assets/js/2.b184eb69.js" defer></script><script src="/hpe-solutions-hpecp/5.2-DL/assets/js/32.e13ba8e9.js" defer></script>
  </body>
</html>
