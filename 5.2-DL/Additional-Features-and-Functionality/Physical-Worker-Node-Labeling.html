<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Physical Worker Node Labeling in HPE Ezmeral Container Platform | HPE EZMERAL CONTAINER PLATFORM 5.2 AND HPE EZMERAL DATA FABRIC ON HPE DL SERVERS</title>
    <meta name="generator" content="VuePress 1.7.1">
    
    <meta name="description" content="Hewlett Packard Enterprise">
    
    <link rel="preload" href="/hpe-solutions-hpecp/5.2-DL/assets/css/0.styles.e9880461.css" as="style"><link rel="preload" href="/hpe-solutions-hpecp/5.2-DL/assets/js/app.dd6b52cc.js" as="script"><link rel="preload" href="/hpe-solutions-hpecp/5.2-DL/assets/js/2.b184eb69.js" as="script"><link rel="preload" href="/hpe-solutions-hpecp/5.2-DL/assets/js/22.eecc5564.js" as="script"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-DL/assets/js/10.6b38407a.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-DL/assets/js/11.8c5bbc2b.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-DL/assets/js/12.c7e4c0bf.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-DL/assets/js/13.d2a69700.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-DL/assets/js/14.baa7caa6.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-DL/assets/js/15.b0aef8fd.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-DL/assets/js/16.aedb41e9.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-DL/assets/js/17.1d494768.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-DL/assets/js/18.fb95fb61.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-DL/assets/js/19.cba6e74c.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-DL/assets/js/20.df48fb3a.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-DL/assets/js/21.75b7039d.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-DL/assets/js/23.1ecffb4a.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-DL/assets/js/24.f883ddc0.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-DL/assets/js/25.109ad33a.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-DL/assets/js/26.ff745f72.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-DL/assets/js/27.fce55436.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-DL/assets/js/28.16bcd6c4.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-DL/assets/js/29.4070eefd.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-DL/assets/js/3.ff6b14f5.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-DL/assets/js/30.71926e53.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-DL/assets/js/31.f537a6dc.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-DL/assets/js/32.e13ba8e9.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-DL/assets/js/4.131e772a.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-DL/assets/js/5.8d190c43.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-DL/assets/js/6.bb4245c0.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-DL/assets/js/7.fa8cb543.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-DL/assets/js/8.8a3b4bb7.js"><link rel="prefetch" href="/hpe-solutions-hpecp/5.2-DL/assets/js/9.5c3a8c9f.js">
    <link rel="stylesheet" href="/hpe-solutions-hpecp/5.2-DL/assets/css/0.styles.e9880461.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/hpe-solutions-hpecp/5.2-DL/" class="home-link router-link-active"><!----> <span class="site-name">HPE EZMERAL CONTAINER PLATFORM 5.2 AND HPE EZMERAL DATA FABRIC ON HPE DL SERVERS</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/hpe-solutions-hpecp/5.2-DL/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="http://www.hpe.com/info/ra" target="_blank" rel="noopener noreferrer" class="nav-link external">
  RA Library
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/hpe-solutions-hpecp/5.2-DL/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="http://www.hpe.com/info/ra" target="_blank" rel="noopener noreferrer" class="nav-link external">
  RA Library
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>HPE Ezmeral Container Platform 5.2 on HPE DL Servers</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Solution Overview</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Solution Components</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Solution Deployment</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Additional Features and Functionality</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/hpe-solutions-hpecp/5.2-DL/Additional-Features-and-Functionality/Lite-Touch-Installation.html" class="sidebar-link">Lite Touch Installation (LTI)</a></li><li><a href="/hpe-solutions-hpecp/5.2-DL/Additional-Features-and-Functionality/Deploying-HPE-CSI-Driver-for-Nimble-Storage.html" class="sidebar-link">Deploying HPE CSI Driver for Nimble Storage on HPECP Container Platform 5.2</a></li><li><a href="/hpe-solutions-hpecp/5.2-DL/Additional-Features-and-Functionality/Creating-Data-Fabric-Cluster-on-HPECP.html" class="sidebar-link">Creating Data Fabric Cluster on HPE Ezmeral Container Platform 5.2</a></li><li><a href="/hpe-solutions-hpecp/5.2-DL/Additional-Features-and-Functionality/Deploying-stateful-application-using-KubeDirector.html" class="sidebar-link">Deploying stateful Application using KubeDirector</a></li><li><a href="/hpe-solutions-hpecp/5.2-DL/Additional-Features-and-Functionality/Role-Based-Access-Control.html" class="sidebar-link">HPE Ezmeral Container Platform - Role Based Access Control</a></li><li><a href="/hpe-solutions-hpecp/5.2-DL/Additional-Features-and-Functionality/Physical-Worker-Node-Labeling.html" aria-current="page" class="active sidebar-link">Physical Worker Node Labeling in HPE Ezmeral Container Platform</a></li><li><a href="/hpe-solutions-hpecp/5.2-DL/Additional-Features-and-Functionality/Istio-with-Kiali-dashboard-deployment.html" class="sidebar-link">Istio with Kiali dashboard deployment on HPECP</a></li><li><a href="/hpe-solutions-hpecp/5.2-DL/Additional-Features-and-Functionality/Kasten-deployment-on-HPECP.html" class="sidebar-link">Kasten deployment on HPECP</a></li><li><a href="/hpe-solutions-hpecp/5.2-DL/Additional-Features-and-Functionality/Kibana-Setup-on-HPECP.html" class="sidebar-link">Kibana Setup on HPECP</a></li><li><a href="/hpe-solutions-hpecp/5.2-DL/Additional-Features-and-Functionality/Importing-plain-k8-cluster-into-HPECP-cluster.html" class="sidebar-link">Importing plain k8s cluster into HPECP cluster</a></li><li><a href="/hpe-solutions-hpecp/5.2-DL/Additional-Features-and-Functionality/Expand-and-Shrink-Cluster.html" class="sidebar-link">Expanding and Shrinking of a Compute Cluster</a></li><li><a href="/hpe-solutions-hpecp/5.2-DL/Additional-Features-and-Functionality/External-Load-Balancing-using-NGINX.html" class="sidebar-link">External Load Balancing using NGINX</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Resosurces and Additional Links</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="physical-worker-node-labeling-in-hpe-ezmeral-container-platform"><a href="#physical-worker-node-labeling-in-hpe-ezmeral-container-platform" class="header-anchor">#</a> Physical Worker Node Labeling in HPE Ezmeral Container Platform</h1> <p>Discovering the node properties and advertising them through node labels can be used to control workload placement in a Kubernetes cluster. With the HPE Ezmeral Container Platform running on HPE server platforms, organizations can automate the discovery of hardware properties and use that information to schedule workloads that benefit from the different capabilities that the underlying hardware provides.</p> <p>HPE Ezmeral Container Platform node labeling can be applied to group nodes based on the underlying features of the nodes. By default, every node will have its node name as a label. The following properties can be used to label nodes:</p> <ul><li><p>Overall health status of the node: If current status of &quot;BIOS, Fans, Temperature Sensors, Battery, Processor, Memory, Network, and Storage&quot; is ok, node health status is labeled as &quot;Ok&quot;. Otherwise, it will appear as &quot;Degraded&quot;.</p></li> <li><p>Overall security status of the node: If the current status of the following BIOS configuration items (which are important forsecurity) are as expected, then security status of the node is &quot;Ok&quot;. Otherwise, they will be labeled as &quot;Degraded&quot;.</p></li> <li><p>Custom Labeling: User defined labels (key, value) are assigned to desired physical worker nodes. Users can use these Python scripts to retrieve the properties of the underlying hardware and then decide on required labels that should be assigned to each physical worker nodes.</p></li></ul> <p>Node labeling can be broken down into 4 main phases:</p> <ul><li><p>Setting up of the installer VM environment</p></li> <li><p>Updating the input files with the server information</p></li> <li><p>Execution of the python scripts</p></li> <li><p>Verification of the pod scheduling</p></li></ul> <p>Below figure shows High Level steps of Node Labeling</p> <p><img src="/hpe-solutions-hpecp/5.2-DL/assets/img/AF-PL1.75bd8131.png" alt=""></p> <p><strong>Figure 70.</strong> High Level steps of Node Labeling</p> <p>Steps to perform Node Labeling:</p> <ol><li><p>Update the config.json and the hosts.json inventory file which will be used by the HPE Ezmeral Container Platform to reference the physical worker nodes.</p></li> <li><p>Set up utility libraries for interfacing and managing components of HPE ProLiant Servers.</p></li></ol> <ul><li><p>proliantutils==2.9.2</p></li> <li><p>sushy==3.0.0</p></li></ul> <ol start="3"><li>Execute the python3 script using the command</li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code>    <span class="token operator">&gt;</span> python physical_node_labelling.py
</code></pre></div><ol start="4"><li>Apply the health, security and custom labels to the nodes.</li></ol> <p>Verify Pod Scheduling using Node Selector:</p> <ol><li><p>View the labels of all the nodes</p></li> <li><p>Select a label you wish to deploy the workload on</p> <p>Eg. &quot;health=OK&quot;</p></li> <li><p>Deploy sample application with nodeSelector value &quot;health=OK&quot;</p></li> <li><p>Check if pod is deployed on the required node.</p></li></ol></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/hpe-solutions-hpecp/5.2-DL/Additional-Features-and-Functionality/Role-Based-Access-Control.html" class="prev">
        HPE Ezmeral Container Platform - Role Based Access Control
      </a></span> <span class="next"><a href="/hpe-solutions-hpecp/5.2-DL/Additional-Features-and-Functionality/Istio-with-Kiali-dashboard-deployment.html">
        Istio with Kiali dashboard deployment on HPECP
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/hpe-solutions-hpecp/5.2-DL/assets/js/app.dd6b52cc.js" defer></script><script src="/hpe-solutions-hpecp/5.2-DL/assets/js/2.b184eb69.js" defer></script><script src="/hpe-solutions-hpecp/5.2-DL/assets/js/22.eecc5564.js" defer></script>
  </body>
</html>
