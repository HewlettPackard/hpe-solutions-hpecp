<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Configuration | HPE Deployment Guide for HPE Ezmeral Container Platform on HPE Synergy </title>
    <meta name="description" content="">
    <meta name="generator" content="VuePress 1.4.0">
    
    
    <link rel="preload" href="/hpe-solutions-hpecp/assets/css/0.styles.174cdb16.css" as="style"><link rel="preload" href="/hpe-solutions-hpecp/assets/js/app.da8e75f2.js" as="script"><link rel="preload" href="/hpe-solutions-hpecp/assets/js/2.af88cad6.js" as="script"><link rel="preload" href="/hpe-solutions-hpecp/assets/js/15.1aec7f3c.js" as="script"><link rel="prefetch" href="/hpe-solutions-hpecp/assets/js/10.ed8d595c.js"><link rel="prefetch" href="/hpe-solutions-hpecp/assets/js/11.87136d49.js"><link rel="prefetch" href="/hpe-solutions-hpecp/assets/js/12.63b66f14.js"><link rel="prefetch" href="/hpe-solutions-hpecp/assets/js/13.077301ba.js"><link rel="prefetch" href="/hpe-solutions-hpecp/assets/js/14.fa0ee6fc.js"><link rel="prefetch" href="/hpe-solutions-hpecp/assets/js/16.8d3ec496.js"><link rel="prefetch" href="/hpe-solutions-hpecp/assets/js/17.9efce6e0.js"><link rel="prefetch" href="/hpe-solutions-hpecp/assets/js/18.dea77411.js"><link rel="prefetch" href="/hpe-solutions-hpecp/assets/js/19.dacf1900.js"><link rel="prefetch" href="/hpe-solutions-hpecp/assets/js/20.d3a51bed.js"><link rel="prefetch" href="/hpe-solutions-hpecp/assets/js/3.e3454261.js"><link rel="prefetch" href="/hpe-solutions-hpecp/assets/js/4.1d75cca5.js"><link rel="prefetch" href="/hpe-solutions-hpecp/assets/js/5.5aa796fc.js"><link rel="prefetch" href="/hpe-solutions-hpecp/assets/js/6.7cd37544.js"><link rel="prefetch" href="/hpe-solutions-hpecp/assets/js/7.d6beb650.js"><link rel="prefetch" href="/hpe-solutions-hpecp/assets/js/8.9b5f9eef.js"><link rel="prefetch" href="/hpe-solutions-hpecp/assets/js/9.924336ee.js">
    <link rel="stylesheet" href="/hpe-solutions-hpecp/assets/css/0.styles.174cdb16.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/hpe-solutions-hpecp/" class="home-link router-link-active"><!----> <span class="site-name">HPE Deployment Guide for HPE Ezmeral Container Platform on HPE Synergy </span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/hpe-solutions-hpecp/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="http://www.hpe.com/info/ra" target="_blank" rel="noopener noreferrer" class="nav-link external">
  RA Library
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/hpe-solutions-hpecp/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="http://www.hpe.com/info/ra" target="_blank" rel="noopener noreferrer" class="nav-link external">
  RA Library
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/hpe-solutions-hpecp/Introduction/Introduction.html" class="sidebar-link">Introduction</a></li><li><a href="/hpe-solutions-hpecp/Solution overview/Solution overview.html" class="sidebar-link">Solution overview</a></li><li><a href="/hpe-solutions-hpecp/Solution components/Solution components.html" class="sidebar-link">Solution components</a></li><li><a href="/hpe-solutions-hpecp/Physical environment configuration/Physical environment configuration.html" class="sidebar-link">Physical environment configuration</a></li><li><a href="/hpe-solutions-hpecp/Worker-node-configuration/Worker-node-configuration.html" class="sidebar-link">Worker node configuration</a></li><li><a href="/hpe-solutions-hpecp/Deploy HPE Ezmeral Container Platform/Deploy HPE Ezmeral Container Platform.html" class="sidebar-link">Deploy HPE Ezmeral Container Platform</a></li><li><a href="/hpe-solutions-hpecp/Deploying Kubernetes cluster/Deploying Kubernetes cluster.html" class="sidebar-link">Deploying Kubernetes cluster</a></li><li><a href="/hpe-solutions-hpecp/Securing HPE Ezmeral Container Platform using Sysdig Secure and Sysdig Monitor/Securing HPE Ezmeral Container Platform using Sysdig Secure and Sysdig Monitor.html" class="sidebar-link">Securing HPE Ezmeral Container Platform using Sysdig Secure and Sysdig Monitor</a></li><li><a href="/hpe-solutions-hpecp/Validate HPE Ezmeral Container Platform deployment/Validate HPE Ezmeral Container Platform deployment.html" class="sidebar-link">Validate HPE Ezmeral Container Platform deployment</a></li><li><a href="/hpe-solutions-hpecp/HPE CSI driver installation/HPE CSI driver installation.html" class="sidebar-link">HPE CSI driver installation</a></li><li><a href="/hpe-solutions-hpecp/Configuration/Configuration.html" class="active sidebar-link">Configuration</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/hpe-solutions-hpecp/Configuration/Configuration.html#create-a-secret" class="sidebar-link">Create a secret</a></li><li class="sidebar-sub-header"><a href="/hpe-solutions-hpecp/Configuration/Configuration.html#creating-a-storage-class" class="sidebar-link">Creating a Storage class</a></li><li class="sidebar-sub-header"><a href="/hpe-solutions-hpecp/Configuration/Configuration.html#creating-a-persistent-volume-claim" class="sidebar-link">Creating a Persistent Volume Claim</a></li></ul></li><li><a href="/hpe-solutions-hpecp/Deploying WordPress application using Nimble persistent volume/Deploying WordPress application using Nimble persistent volume.html" class="sidebar-link">Deploying WordPress application using Nimble persistent volume</a></li><li><a href="/hpe-solutions-hpecp/Resources and additional links/Resources and additional links.html" class="sidebar-link">Resources and additional links</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="configuration"><a href="#configuration" class="header-anchor">#</a> Configuration</h1> <h2 id="create-a-secret"><a href="#create-a-secret" class="header-anchor">#</a> Create a secret</h2> <p>Create a secret to store the Nimble access information.</p> <blockquote><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&gt;</span> kubectl create --f secret.yaml
</code></pre></div></blockquote> <p>A sample file is as follows.</p> <blockquote><div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Secret
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> nimble<span class="token punctuation">-</span>secret
  <span class="token key atrule">namespace</span><span class="token punctuation">:</span> kube<span class="token punctuation">-</span>system
<span class="token key atrule">stringData</span><span class="token punctuation">:</span>
  <span class="token key atrule">serviceName</span><span class="token punctuation">:</span> nimble<span class="token punctuation">-</span>csp<span class="token punctuation">-</span>svc
  <span class="token key atrule">servicePort</span><span class="token punctuation">:</span> <span class="token string">&quot;8080&quot;</span>
  <span class="token key atrule">backend</span><span class="token punctuation">:</span> 192.168.1.1
  <span class="token key atrule">username</span><span class="token punctuation">:</span> admin
<span class="token key atrule">data</span><span class="token punctuation">:</span>
  <span class="token comment"># echo -n admin | base64</span>
  <span class="token key atrule">password</span><span class="token punctuation">:</span> YWRtaW4=
</code></pre></div></blockquote> <h2 id="creating-a-storage-class"><a href="#creating-a-storage-class" class="header-anchor">#</a> Creating a Storage class</h2> <p>A  Storage class specifies the provisioner to use the HPE CSI Driver and the volume parameters (such as Protection Templates, Performance Policies, CPG, and so on) of the volume that we want to create and can be used to differentiate between storage levels and usage. This concept is sometimes called &quot;profiles&quot; in other storage systems. A cluster can have multiple StorageClasses allowing users to create storage claims tailored for their specific application requirements.Create a <strong>hpe-standard</strong> StorageClass based upon the CSP deployed.</p> <p>Create a storage class with following commands.</p> <blockquote><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&gt;</span> kubectl create --f hpe-standard-sc.yaml
</code></pre></div></blockquote> <p>A sample storage class with parameters is as follows.</p> <blockquote><div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> storage.k8s.io/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> StorageClass
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> hpe<span class="token punctuation">-</span>standard
  <span class="token key atrule">annotations</span><span class="token punctuation">:</span>
    <span class="token key atrule">storageclass.kubernetes.io/is-default-class</span><span class="token punctuation">:</span> <span class="token string">&quot;false&quot;</span>
<span class="token key atrule">provisioner</span><span class="token punctuation">:</span> csi.hpe.com
<span class="token key atrule">parameters</span><span class="token punctuation">:</span>
  <span class="token key atrule">csi.storage.k8s.io/fstype</span><span class="token punctuation">:</span> xfs
  <span class="token key atrule">csi.storage.k8s.io/provisioner-secret-name</span><span class="token punctuation">:</span> nimble<span class="token punctuation">-</span>secret
  <span class="token key atrule">csi.storage.k8s.io/provisioner-secret-namespace</span><span class="token punctuation">:</span> kube<span class="token punctuation">-</span>system
  <span class="token key atrule">csi.storage.k8s.io/controller-publish-secret-name</span><span class="token punctuation">:</span> nimble<span class="token punctuation">-</span>secret
  <span class="token key atrule">csi.storage.k8s.io/controller-publish-secret-namespace</span><span class="token punctuation">:</span> kube<span class="token punctuation">-</span>system
  <span class="token key atrule">csi.storage.k8s.io/node-stage-secret-name</span><span class="token punctuation">:</span> nimble<span class="token punctuation">-</span>secret
  <span class="token key atrule">csi.storage.k8s.io/node-stage-secret-namespace</span><span class="token punctuation">:</span> kube<span class="token punctuation">-</span>system
  <span class="token key atrule">csi.storage.k8s.io/node-publish-secret-name</span><span class="token punctuation">:</span> nimble<span class="token punctuation">-</span>secret
  <span class="token key atrule">csi.storage.k8s.io/node-publish-secret-namespace</span><span class="token punctuation">:</span> kube<span class="token punctuation">-</span>system
  <span class="token key atrule">csi.storage.k8s.io/controller-expand-secret-name</span><span class="token punctuation">:</span> nimble<span class="token punctuation">-</span>secret
  <span class="token key atrule">csi.storage.k8s.io/controller-expand-secret-namespace</span><span class="token punctuation">:</span> kube<span class="token punctuation">-</span>system
  <span class="token key atrule">performancePolicy</span><span class="token punctuation">:</span> <span class="token string">&quot;SQL Server&quot;</span>
  <span class="token key atrule">description</span><span class="token punctuation">:</span> <span class="token string">&quot;Volume from HPE CSI Driver&quot;</span>
  <span class="token key atrule">accessProtocol</span><span class="token punctuation">:</span> iscsi
  <span class="token key atrule">limitIops</span><span class="token punctuation">:</span> <span class="token number">76800</span>
  <span class="token key atrule">allowOverrides</span><span class="token punctuation">:</span> description<span class="token punctuation">,</span>limitIops<span class="token punctuation">,</span>performancePolicy
<span class="token key atrule">allowVolumeExpansion</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
</code></pre></div></blockquote> <div class="custom-block tip"><p class="custom-block-title">Note</p> <p>In HPE Ezmeral Container Platform deployment, default storage class is defined by HPE Ezmeral Data Fabric.</p></div> <h2 id="creating-a-persistent-volume-claim"><a href="#creating-a-persistent-volume-claim" class="header-anchor">#</a> Creating a Persistent Volume Claim</h2> <p>With a Storage Class available, we can create a PVC to request an amount of storage for our application. The command to create PVC and its output are as follows.</p> <blockquote><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&gt;</span> kubectl create -f pvc.yaml
</code></pre></div></blockquote> <p>A sample PVC is as follows.</p> <blockquote><div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> PersistentVolumeClaim
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> my<span class="token punctuation">-</span>pvc
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">accessModes</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> ReadWriteOnce
  <span class="token key atrule">resources</span><span class="token punctuation">:</span>
    <span class="token key atrule">requests</span><span class="token punctuation">:</span>
      <span class="token key atrule">storage</span><span class="token punctuation">:</span> 50Gi
<span class="token key atrule">storageClassName</span><span class="token punctuation">:</span> hpe<span class="token punctuation">-</span>standard
</code></pre></div></blockquote></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/hpe-solutions-hpecp/HPE CSI driver installation/HPE CSI driver installation.html" class="prev">
        HPE CSI driver installation
      </a></span> <span class="next"><a href="/hpe-solutions-hpecp/Deploying WordPress application using Nimble persistent volume/Deploying WordPress application using Nimble persistent volume.html">
        Deploying WordPress application using Nimble persistent volume
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/hpe-solutions-hpecp/assets/js/app.da8e75f2.js" defer></script><script src="/hpe-solutions-hpecp/assets/js/2.af88cad6.js" defer></script><script src="/hpe-solutions-hpecp/assets/js/15.1aec7f3c.js" defer></script>
  </body>
</html>
