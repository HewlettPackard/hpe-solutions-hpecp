(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{292:function(t,e,s){"use strict";s.r(e);var a=s(28),r=Object(a.a)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"worker-node-configuration"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#worker-node-configuration"}},[t._v("#")]),t._v(" Worker node configuration")]),t._v(" "),s("p",[t._v("This section outlines the steps to configure the automation environment and utilizes the automation environment to create the server profile for all Synergy nodes and install RHEL operating system on each of them.")]),t._v(" "),s("h2",{attrs:{id:"preparing-the-execution-environment"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#preparing-the-execution-environment"}},[t._v("#")]),t._v(" Preparing the execution environment")]),t._v(" "),s("p",[t._v("This section provides a detailed overview and steps to configure the components deployed for this solution.")]),t._v(" "),s("h3",{attrs:{id:"installer-machine"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#installer-machine"}},[t._v("#")]),t._v(" Installer machine")]),t._v(" "),s("p",[t._v("This document assumes that a server running Red Hat Enterprise Linux 7.6 with the following configuration exists within the deployment environment and is accessible to the installation user to be used in an installer machine.")]),t._v(" "),s("ol",[s("li",[s("p",[t._v('At least 200 GB of free disk space (especially in the "/" partition), 4 CPU cores and 8 GB RAM.')])]),t._v(" "),s("li",[s("p",[t._v("One (1) network interface with static IP address configured on same network as the management plane of the bare-metal servers and has access to internet.")])])]),t._v(" "),s("p",[t._v("In this solution, a virtual machine is used to act as an installer machine and the same host is utilized as an Ansible Engine host.")]),t._v(" "),s("h4",{attrs:{id:"setup-the-prerequisites"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#setup-the-prerequisites"}},[t._v("#")]),t._v(" Setup the prerequisites")]),t._v(" "),s("p",[t._v("Login to the installer VM and perform the following steps:")]),t._v(" "),s("ol",[s("li",[t._v("Execute the following command to register the host and attach the host pool with Red Hat.")])]),t._v(" "),s("blockquote",[s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" subscription-manager register --username"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("username"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" --password"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("password"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" --auto-attach\n")])])])]),t._v(" "),s("ol",{attrs:{start:"2"}},[s("li",[t._v("Disable all repositories and enable only the repositories required for the installer VM.")])]),t._v(" "),s("blockquote",[s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" subscription-manager repos --disable *\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" subscription-manager repos --disable"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"*"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  --enable"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"rhel-7-server-rpms"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  --enable"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"rhel-7-server-extras-rpms"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  --enable"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"rhel-7-server-optional-rpms"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  --enable"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"rhel-server-rhscl-7-rpms"')]),t._v("\n")])])])]),t._v(" "),s("p",[t._v("Perform the following steps to setup Python, Ansible, and the required repositories.")]),t._v(" "),s("ol",[s("li",[t._v("Use the following commands to install and enable Python 3.6.x.")])]),t._v(" "),s("blockquote",[s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" yum -y "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" rh-python36\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" scl "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("enable")]),t._v(" rh-python36 "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("bash")]),t._v("\n")])])])]),t._v(" "),s("ol",{attrs:{start:"2"}},[s("li",[t._v("Use the following commands to create and activate a Python3 virtual environment for deploying this solution.")])]),t._v(" "),s("blockquote",[s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" python3 -m venv "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("virtual_environment_name"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("source")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("virtual_environment_name"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("/bin/activate\n")])])])]),t._v(" "),s("ol",{attrs:{start:"3"}},[s("li",[t._v("Use the following command to install Ansible 2.9.")])]),t._v(" "),s("blockquote",[s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" python3 -m pip "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("ansible")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2.9")]),t._v(".0\n")])])])]),t._v(" "),s("ol",{attrs:{start:"4"}},[s("li",[t._v("Execute the following commands in the Ansible Engine to download the repositories.")])]),t._v(" "),s("blockquote",[s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mkdir")]),t._v(" --p /opt/hpe/solutions/hpecp/\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" /opt/hpe/solutions/hpecp/\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" yum "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" --y "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" clone "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("https://github.com/HewlettPackard/hpe-solutions-hpecp.git"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" clone "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("https://github.com/HewlettPackard/oneview-ansible.git"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" oneview-ansible\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" pip "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" --r requirements.txt\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("ANSIBLE_LIBRARY")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/opt/hpe/solutions/hpecp/oneview-ansible/library\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("ANSIBLE_MODULE_UTILS")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/opt/hpe/solutions/hpecp/oneview-ansible /library/module_utils\n")])])])]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("NOTE")]),t._v(" "),s("p",[t._v('The value for the constant "BASE_DIR" referred to in this deployment guide is /opt/hpe/solutions/hpecp/hpe-solutions-hpecp/scripts/')])]),t._v(" "),s("h4",{attrs:{id:"ansible-inventory-file"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ansible-inventory-file"}},[t._v("#")]),t._v(" Ansible inventory file")]),t._v(" "),s("p",[t._v("The files that are cloned from the GitHub site include a sample inventory file. The installation user should review this file (located on the installer VM at "),s("em",[t._v("BASE_DIR/infrastructure/hosts and BASE_DIR/prepare_hpecp_hosts/hosts")]),t._v(") and ensure that the information within the file accurately reflects the information in their environment.")]),t._v(" "),s("p",[t._v("Use an editor such as vi or nano to edit the inventory file.")]),t._v(" "),s("blockquote",[s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("vi")]),t._v(" BASE_DIR/infrastructure/hosts\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("vi")]),t._v(" BASE_DIR/prepare_hpecp_hosts/hosts\n")])])])]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("NOTE")]),t._v(" "),s("p",[t._v("The values provided in the variable files, inventory files, figures, and tables in this document are intended to be used for reference purpose. It is expected that the installation user updates them to suit the local environment.")])]),t._v(" "),s("p",[t._v("By default, the forks parameter in Ansible is limited to 5. Execute the following command to update the Ansible configuration to increase the value of number of hosts that are getting configured using this playbook.")]),t._v(" "),s("blockquote",[s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("ANSIBLE_FORKS")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("number_of_hosts_present_in_the_ansible_inventory_file"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])])]),t._v(" "),s("h4",{attrs:{id:"ansible-vault"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ansible-vault"}},[t._v("#")]),t._v(" Ansible vault")]),t._v(" "),s("p",[t._v("A preconfigured Ansible vault file ("),s("em",[t._v("secret.yml")]),t._v(") is provided as a part of this solution, which consists of sensitive information to support the host and virtual machine deployment.")]),t._v(" "),s("p",[t._v("Run the following commands on the installer VM to edit the vault to match the installation environment.")]),t._v(" "),s("blockquote",[s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" ansible-vault edit BASE_DIR/infrastructure/secret.yml\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" ansible-vault edit BASE_DIR/prepare_hpecp_hosts/secret.yml\n")])])])]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("NOTE")]),t._v(" "),s("p",[t._v("The default password for the Ansible vault file is "),s("em",[t._v("changeme.")])])]),t._v(" "),s("h2",{attrs:{id:"server-profiles"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#server-profiles"}},[t._v("#")]),t._v(" Server profiles")]),t._v(" "),s("p",[t._v('Server profiles are used to configure the personality of the compute resources. A server profile allows a set of configuration parameters, including firmware recipe, network and storage, BIOS tuning, boot order configuration, local storage configuration, and more to be templatized. These templates are the key to deliver the "infrastructure as code" capabilities of the HPE Synergy platform. For the purpose of this solution, a template is created which can be leveraged for HPE Ezmeral Container Platform controller, Kubernetes master and worker nodes.')]),t._v(" "),s("h3",{attrs:{id:"automation-overview"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#automation-overview"}},[t._v("#")]),t._v(" Automation overview")]),t._v(" "),s("p",[t._v("The folder "),s("strong",[t._v("infrastructure")]),t._v(" within the folder BASE_DIR contains Ansible scripts to automate the creation of server profiles in HPE OneView. The scripts are as follows:")]),t._v(" "),s("ol",[s("li",[s("p",[s("strong",[t._v("inputs.yml")]),t._v(": This file contains input variables to create the server profile template and server profile.")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("hosts")]),t._v(": This is the inventory file which the installer VM will use to reference nodes for which the server profile needs to be created.")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("secret.yml")]),t._v(": This is an Ansible vault file that consists of sensitive information, such as HPE OneView IP address and credentials.")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("playbooks")]),t._v(": This folder consists of playbooks to upload firmware bundle, create server profile templates and the server profiles for controller, gateway, master and worker nodes.")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("roles")]),t._v(": This folder consists of Ansible roles to upload firmware bundle, create the server profile template and server profile. Each role is associated with a set of tasks to accomplish the expected output and they are present in the task directory within the role.")])])]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("NOTE")]),t._v(" "),s("p",[t._v("The parameter names are case sensitive. Ensure that parameter names and functions are accurately recorded for the installation environment. Any variation in parameter names and functions will result in the failure of automated configuration steps.")])]),t._v(" "),s("h3",{attrs:{id:"automated-deployment-of-server-profile"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#automated-deployment-of-server-profile"}},[t._v("#")]),t._v(" Automated deployment of server profile")]),t._v(" "),s("p",[t._v("Perform the following steps to create server profiles for all the bare-metal nodes participating in the HPE Container Platform cluster.")]),t._v(" "),s("ol",[s("li",[t._v("Update the inventory file found at "),s("em",[t._v("BASE_DIR/infrastructure")]),t._v(" directory within the installer VM to include server hardware details. The installation user should update the values to suit their environment.")])]),t._v(" "),s("blockquote",[s("div",{staticClass:"language-vi extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('[server_profile_template]\n"Frame1, bay 5" type="SY 480 Gen10 1" role="master"\n"Frame1, bay 6" type="SY 480 Gen10 1" role="worker"\n"Frame1, bay 7" type="SY 480 Gen10 1" role="gateway"\n"Frame1, bay 8" type="SY 480 Gen10 1" role="controller"\n[server_profile]\n# format "enclosure serial number, server bay number", type=<server hardware type> role=<role(master/worker/controller) of the server> name=<server profile name>\n"Frame1, bay 9" type="SY 480 Gen10 1" role="controller" name="cp_controller_01"\n"Frame2, bay 9" type="SY 480 Gen10 1" role="controller" name="cp_controller_02"\n"Frame3, bay 9" type="SY 480 Gen10 1" role="controller" name="cp_controller_03"\n"Frame1, bay 5" type="SY 480 Gen10 1" role="gateway" name="cp_gateway_02"\n"Frame2, bay 5" type="SY 480 Gen10 1" role="gateway" name="cp_gateway_02"\n"Frame1, bay 4" type="SY 480 Gen10 1" role="master" name="cp_master_01"\n"Frame2, bay 4" type="SY 480 Gen10 1" role="master" name="cp_master_02"\n"Frame3, bay 4" type="SY 480 Gen10 1" role="master" name="cp_master_03"\n"Frame1, bay 6" type="SY 480 Gen10 1" role="worker" name="cp_worker_01"\n"Frame2, bay 6" type="SY 480 Gen10 1" role="worker" name="cp_worker_02"\n"Frame3, bay 6" type="SY 480 Gen10 1" role="worker" name="cp_worker_03"\n')])])])]),t._v(" "),s("ol",{attrs:{start:"2"}},[s("li",[t._v("Update the "),s("em",[t._v("input.yml")]),t._v(" file found at *BASE_DIR/infrastructure. *")])]),t._v(" "),s("blockquote",[s("div",{staticClass:"language-yaml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Variables for creating the Server Profile and Server Profile Template as per the OneView configuration")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Example: enclosure_group: EG1")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("enclosure_group")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" <Enclosure group name as per OneView"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Example: deployment_network_name: TwentyNet")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("deployment_network_name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" <Deployment network name as per OneView"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#<iscsi_A network name as per OneView>")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("iSCSI_A_network_name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" <iSCSI_SAN_A primary iSCSI network name as per one view"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#<iscsi_B network name as per OneView>")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("iSCSI_B_network_name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" <iSCSI_SAN_B Secondary iSCSI network name as per one view"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Example: worker_template_name: hpecp_worker_template")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#<Custom name for workerServerProfileTemplate>")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("worker_template_name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" <Custom name for worker_SPT"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#<Custom name for gatewayServerProfileTemplate>")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("gateway_template_name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" <Custom name for gateway_SPT"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#<Custom name for MasterServerProfileTemplate>")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("master_template_name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" <Custom name for master_SPT"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#<Custom name for ControllerServerProfileTemplate>")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("controller_template_name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" <Custom name for controller_SPT"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# This variable is required when user wants to upload a firmware bundle or firmware baseline for Compute Module of HPE Synergy to HPE OneView")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Path on installer machine where the firmware bundle or firmware baseline for Compute Module of HPE Synergy is present.")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# This path should end with "/" but it should not include firmware file name.')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Example: fw_bundle_path: BASE_DIR/infrastructure/roles/upload_firmware_bundle/files/")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("fw_bundle_path")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" <Firmware Bundle file path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Provide the firmware file name with extension")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# fw_bundle_file_name: HPE_Synergy_Custom_SPP2019.12_20200326_Z7550-96866.iso")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("fw_bundle_file_name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" <Firmware file name with extension"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("###### Enable or Diable Firmware update, BIOS Setttings, and iLO settings by changing the flag to true or false #########")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# manage firmware")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("managefw")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("true")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# manage BIOS security settings")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("manageBios")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("true")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("bioscomplianceControl")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Checked\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# manage iLO User Account settings")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("manageilo")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("true")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("ilocomplianceControl")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Checked\n")])])])]),t._v(" "),s("ol",{attrs:{start:"3"}},[s("li",[t._v("Update the "),s("em",[t._v("secret.yml")]),t._v(" found at *BASE_DIR/infrastructure. *")])]),t._v(" "),s("blockquote",[s("div",{staticClass:"language-yaml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# oneview ip address and credentials.")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("oneview_ip")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" x.x.x.x\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("oneview_username")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" <username"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("oneview_password")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" <password"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")]),t._v("\n")])])])]),t._v(" "),s("ol",{attrs:{start:"4"}},[s("li",[t._v("After the inventory and variable files are updated with the appropriate values, execute the following commands on the installer VM to upload the firmware bundle, create the server profile template and server profile.")])]),t._v(" "),s("blockquote",[s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" BASE_DIR/infrastructure\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" ansible-playbook -i hosts playbooks/upload_firmware_bundle.yml --ask-vault-pass\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" ansible-playbook -i hosts playbooks/server_profile_template_fw.yml --ask-vault-pass\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" ansible-playbook -i hosts playbooks/server_profile_fw.yml --ask-vault-pass\n")])])])]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("NOTE")]),t._v(" "),s("p",[t._v("BASE_DIR is defined and set in the "),s("a",{attrs:{href:"#installer-machine"}},[t._v("Installer machine")]),t._v(" section within this document.")])]),t._v(" "),s("h2",{attrs:{id:"deploying-operating-system-on-bare-metal-nodes"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#deploying-operating-system-on-bare-metal-nodes"}},[t._v("#")]),t._v(" Deploying operating system on bare metal nodes")]),t._v(" "),s("p",[t._v("This section outlines the steps to programmatically deploy RHEL 7.7 operating system on all the bare-metal nodes participating in the HPE Ezmeral Container Platform cluster.")]),t._v(" "),s("h3",{attrs:{id:"automation-overview-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#automation-overview-2"}},[t._v("#")]),t._v(" Automation overview")]),t._v(" "),s("p",[t._v("The folder "),s("strong",[t._v("os_deployment")]),t._v(" within the folder BASE_DIR consists of scripts to deploy operating system over bare metal servers using virtual media. An overview of the scripts are as follows:")]),t._v(" "),s("ol",[s("li",[s("p",[s("strong",[t._v("deploy_os.py")]),t._v(": This is the main file which validates the prerequisites and triggers the OS deployment based on the type of the operating system.")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("setup.sh:")]),t._v(" This script configures the prerequisite environment required for the successful execution of OS deployment script.")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("requirements.txt:")]),t._v(" This file includes the list of prerequisites required for the OS installation and it will be installed by the setup.sh script.")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("kickstart_files")]),t._v(": This folder consists of the kickstart files for RHEL installation.")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("input_files")]),t._v(": This folder consists of 2 input files, config.json and server_details.json.")]),t._v(" "),s("p",[t._v("a.  "),s("strong",[t._v("config.json:")]),t._v(" This file takes the input details related to web server and operating system to be installed.")]),t._v(" "),s("p",[t._v("b.  "),s("strong",[t._v("server_details.json:")]),t._v(" This file takes the input details of custom configuration for servers on which operating system is to be installed.")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("rhel_operations.py:")]),t._v(" This script includes the functions relevant for the creation of custom RHEL image based on the input configuration.")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("ilo_operations.py:")]),t._v(" This script includes the functions relevant to iLO operations.")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("image_operations.py:")]),t._v(" This script includes the functions relevant to OS image related operations.")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("redfish_object.py:")]),t._v(" This script includes the functions relevant to iLO object related operations.")])])]),t._v(" "),s("div",{staticClass:"custom-block warning"},[s("p",{staticClass:"custom-block-title"},[t._v("Prerequisites")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("RHEL 7.7 ISO image is present in the HTTP file path within the installer machine.")])]),t._v(" "),s("li",[s("p",[t._v("iLO account with administrative privileges is required for each of the servers whose OS is configured via automation enlisted in this section")])])])]),t._v(" "),s("h3",{attrs:{id:"automated-deployment-of-operating-system"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#automated-deployment-of-operating-system"}},[t._v("#")]),t._v(" Automated deployment of operating system")]),t._v(" "),s("p",[t._v("Perform the following steps to install RHEL 7.7 operating system on all the bare-metal nodes participating in the HPE Ezmeral Container Platform cluster.")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("Execute the following command to setup the prerequisite environment.")]),t._v(" "),s("blockquote",[s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("> sh setup.sh\n")])])])])]),t._v(" "),s("li",[s("p",[t._v("Update the Ansible vault input file, "),s("em",[t._v("input_files/config.json")]),t._v(" file with the details of OneView, web server, and operating system to be installed. Execute the following command to edit the "),s("em",[t._v("config.json")]),t._v(" input file.")]),t._v(" "),s("blockquote",[s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("> ansible-vault edit config.json\n")])])])]),t._v(" "),s("p",[t._v("Default password for the Ansible vault files config.json is "),s("em",[t._v("changeme")]),t._v(". Example values for the input configuration is as follows. It is expected to update this file to suit the installation environment.")]),t._v(" "),s("blockquote",[s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[t._v("   "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"HTTP_server_base_url"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://10.0.x.x/"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n   "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"HTTP_file_path"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/usr/share/nginx/html/"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n   "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"OS_type"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"rhel7"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n   "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"OS_image_name"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"<rhel_os_iso_image_name_with_extension>"')]),t._v("\n   "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("NOTE")]),t._v(" "),s("p",[t._v('Acceptable value for "OS_type" variable is "rhel7" for RHEL 7.7.')])])]),t._v(" "),s("li",[s("p",[t._v("Update the Ansible vault input file, "),s("em",[t._v("input_files/server_details.json")]),t._v(" file with the details of servers on which operating system is to be installed.")]),t._v(" "),s("p",[t._v("Execute the following command to edit the server_details.json input file.")]),t._v(" "),s("blockquote",[s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("> ansible-vault edit server_details.json\n")])])])]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("NOTE")]),t._v(" "),s("p",[t._v('It is essential to provide a hashed password for the "Host_Password" field in the '),s("em",[t._v("server_details.json")]),t._v(' input file. Execute the following command with the choice of password to generate an MD5 hash and provide its output to the "Host_Password" field.')])]),t._v(" "),s("blockquote",[s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("> openssl passwd -1 <Password>\n")])])])]),t._v(" "),s("p",[t._v("Default password for the Ansible vault files server_details.json is "),s("em",[t._v("changeme")]),t._v(". Example values for the input configuration for deploying RHEL 7.7 is as follows. It is expected to update this file to suit the installation environment.")]),t._v(" "),s("blockquote",[s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"Server_serial_number"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"MXxxxxxDN"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"ILO_Address"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"10.x.x.x"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"ILO_Username"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"<username_of_iLO_account_with_admin_privileges>"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"ILO_Password"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"<password_of_iLO_account_with_admin_privileges>"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"Hostname"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"master01.twentynet.local"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"Host_IP"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"20.x.x.x"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"Host_Username"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"root"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"Host_Password"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"<hashed_valued_of_complex_password>"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"Host_Netmask"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"255.x.x.x"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"Host_Gateway"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"20.x.x.x"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"Host_DNS"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"20.x.x.x"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"Server_Role"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"master"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"Server_serial_number"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"MXxxxxxDN"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"ILO_Address"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"10.x.x.x"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"ILO_Username"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"username"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"ILO_Password"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"password"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"Hostname"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"worker01.twentynet.local"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"Host_IP"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"20.x.x.x"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"Host_Username"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"root"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"Host_Password"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"<hashed_valued_of_complex_password>"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"Host_Netmask"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"255.x.x.x"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"Host_Gateway"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"20.x.x.x"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"Host_DNS"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"20.x.x.x"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"Server_Role"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"worker"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"Additional_Networks"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"IP"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"30.0.x.x"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"Netmask"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"255.255.x.x"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"IP"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"40.0.x.x"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"Netmask"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"255.255.x.x"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])])]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("NOTE")]),t._v(" "),s("p",[t._v('Acceptable value for "Server_Role" variable is "master" for RHEL controller node, RHEL gateway load balancer node or RHEL master node and "worker" for RHEL worker node.')])])]),t._v(" "),s("li",[s("p",[t._v("Execute the script to deploy the operating system.")]),t._v(" "),s("blockquote",[s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("> python3 deploy_os.py\n")])])])]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("NOTE")]),t._v(" "),s("p",[t._v("Generic settings done as a part of kickstart file for RHEL are as follows. It is recommended that the user reviews and modifies the kickstart files. (kickstart_files/ks_rhel7.cfg and kickstart_files/ks_rhel7_worker.cfg) to suit their requirements.")])]),t._v(" "),s("ul",[s("li",[s("p",[t._v("Graphical installation")])]),t._v(" "),s("li",[s("p",[t._v("Language - en_US")])]),t._v(" "),s("li",[s("p",[t._v("Keyboard & layout - US")])]),t._v(" "),s("li",[s("p",[t._v("System service chronyd disabled")])]),t._v(" "),s("li",[s("p",[t._v("timezone - Asia/Kolkata")])]),t._v(" "),s("li",[s("p",[t._v("Bootloader config")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("bootloader location=mbr")])]),t._v(" "),s("li",[s("p",[t._v("clearpart --all --initlabel")])]),t._v(" "),s("li",[s("p",[t._v("ignoredisk --only-use=sda")])]),t._v(" "),s("li",[s("p",[t._v('part swap --asprimary --fstype="swap" --size=77263')])]),t._v(" "),s("li",[s("p",[t._v("part /boot --fstype xfs --size=300")])]),t._v(" "),s("li",[s("p",[t._v('part /boot/efi --fstype="vfat" --size=1024')])]),t._v(" "),s("li",[s("p",[t._v("part / --size=500 --grow")])])])]),t._v(" "),s("li",[s("p",[t._v("NIC teaming is perfomed with devices ens3f0 and ens3f1. It is assigned with the Host_IP defined in the input_files/server_details.json input file.")])]),t._v(" "),s("li",[s("p",[t._v("For the worker nodes, devices ens3f4 and ens3f5 are assigned with iSCSI_A IP address and iSCSI_B IP address respectively which is defined in the "),s("em",[t._v("input_files/server_details.json")]),t._v(" file.")])])])])])])}),[],!1,null,null,null);e.default=r.exports}}]);