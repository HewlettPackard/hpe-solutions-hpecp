<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Deploying HPE Ezmeral Container Platform | HPE Deployment Guide for HPE Ezmeral Container Platform on HPE Synergy </title>
    <meta name="description" content="">
    <meta name="generator" content="VuePress 1.4.0">
    
    
    <link rel="preload" href="/hpe-solutions-hpecp/assets/css/0.styles.174cdb16.css" as="style"><link rel="preload" href="/hpe-solutions-hpecp/assets/js/app.da8e75f2.js" as="script"><link rel="preload" href="/hpe-solutions-hpecp/assets/js/2.af88cad6.js" as="script"><link rel="preload" href="/hpe-solutions-hpecp/assets/js/3.e3454261.js" as="script"><link rel="prefetch" href="/hpe-solutions-hpecp/assets/js/10.ed8d595c.js"><link rel="prefetch" href="/hpe-solutions-hpecp/assets/js/11.87136d49.js"><link rel="prefetch" href="/hpe-solutions-hpecp/assets/js/12.63b66f14.js"><link rel="prefetch" href="/hpe-solutions-hpecp/assets/js/13.077301ba.js"><link rel="prefetch" href="/hpe-solutions-hpecp/assets/js/14.fa0ee6fc.js"><link rel="prefetch" href="/hpe-solutions-hpecp/assets/js/15.1aec7f3c.js"><link rel="prefetch" href="/hpe-solutions-hpecp/assets/js/16.8d3ec496.js"><link rel="prefetch" href="/hpe-solutions-hpecp/assets/js/17.9efce6e0.js"><link rel="prefetch" href="/hpe-solutions-hpecp/assets/js/18.dea77411.js"><link rel="prefetch" href="/hpe-solutions-hpecp/assets/js/19.dacf1900.js"><link rel="prefetch" href="/hpe-solutions-hpecp/assets/js/20.d3a51bed.js"><link rel="prefetch" href="/hpe-solutions-hpecp/assets/js/4.1d75cca5.js"><link rel="prefetch" href="/hpe-solutions-hpecp/assets/js/5.5aa796fc.js"><link rel="prefetch" href="/hpe-solutions-hpecp/assets/js/6.7cd37544.js"><link rel="prefetch" href="/hpe-solutions-hpecp/assets/js/7.d6beb650.js"><link rel="prefetch" href="/hpe-solutions-hpecp/assets/js/8.9b5f9eef.js"><link rel="prefetch" href="/hpe-solutions-hpecp/assets/js/9.924336ee.js">
    <link rel="stylesheet" href="/hpe-solutions-hpecp/assets/css/0.styles.174cdb16.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/hpe-solutions-hpecp/" class="home-link router-link-active"><!----> <span class="site-name">HPE Deployment Guide for HPE Ezmeral Container Platform on HPE Synergy </span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/hpe-solutions-hpecp/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="http://www.hpe.com/info/ra" target="_blank" rel="noopener noreferrer" class="nav-link external">
  RA Library
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/hpe-solutions-hpecp/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="http://www.hpe.com/info/ra" target="_blank" rel="noopener noreferrer" class="nav-link external">
  RA Library
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/hpe-solutions-hpecp/Introduction/Introduction.html" class="sidebar-link">Introduction</a></li><li><a href="/hpe-solutions-hpecp/Solution overview/Solution overview.html" class="sidebar-link">Solution overview</a></li><li><a href="/hpe-solutions-hpecp/Solution components/Solution components.html" class="sidebar-link">Solution components</a></li><li><a href="/hpe-solutions-hpecp/Physical environment configuration/Physical environment configuration.html" class="sidebar-link">Physical environment configuration</a></li><li><a href="/hpe-solutions-hpecp/Worker-node-configuration/Worker-node-configuration.html" class="sidebar-link">Worker node configuration</a></li><li><a href="/hpe-solutions-hpecp/Deploy HPE Ezmeral Container Platform/Deploy HPE Ezmeral Container Platform.html" class="active sidebar-link">Deploy HPE Ezmeral Container Platform</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/hpe-solutions-hpecp/Deploy HPE Ezmeral Container Platform/Deploy HPE Ezmeral Container Platform.html#prerequisites" class="sidebar-link">Prerequisites</a></li><li class="sidebar-sub-header"><a href="/hpe-solutions-hpecp/Deploy HPE Ezmeral Container Platform/Deploy HPE Ezmeral Container Platform.html#platform-high-availability-setup" class="sidebar-link">Platform High Availability setup</a></li><li class="sidebar-sub-header"><a href="/hpe-solutions-hpecp/Deploy HPE Ezmeral Container Platform/Deploy HPE Ezmeral Container Platform.html#gateway-host" class="sidebar-link">Gateway Host</a></li></ul></li><li><a href="/hpe-solutions-hpecp/Deploying Kubernetes cluster/Deploying Kubernetes cluster.html" class="sidebar-link">Deploying Kubernetes cluster</a></li><li><a href="/hpe-solutions-hpecp/Securing HPE Ezmeral Container Platform using Sysdig Secure and Sysdig Monitor/Securing HPE Ezmeral Container Platform using Sysdig Secure and Sysdig Monitor.html" class="sidebar-link">Securing HPE Ezmeral Container Platform using Sysdig Secure and Sysdig Monitor</a></li><li><a href="/hpe-solutions-hpecp/Validate HPE Ezmeral Container Platform deployment/Validate HPE Ezmeral Container Platform deployment.html" class="sidebar-link">Validate HPE Ezmeral Container Platform deployment</a></li><li><a href="/hpe-solutions-hpecp/HPE CSI driver installation/HPE CSI driver installation.html" class="sidebar-link">HPE CSI driver installation</a></li><li><a href="/hpe-solutions-hpecp/Configuration/Configuration.html" class="sidebar-link">Configuration</a></li><li><a href="/hpe-solutions-hpecp/Deploying WordPress application using Nimble persistent volume/Deploying WordPress application using Nimble persistent volume.html" class="sidebar-link">Deploying WordPress application using Nimble persistent volume</a></li><li><a href="/hpe-solutions-hpecp/Resources and additional links/Resources and additional links.html" class="sidebar-link">Resources and additional links</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="deploying-hpe-ezmeral-container-platform"><a href="#deploying-hpe-ezmeral-container-platform" class="header-anchor">#</a> Deploying HPE Ezmeral Container Platform</h1> <p>This section gives an overview of deploying HPE Ezmeral Container Platform on RHEL 7.7.</p> <p>Figure 9 outlines the deployment steps.</p> <p><img src="/hpe-solutions-hpecp/assets/img/figure9.7cca9355.png" alt="Deployment steps"></p> <p><strong>Figure</strong> <strong>9.</strong> Deployment steps</p> <h2 id="prerequisites"><a href="#prerequisites" class="header-anchor">#</a> Prerequisites</h2> <h3 id="configuring-requirements"><a href="#configuring-requirements" class="header-anchor">#</a> Configuring requirements</h3> <p>This section provides instructions to utilize the Ansible automation script to configure essential requirements on RHEL 7.7 hosts for HPE Ezmeral Container Platform installation.</p> <h4 id="overview"><a href="#overview" class="header-anchor">#</a> Overview</h4> <p>The automation script configures the following on the hosts on which HPE Ezmeral Container Platform is to be installed:</p> <ul><li><p>Register the host to Red Hat Subscription Manager (RHSM) if not already registered.</p></li> <li><p>Enable the following repos:</p> <ul><li><p>rhel-7-server-optional-rpms</p></li> <li><p>rhel-7-server-extras-rpms</p></li> <li><p>rhel-ha-for-rhel-7-server-rpms</p></li></ul></li> <li><p>Set the RHEL OS release to 7.7 and perform an update.</p></li> <li><p>The behavior of yum plugin is set to notifications only in the /etc/yum/pluginconf.d/search-disabled-repos.conf file.</p></li> <li><p>Disable firewall and set SELinux to permissive mode.</p></li> <li><p>The ARP settings in the /etc/sysctl.conf file for arp_announce and arp_ignore is set to zero to facilitate the use of local target IP address configured on any interface and reply for any local target IP address configured on any interface.</p></li> <li><p>The SSHD service allows the Controller host to communicate directly with Worker hosts via password-less SSH when adding the Worker hosts to the HPE Ezmeral Container Platform deployment. This script updates the following fields in /etc/ssh/sshd_config file:</p> <ul><li><p>PubkeyAuthentication=yes</p></li> <li><p>AuthorizedKeysFile=.ssh/authorized_keys</p></li> <li><p>PermitRootLogin=yes</p></li></ul></li> <li><p>Download yum repos - bluedata-bdmgmt-.el7 bluedata-troubleshoot-.el7 bluedata-webui-.el7 bluedata-datatap-.el7 bluedata-bdconfig-.el7 openvswitch-2.5.2-1.el7 yum-utils sos python-requests python-requests-kerberos python-argparse python-boto python-urllib3 policycoreutils-python python-dateutil ceph-common httpd mod_ssl mod_wsgi django chrony bind-utils bc lvm2 parted autofs rpcbind libcgroup-tools psmisc nfs-utils python-ipaddr python-iniparse patch curl wget openssh-clients python-setuptools createrepo openldap-clients docker selinux-policy python-devel python-cffi python-virtualenv python-dateutil libxml2-devel libxslt-devel openssl-devel device-mapper-persistent-data dnsmasq haproxy socat</p></li> <li><p>Reboot the server after all the above tasks are completed.</p></li></ul> <p>For more information on configuration requirements for HPE Ezmeral Container Platform nodes, see <a href="http://docs.bluedata.com/50_operating-system-requirements" target="_blank" rel="noopener noreferrer">http://docs.bluedata.com/50_operating-system-requirements<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> and <a href="http://docs.bluedata.com/50_configuration-requirements" target="_blank" rel="noopener noreferrer">http://docs.bluedata.com/50_configuration-requirements<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <div class="custom-block warning"><p class="custom-block-title">Prerequisites</p> <ul><li><p>Python 3 and Ansible environment is enabled as listed in <a href="/hpe-solutions-hpecp/Worker-node-configuration/Worker-node-configuration.html#installer-machine">Installer machine</a> section of deployment guide.</p></li> <li><p>Passwordless SSH is configured to target hosts from the installer machine.</p></li></ul></div> <div class="custom-block tip"><p class="custom-block-title">NOTE</p> <p>To generate an SSH key pair of specific algorithm or specific key size as per user requirements, use the following command.</p> <blockquote><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&gt;</span> ssh-keygen -t <span class="token operator">&lt;</span>algorithm<span class="token operator">&gt;</span> -b <span class="token operator">&lt;</span>keysize<span class="token operator">&gt;</span>
</code></pre></div></blockquote></div> <h4 id="installation"><a href="#installation" class="header-anchor">#</a> Installation</h4> <ol><li><p>Use the following command to change the current working directory to &quot;prepare_hpecp_hosts.&quot;</p> <blockquote><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&gt;</span> <span class="token builtin class-name">cd</span> BASE_DIR/prepare_hpecp_hosts
</code></pre></div></blockquote> <div class="custom-block tip"><p class="custom-block-title">NOTE</p> <p>BASE_DIR is defined and set in <a href="/hpe-solutions-hpecp/Worker-node-configuration/Worker-node-configuration.html#installer-machine">Installer machine</a> section within this document.</p></div></li> <li><p>Update the input file host and provide the IP address of the hosts which needs to be configured with the prerequisites for HPE Ezmeral Container Platform installation.</p> <blockquote><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&gt;</span> <span class="token function">vi</span> hosts
</code></pre></div></blockquote> <p>Example values for the hosts file is as follows.</p> <blockquote><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token punctuation">[</span>hpecp_nodes<span class="token punctuation">]</span>
<span class="token comment"># HPECP controller nodes</span>
<span class="token number">20.0</span>.x.x
<span class="token number">20.0</span>.x.x
<span class="token number">20.0</span>.x.x

<span class="token comment"># HPECP gateway nodes</span>
<span class="token number">20.0</span>.x.x
<span class="token number">20.0</span>.x.x

<span class="token comment"># HPECP worker nodes</span>
<span class="token number">20.0</span>.x.x
<span class="token number">20.0</span>.x.x
<span class="token number">20.0</span>.x.x
<span class="token number">20.0</span>.x.x
<span class="token number">20.0</span>.x.x
<span class="token number">20.0</span>.x.x
</code></pre></div></blockquote></li> <li><p>Use the following command to update the secret.yml ansible vault file to provide the Red Hat Subscription Manager credentials.</p> <blockquote><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&gt;</span> ansible-vault edit secret.yml
</code></pre></div></blockquote> <p>The default password for the ansible vault file <em>secret.yml</em> is <em>changeme</em>.</p> <p>Example values for the secret.yml file is as follows.</p> <blockquote><div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">rhsub_password</span><span class="token punctuation">:</span> <span class="token string">&quot;&lt;redhat_subscription_manager_password&gt;&quot;</span>
<span class="token key atrule">rhsub_username</span><span class="token punctuation">:</span> <span class="token string">&quot;&lt;redhat_subscription_manager_username&gt;&quot;</span>
</code></pre></div></blockquote></li> <li><p>Use the following command to execute the playbook.</p> <blockquote><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&gt;</span> ansible-playbook -i hosts prepare_host.yml --ask-vault-pass
</code></pre></div></blockquote></li></ol> <h3 id="setup-ssh-passwordless-login"><a href="#setup-ssh-passwordless-login" class="header-anchor">#</a> Setup SSH passwordless login</h3> <p>HPE Ezmeral Container Platform controller uses passwordless SSH login to communicate with other nodes in the platform for configuration and setup. Execute the following command on the primary controller to generate a new 4096 bits SSH key pair. Copy the key to all other nodes in the platform. Add the public key to the list of authorized keys on the primary controller.</p> <blockquote><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&gt;</span> ssh-keygen -t rsa -b <span class="token number">4096</span>
<span class="token operator">&gt;</span> ssh-copy-id <span class="token operator">&lt;</span>root@hcp01.hcp.local<span class="token operator">&gt;</span>
<span class="token operator">&gt;</span> <span class="token function">cat</span> id_rsa.pub <span class="token operator">&gt;&gt;</span> /root/.ssh/authorized_keys.
</code></pre></div></blockquote> <p>The instruction assumes that the hosts are configured with SSH passwordless access.</p> <div class="custom-block tip"><p class="custom-block-title">NOTE</p> <p>Ensure internet connectivity is available on all the nodes participating in the HPE Ezmeral Container Platform cluster.</p></div> <h3 id="setup-proxy-for-docker-optional"><a href="#setup-proxy-for-docker-optional" class="header-anchor">#</a> Setup proxy for Docker (optional)</h3> <p>Docker needs to be able to pull images from the internet. Perform these steps even before Docker (and therefore HPE Ezmeral Container Platform) to be installed on your system. To do this, perform the following steps.</p> <ol><li><p>Use the following command to create a Docker service directory if it does not exist.</p> <blockquote><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&gt;</span> <span class="token function">mkdir</span> -p /etc/systemd/system/docker.service.d 
</code></pre></div></blockquote></li> <li><p>Set up <em>docker-proxy.conf.</em></p> <p><strong>For RHEL 7.7</strong></p> <blockquote><div class="language- extra-class"><pre class="language-text"><code>&gt; cat &gt; /etc/systemd/system/docker.service.d/docker-proxy.conf &lt;&lt;EOF 
[Service] 
Environment=&quot;HTTP_PROXY=$http_proxy&quot; 
Environment=&quot;HTTPS_PROXY=$https_proxy&quot; 
Environment=&quot;NO_PROXY=$no_proxy&quot; 
EOF&gt;&gt; 
</code></pre></div></blockquote> <p>After you install HPE Ezmeral Container Platform, Docker will get installed and it will pick up the Docker proxy configuration. However, if you set-up docker-proxy.conf after the HPE Ezmeral Container Platform is installed, then, you must restart Docker service to enable the Docker proxy setting.</p> <p>Execute the following commands to restart the Docker.</p> <blockquote><div class="language- extra-class"><pre class="language-text"><code>&gt; systemctl daemon-reload 
&gt; systemctl restart docker 
</code></pre></div></blockquote> <p>For more details on configuring docker to use a proxy server, see <a href="https://docs.docker.com/network/proxy/" target="_blank" rel="noopener noreferrer">https://docs.docker.com/network/proxy/<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></li></ol> <h3 id="installing-hpe-ezmeral-container-platform-controller"><a href="#installing-hpe-ezmeral-container-platform-controller" class="header-anchor">#</a> Installing HPE Ezmeral Container Platform controller</h3> <p>Installation of HPE Ezmeral Container Platform controller is a phase by phase approach and is described as follows.</p> <h4 id="phase-1-download-the-bundle"><a href="#phase-1-download-the-bundle" class="header-anchor">#</a> Phase 1 -- Download the bundle</h4> <p>Download the bundle. For more instructions on how to download HPE Ezmeral Container Platform software bundle, see <a href="http://docs.bluedata.com/50_using-the-bundle-download-script" target="_blank" rel="noopener noreferrer">Using the Bundle Download Script<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <h4 id="phase-2-perform-precheck"><a href="#phase-2-perform-precheck" class="header-anchor">#</a> Phase 2 - Perform precheck</h4> <p>The HPE Ezmeral Container Platform precheck script performs a series of checks on the Controller host to determine whether it is ready to accept the installation of HPE Ezmeral Container Platform. For more information, see <a href="http://docs.bluedata.com/50_using-the-pre-check-script" target="_blank" rel="noopener noreferrer">Using the Pre-Check Script<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <h4 id="adding-an-ssl-certificate"><a href="#adding-an-ssl-certificate" class="header-anchor">#</a> Adding an SSL Certificate</h4> <p>If you want to access the HPE Ezmeral Container Platform interface using Secure Socket Layer (https://), then you will need to add an SSL certificate on the machine that will become the Controller host before running the Container Station precheck. If you do this, ensure to record the location and name of the certificate. Ensure to use the --ssl-cert and ssl-priv-key options while running the precheck script.</p> <h4 id="phase-3-install-hpe-ezmeral-container-platform"><a href="#phase-3-install-hpe-ezmeral-container-platform" class="header-anchor">#</a> Phase 3 - Install HPE Ezmeral Container Platform</h4> <p>To manually install the HPE Ezmeral Container Platform on the Controller host, do the following:</p> <ol><li><p>Login to the host that you will be using as the Controller host. Use either the root account and password or your assigned username and password to do so.</p></li> <li><p>If needed, copy the HPE Ezmeral Container Platform Enterprise binary (.bin) to the host that you will use as the Controller host.</p></li> <li><p>Make the .bin file executable by executing the command chmod a+x bluedata-epic-entdoc-&lt;os&gt;-&lt;flavor&gt;-release-&lt;version&gt;-&lt;build&gt;.bin</p> <blockquote><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&gt;</span> <span class="token function">chmod</span> a+x bluedata-epic-entdoc-minimal-release-5.0-3006.bin
</code></pre></div></blockquote></li> <li><p>Run the executable binary from the Linux console as the assigned user by typing ./&lt;epic&gt;.bin &lt;options&gt;, where &lt;options&gt; is a list of one or more option(s) that specify how the installer should configure HPE Ezmeral Container Platform. For more information, see <a href="http://docs.bluedata.com/50_standard-installation$installeroptions" target="_blank" rel="noopener noreferrer">Installer Options<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <blockquote><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&gt;</span>./bluedata-epic-entdoc-minimal-release-5.0-3006.bin
</code></pre></div></blockquote></li> <li><p>The installer checks the integrity of the HPE Ezmeral Container Platform bundle and then extracts the bundle contents.</p></li> <li><p>The End User License Agreement (EULA) appears. After you have viewed the entire EULA, press [y] to accept it and continue installing HPE Ezmeral Container Platform.</p></li> <li><p>HPE Ezmeral Container Platform installs on the Controller host. A series of messages appear during the installation. The following message appears after the installation is complete.</p></li></ol> <p>Successfully installed HPE Software</p> <p>Please visit <a href="https://192.xx.1.50" target="_blank" rel="noopener noreferrer">https://192.xx.1.50<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> to configure the server.</p> <h4 id="phase-4-complete-the-deployment"><a href="#phase-4-complete-the-deployment" class="header-anchor">#</a> Phase 4 - Complete the deployment</h4> <p>Use an available web browser to connect to the HPE Ezmeral Container Platform controller. Use the URL <a href="https://192.xx.1.50" target="_blank" rel="noopener noreferrer">https://192.xx.1.50<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, and proceed by providing the necessary details such as installation name, Node storage disks and tenant storage disks, and so on. Figure 10 shows the configuration screen.</p> <p><img src="/hpe-solutions-hpecp/assets/img/figure10.590f75a9.png" alt="Configuration screen"></p> <p><strong>Figure</strong> <strong>10.</strong> Configuration screen</p> <div class="custom-block tip"><p class="custom-block-title">NOTE</p> <p>The IP address in Figures 10, 12, 15, 18, 20, and 21 are for representation purposes only. Update the IP details as per your installation requirement. Licensing for new HPE Ezmeral Container Platform deployment is enforced via the HPE licensing mechanism. All new HPE Container Platform will be shipped unlicensed. On the initial login, the HPE Ezmeral Container Platform will redirect you to the <strong>License</strong> tab of the Settings screen. For more information, see <a href="http://docs.bluedata.com/50_license-tab" target="_blank" rel="noopener noreferrer">License Tab<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. The Controller host must always be installed without a license. However, licensing limits the number of Worker CPU cores that can be installed for the HPE Ezmeral Container Platform deployment. Adding a new worker host without sufficient available licensed cores will place that worker host in the unlicensed state.</p></div> <h4 id="phase-5-logging-in-to-hpe-ezmeral-container-platform"><a href="#phase-5-logging-in-to-hpe-ezmeral-container-platform" class="header-anchor">#</a> Phase 5 - Logging in to HPE Ezmeral Container Platform</h4> <p>Login to the HPE Ezmeral Container Platform. The default Username is &quot;admin&quot; and Password is &quot;admin123&quot;. Figure 11 shows the login screen of HPE Ezmeral Container Platform.</p> <p><img src="/hpe-solutions-hpecp/assets/img/figure11.96265d7b.png" alt="Login screen of HPE Ezmeral Container Platform"></p> <p><strong>Figure</strong> <strong>11.</strong> Login screen of HPE Ezmeral Container Platform</p> <p>For more details, see <a href="http://docs.bluedata.com/#50_launching-and-logging-in" target="_blank" rel="noopener noreferrer">Launching and Logging In<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <h2 id="platform-high-availability-setup"><a href="#platform-high-availability-setup" class="header-anchor">#</a> Platform High Availability setup</h2> <p>The HPE Ezmeral Container Platform control plane supports platform-level high availability functionality that protects HPE Ezmeral Container Platform against the failure of the Controller host. Platform-level high availability requires designating two Worker hosts such as Shadow Controller and Arbiter, respectively. If the Controller host fails, then the HPE Ezmeral Container Platform will failover to the Shadow Controller host within two or three minutes approximately. A warning message <strong>&quot;System is configured with HA. Cluster is currently in a degraded state. Click here to reload the page&quot;</strong> will appear at the top of the HPE Ezmeral Container Platform screen. You may need to login back to HPE Ezmeral Container Platform if this occurs.</p> <p>Each host in the HPE Ezmeral Container Platform deployment has its own IP address. If the Controller host fails, then attempting to access the Shadow Controller host using the same IP address will fail. Similarly, accessing the Shadow Controller host using that host's IP address will fail once the Controller host recovers. To avoid this problem, specify a cluster IP address that is bonded to the node, acting as the Controller host, and then login to HPE Ezmeral Container Platform using that cluster IP address. HPE Ezmeral Container Platform will automatically connect you to the Controller host (if HPE Ezmeral Container Platform runs normally) or to the Shadow Controller host with a warning message (if the Controller host has failed and triggered the high availability protection).</p> <p>For more information, see <a href="http://docs.bluedata.com/50_high-availability" target="_blank" rel="noopener noreferrer">http://docs.bluedata.com/50_high-availability<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <h3 id="add-epic-hosts-worker-node"><a href="#add-epic-hosts-worker-node" class="header-anchor">#</a> Add EPIC Hosts - Worker node</h3> <ol><li><p>Login to HPE Ezmeral Container Platform web interface. Navigate to EPIC drop-down on the left pane. Click hosts and add worker hosts as shown in Figure 12. Figure 12 shows how to add worker hosts on the HPE Ezmeral Container Platform.</p> <p><img src="/hpe-solutions-hpecp/assets/img/figure12.ccedad3b.png" alt="Adding worker hosts on HPE Ezmeral Container Platform"></p> <p><strong>Figure</strong> <strong>12.</strong> Adding worker hosts on HPE Ezmeral Container Platform</p> <div class="custom-block tip"><p class="custom-block-title">NOTE</p> <p>The IP address in Figures 12, 15, 18, 20, and 21 are for representation only. Update the IP details as per your installation requirement.</p></div></li> <li><p>Select the hard drives on the Worker host that will be used by HPE Ezmeral Container Platform.</p></li> <li><p>Place HPE Ezmeral Container Platform in Lockdown mode. Figure 13 depicts shows how to put the HPE Ezmeral Container Platform in lockdown mode.</p> <p><img src="/hpe-solutions-hpecp/assets/img/figure13.1df4dc8c.png" alt="HPE Ezmeral Container Platform in Lockdown mode"></p> <p><strong>Figure</strong> <strong>13</strong>. HPE Ezmeral Container Platform in lockdown mode</p></li> <li><p>Install the host(s) as HPE Ezmeral Container Platform workers. For more information on HPE Ezmeral Container Platform workers, see [Step 6: Add the Host(s) as Worker(s)]. HPE Ezmeral Container Platform will validate the number of CPU cores in the host(s) that do not exceed the licensed maximum, before proceeding with the installation (and displaying the green <strong>Installing</strong> bar for the new host(s)). Figure 14 depicts the installation status after adding new host on HPE Ezmeral Container Platform.</p> <p><img src="/hpe-solutions-hpecp/assets/img/figure14.30e67b31.png" alt="Installation status after adding the new host on HPE Ezmeral Container Platform"></p> <p><strong>Figure</strong> <strong>14</strong>. Installation status after adding the new host on HPE Ezmeral Container Platform</p></li> <li><p>Exit Lockdown mode, and then validate that the new worker has been correctly added and is functioning properly.</p></li></ol> <h3 id="configure-ha"><a href="#configure-ha" class="header-anchor">#</a> Configure HA</h3> <p>Configuring high availability required the platform to be in site lock down mode.</p> <p>After successfully adding worker hosts to the HPE Ezmeral Container Platform, go to GLOBAL SETTINGS drop-down. Click <strong>Controllers</strong> and select the <strong>Enable HA</strong> checkbox. Provide the Cluster IP, Cluster Name, Shadow Controller, and Arbiter Node. Click <strong>Submit</strong>. Figure 15 depicts how to enable HA of the controller on HPE Ezmeral Container Platform.</p> <p><img src="/hpe-solutions-hpecp/assets/img/figure15.57fa1db1.png" alt="Enable HA checkbox of the controller"></p> <p><strong>Figure</strong> <strong>15.</strong> Enable HA checkbox of the controller</p> <p>After successful configuration of HA, you will be asked to login to HPE Ezmeral Container Platform using the new cluster name. Figure 16 depicts the login to HPE Ezmeral Container Platform with the new cluster name.</p> <p><img src="/hpe-solutions-hpecp/assets/img/figure16.4ac7526a.png" alt="Login to HPE Ezmeral Container Platform with the new cluster name"></p> <p><strong>Figure</strong> <strong>16.</strong> Login to HPE Ezmeral Container Platform with the new cluster name</p> <h2 id="gateway-host"><a href="#gateway-host" class="header-anchor">#</a> Gateway Host</h2> <p>Login to HPE Ezmeral Container Platform web interface. Navigate to GLOBAL SETTINGS drop- down on the left pane. Click <strong>Gateway LB</strong> and add gateway server(s). Provide the IP List, Hostname, and Password. Click <strong>Add Gateway</strong>. Figure 17 depicts the addition of Gateway LB.</p> <p><img src="/hpe-solutions-hpecp/assets/img/figure17.49283da9.png" alt="Addition of Gateway LB"></p> <p><strong>Figure</strong> <strong>17.</strong> Addition of Gateway LB</p> <p>Gateway server addition requires the HPE Ezmeral Container Platform to be in site lock down mode. So, enable site lockdown before the addition of Gateway LB. Ensure that you disable it after it is done. See Figure 13 for enabling site lockdown.</p> <h3 id="gateway-host-high-availability"><a href="#gateway-host-high-availability" class="header-anchor">#</a> Gateway host high availability</h3> <p>Add multiple gateway server(s) as Gateway LB as shown in Figure18 and map these Gateway host IP addresses to a single host name that adds redundancy for Gateway hosts. After this is done, then either the DNS server or an external load balancer will load-balance requests to the hostname among all the Gateway hosts on a round-robin basis. This ensures that there is no single point of failure for the Gateway host. Figure 18 depicts how to add Gateways and see their status.</p> <p><img src="/hpe-solutions-hpecp/assets/img/figure18.cde80087.png" alt="Adding Gateway and seeing status"></p> <p><strong>Figure</strong> <strong>18.</strong> Adding Gateway and their status</p> <p>Gateway servers map the services running in virtual nodes or containers to ports and balance service load as described in [Gateway Hosts] and [Load Balancing].</p> <p>To add one or more Gateway worker host(s) to your HPE Container Platform deployment, you must specify a hostname in the <strong>Hostname</strong> field. If you specify one hostname for more than one Gateway IP address, then either the DNS server or external load balancer will load-balance requests to the hostname among all the Gateway hosts on a round-robin basis. Example: If three Gateway hosts are sharing a hostname, then Users 1-3 will access virtual nodes via Hosts 1-3, respectively, User 4 will access virtual node using Host 1, and so on. You may add additional Gateway host(s) to an existing set at any time by specifying the IP address(es) of the Gateway host(s) you are adding and then enter an existing Gateway hostname. You can use Gateway hostnames in the following ways:</p> <ul><li><p>Configure the Gateway hostname in the corporate DNS server to resolve the IP address(es) of the Gateway host(s).</p></li> <li><p>Configure an external load balancer with rules to point traffic to the IP address (es) of the Gateway host(s). HPE Ezmeral Container Platform does not validate these rules.</p></li></ul> <div class="custom-block tip"><p class="custom-block-title">NOTE</p> <p>Ensure that you disable Site lockdown mode at this point.</p></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/hpe-solutions-hpecp/Worker-node-configuration/Worker-node-configuration.html" class="prev">
        Worker node configuration
      </a></span> <span class="next"><a href="/hpe-solutions-hpecp/Deploying Kubernetes cluster/Deploying Kubernetes cluster.html">
        Deploying Kubernetes cluster
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/hpe-solutions-hpecp/assets/js/app.da8e75f2.js" defer></script><script src="/hpe-solutions-hpecp/assets/js/2.af88cad6.js" defer></script><script src="/hpe-solutions-hpecp/assets/js/3.e3454261.js" defer></script>
  </body>
</html>
