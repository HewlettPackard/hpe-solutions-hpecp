<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Physical environment configuration | HPE Deployment Guide for HPE Ezmeral Container Platform on HPE Synergy </title>
    <meta name="description" content="">
    <meta name="generator" content="VuePress 1.4.0">
    
    
    <link rel="preload" href="/hpe-solutions-hpecp/assets/css/0.styles.174cdb16.css" as="style"><link rel="preload" href="/hpe-solutions-hpecp/assets/js/app.da8e75f2.js" as="script"><link rel="preload" href="/hpe-solutions-hpecp/assets/js/2.af88cad6.js" as="script"><link rel="preload" href="/hpe-solutions-hpecp/assets/js/7.d6beb650.js" as="script"><link rel="prefetch" href="/hpe-solutions-hpecp/assets/js/10.ed8d595c.js"><link rel="prefetch" href="/hpe-solutions-hpecp/assets/js/11.87136d49.js"><link rel="prefetch" href="/hpe-solutions-hpecp/assets/js/12.63b66f14.js"><link rel="prefetch" href="/hpe-solutions-hpecp/assets/js/13.077301ba.js"><link rel="prefetch" href="/hpe-solutions-hpecp/assets/js/14.fa0ee6fc.js"><link rel="prefetch" href="/hpe-solutions-hpecp/assets/js/15.1aec7f3c.js"><link rel="prefetch" href="/hpe-solutions-hpecp/assets/js/16.8d3ec496.js"><link rel="prefetch" href="/hpe-solutions-hpecp/assets/js/17.9efce6e0.js"><link rel="prefetch" href="/hpe-solutions-hpecp/assets/js/18.dea77411.js"><link rel="prefetch" href="/hpe-solutions-hpecp/assets/js/19.dacf1900.js"><link rel="prefetch" href="/hpe-solutions-hpecp/assets/js/20.d3a51bed.js"><link rel="prefetch" href="/hpe-solutions-hpecp/assets/js/3.e3454261.js"><link rel="prefetch" href="/hpe-solutions-hpecp/assets/js/4.1d75cca5.js"><link rel="prefetch" href="/hpe-solutions-hpecp/assets/js/5.5aa796fc.js"><link rel="prefetch" href="/hpe-solutions-hpecp/assets/js/6.7cd37544.js"><link rel="prefetch" href="/hpe-solutions-hpecp/assets/js/8.9b5f9eef.js"><link rel="prefetch" href="/hpe-solutions-hpecp/assets/js/9.924336ee.js">
    <link rel="stylesheet" href="/hpe-solutions-hpecp/assets/css/0.styles.174cdb16.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/hpe-solutions-hpecp/" class="home-link router-link-active"><!----> <span class="site-name">HPE Deployment Guide for HPE Ezmeral Container Platform on HPE Synergy </span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/hpe-solutions-hpecp/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="http://www.hpe.com/info/ra" target="_blank" rel="noopener noreferrer" class="nav-link external">
  RA Library
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/hpe-solutions-hpecp/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="http://www.hpe.com/info/ra" target="_blank" rel="noopener noreferrer" class="nav-link external">
  RA Library
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/hpe-solutions-hpecp/Introduction/Introduction.html" class="sidebar-link">Introduction</a></li><li><a href="/hpe-solutions-hpecp/Solution overview/Solution overview.html" class="sidebar-link">Solution overview</a></li><li><a href="/hpe-solutions-hpecp/Solution components/Solution components.html" class="sidebar-link">Solution components</a></li><li><a href="/hpe-solutions-hpecp/Physical environment configuration/Physical environment configuration.html" class="active sidebar-link">Physical environment configuration</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/hpe-solutions-hpecp/Physical environment configuration/Physical environment configuration.html#cabling-the-hpe-synergy-12000-frames-and-hpe-virtual-connect-40gb-se-f8-modules-for-hpe-synergy" class="sidebar-link">Cabling the HPE Synergy 12000 Frames and HPE Virtual Connect 40Gb SE F8 Modules for HPE Synergy</a></li><li class="sidebar-sub-header"><a href="/hpe-solutions-hpecp/Physical environment configuration/Physical environment configuration.html#configuring-the-solution-switching" class="sidebar-link">Configuring the solution switching</a></li><li class="sidebar-sub-header"><a href="/hpe-solutions-hpecp/Physical environment configuration/Physical environment configuration.html#hpe-synergy-480-gen10-compute-modules" class="sidebar-link">HPE Synergy 480 Gen10 Compute Modules</a></li><li class="sidebar-sub-header"><a href="/hpe-solutions-hpecp/Physical environment configuration/Physical environment configuration.html#hpe-synergy-composer-2" class="sidebar-link">HPE Synergy Composer 2</a></li><li class="sidebar-sub-header"><a href="/hpe-solutions-hpecp/Physical environment configuration/Physical environment configuration.html#solution-storage" class="sidebar-link">Solution storage</a></li></ul></li><li><a href="/hpe-solutions-hpecp/Worker-node-configuration/Worker-node-configuration.html" class="sidebar-link">Worker node configuration</a></li><li><a href="/hpe-solutions-hpecp/Deploy HPE Ezmeral Container Platform/Deploy HPE Ezmeral Container Platform.html" class="sidebar-link">Deploy HPE Ezmeral Container Platform</a></li><li><a href="/hpe-solutions-hpecp/Deploying Kubernetes cluster/Deploying Kubernetes cluster.html" class="sidebar-link">Deploying Kubernetes cluster</a></li><li><a href="/hpe-solutions-hpecp/Securing HPE Ezmeral Container Platform using Sysdig Secure and Sysdig Monitor/Securing HPE Ezmeral Container Platform using Sysdig Secure and Sysdig Monitor.html" class="sidebar-link">Securing HPE Ezmeral Container Platform using Sysdig Secure and Sysdig Monitor</a></li><li><a href="/hpe-solutions-hpecp/Validate HPE Ezmeral Container Platform deployment/Validate HPE Ezmeral Container Platform deployment.html" class="sidebar-link">Validate HPE Ezmeral Container Platform deployment</a></li><li><a href="/hpe-solutions-hpecp/HPE CSI driver installation/HPE CSI driver installation.html" class="sidebar-link">HPE CSI driver installation</a></li><li><a href="/hpe-solutions-hpecp/Configuration/Configuration.html" class="sidebar-link">Configuration</a></li><li><a href="/hpe-solutions-hpecp/Deploying WordPress application using Nimble persistent volume/Deploying WordPress application using Nimble persistent volume.html" class="sidebar-link">Deploying WordPress application using Nimble persistent volume</a></li><li><a href="/hpe-solutions-hpecp/Resources and additional links/Resources and additional links.html" class="sidebar-link">Resources and additional links</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="physical-environment-configuration"><a href="#physical-environment-configuration" class="header-anchor">#</a> Physical environment configuration</h1> <p>This section outlines the steps to be performed to configure the physical environment used in this solution.</p> <h2 id="cabling-the-hpe-synergy-12000-frames-and-hpe-virtual-connect-40gb-se-f8-modules-for-hpe-synergy"><a href="#cabling-the-hpe-synergy-12000-frames-and-hpe-virtual-connect-40gb-se-f8-modules-for-hpe-synergy" class="header-anchor">#</a> Cabling the HPE Synergy 12000 Frames and HPE Virtual Connect 40Gb SE F8 Modules for HPE Synergy</h2> <p>This section shows the physical cabling between frames, Virtual Connect modules, and solution switching. It is intended to provide an understanding of how the infrastructure was interconnected during the testing and to serve as a guide on which the installation user can base their configuration.</p> <p>Figure 5 shows the cabling of the HPE Synergy Interconnects, HPE Synergy Frame Management, and Intelligent Resilient Fabric (IRF) connections. These connections handle east-west network communication as well as management traffic within the solution.</p> <p><img src="/hpe-solutions-hpecp/assets/img/figure5.a9757903.png" alt=""></p> <p><strong>Figure</strong> <strong>5.</strong> Cabling of the management and inter-frame communication links within the solution</p> <p>Figure 6 shows the cabling of HPE Synergy Frames to the network switches. The specific network contained within the Bridge-Aggregation Groups (BAGG) are described in detail, later in this document. At the lowest level, there are four (4) 40GbE connections dedicated to carry redundant, production network traffic to the first layer switch where it is further distributed.</p> <p><img src="/hpe-solutions-hpecp/assets/img/figure6.e1995ae4.png" alt=""></p> <p><strong>Figure</strong> <strong>6.</strong> Cabling of the HPE Synergy Interconnects to the HPE FlexFabric 5945 switches</p> <p>Table 5 explains the cabling of the Virtual Connect interconnect modules to the HPE FlexFabric 5945 switching.</p> <p><strong>Table 5.</strong> Network used in this solution.</p> <table><thead><tr><th>Uplink Set</th> <th>Synergy Source</th> <th>Switch Destination</th></tr></thead> <tbody><tr><td>Network</td> <td>Enclosure 1 Port Q3</td> <td>FortyGigE1/1/1</td></tr> <tr><td></td> <td>Enclosure 1 Port Q4</td> <td>FortyGigE2/1/1</td></tr> <tr><td></td> <td>Enclosure 2 Port Q3</td> <td>FortyGigE1/1/2</td></tr> <tr><td></td> <td>Enclosure 2 Port Q4</td> <td>FortyGigE2/1/2</td></tr> <tr><td>iSCSI_A_network</td> <td>Enclosure 1 Port Q5</td> <td>FortyGigE1/1/5</td></tr> <tr><td></td> <td>Enclosure 1 Port Q6</td> <td>FortyGigE1/1/6</td></tr> <tr><td>iSCSI_B_network</td> <td>Enclosure 2 Port Q5</td> <td>FortyGigE2/1/5</td></tr> <tr><td></td> <td>Enclosure 2 Port Q6</td> <td>FortyGigE2/1/6</td></tr></tbody></table> <h2 id="configuring-the-solution-switching"><a href="#configuring-the-solution-switching" class="header-anchor">#</a> Configuring the solution switching</h2> <p>The solution described in this document utilized HPE FlexFabric 5945 switches. The HPE FlexFabric 5945 switches are configured according to the configuration parameters found later in this section. Individual port configuration is also described in this section. The switches should be configured with an HPE Intelligent Resilient Framework (IRF). To understand the process of configuring IRF, refer to the HPE FlexFabric 5945 Switch Series Installation Guide at <a href="https://support.hpe.com/hpsc/doc/public/display?sp4ts.oid=null&amp;docLocale=en_US&amp;docId=emr_na-c05212026" target="_blank" rel="noopener noreferrer">https://support.hpe.com/hpsc/doc/public/display?sp4ts.oid=null&amp;docLocale=en_US&amp;docId=emr_na-c05212026<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. This guide may also be used to understand the initial installation of switching, creation of user accounts, and access methods. The remainder of this section is built with the assumption that the switch has been installed, configured for IRF, hardened, and is accessible over SSH.</p> <div class="custom-block tip"><p class="custom-block-title">NOTE</p> <p>The installation user might choose to utilize end of row switching to reduce switch and port counts in the context of the solution. If you follow end of row switching as the approach, then this section should be used as a guidance on how to route network traffic outside of the HPE Synergy Frames.</p></div> <h3 id="physical-cabling"><a href="#physical-cabling" class="header-anchor">#</a> Physical cabling</h3> <p>Table 6 represents mapping of source ports to ports on the HPE FlexFabric 5945 switches.</p> <p><strong>Table 6.</strong> HPE FlexFabric 5945 port map</p> <table><thead><tr><th>Source Port</th> <th>Switch Port</th></tr></thead> <tbody><tr><td>Nimble Management Port Eth1</td> <td>TenGigE1/2/17</td></tr> <tr><td>Nimble Controller A TG1</td> <td>TenGigE1/2/13</td></tr> <tr><td>Nimble Controller A TG2</td> <td>TenGigE2/2/13</td></tr> <tr><td>Nimble Controller B TG1</td> <td>TenGigE1/2/14</td></tr> <tr><td>Nimble Controller B TG1</td> <td>TenGigE2/2/14</td></tr> <tr><td>Nimble Replication Port Eth2</td> <td>TenGigE1/2/15</td></tr> <tr><td>Virtual Connect Frame U30, Q3</td> <td>FortyGigE1/1/1</td></tr> <tr><td>Virtual Connect Frame U30, Q4</td> <td>FortyGigE2/1/1</td></tr> <tr><td>Virtual Connect Frame U30, Q5</td> <td>FortyGigE1/1/5</td></tr> <tr><td>Virtual Connect Frame U30, Q6</td> <td>FortyGigE1/1/6</td></tr> <tr><td>Virtual Connect Frame U40, Q3</td> <td>FortyGigE1/1/2</td></tr> <tr><td>Virtual Connect Frame U40, Q4</td> <td>FortyGigE2/1/2</td></tr> <tr><td>Virtual Connect Frame U40, Q5</td> <td>FortyGigE2/1/5</td></tr> <tr><td>Virtual Connect Frame U40, Q6</td> <td>FortyGigE2/1/6</td></tr> <tr><td>To Upstream Switching</td> <td>Customer Choice</td></tr></tbody></table> <p>Hewlett Packard Enterprise recommends that the installation user logs on to the switch, post-configuration and provide a description for each of these ports.</p> <h3 id="network-definition"><a href="#network-definition" class="header-anchor">#</a> Network definition</h3> <p>There are multiple networks defined at the switch layer in this solution:</p> <ul><li><p><strong>Management Network --</strong> This network facilitates the management of hardware and software interfaced by IT.</p></li> <li><p><strong>Data Center Network</strong> -- This network carries traffic from the overlay network used by the pods to external consumers of pod deployed services.</p></li> <li><p><strong>iSCSI A Network --</strong> This network facilitates iSCSI storage connectivity.</p></li> <li><p><strong>iSCSI B Network</strong> -- This network facilitates iSCSI storage connectivity.</p></li></ul> <p>Table 7 defines the VLANs configured using HPE Synergy Composer in the creation of this solution. This network should be defined at both the first layer switch and within the composer. This solution utilizes unique VLANs for the data center and solution management segments. Actual VLANs and network count will be determined by the requirements of your production environment.</p> <p><strong>Table 7.</strong> Networks used in this solution.</p> <table><thead><tr><th><strong>Network Function</strong></th> <th><strong>VLAN Number</strong></th> <th><strong>Bridge Aggregation Group</strong></th></tr></thead> <tbody><tr><td>Solution_Management</td> <td>1193</td> <td>111</td></tr> <tr><td>Data_Center</td> <td>2193</td> <td>111</td></tr> <tr><td>iSCSI_vLAN_A</td> <td>3193</td> <td>112</td></tr> <tr><td>iSCSI_ vLAN_B</td> <td>3194</td> <td>113</td></tr></tbody></table> <h3 id="configure-vlan"><a href="#configure-vlan" class="header-anchor">#</a> Configure VLAN</h3> <p>This section details the steps required to configure a VLAN.</p> <ol><li>To add these networks to the switch, logon to the switch console over SSH and run the following commands.</li></ol> <blockquote><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&gt;</span> sys
<span class="token operator">&gt;</span> vlan <span class="token number">1193</span> <span class="token number">2193</span> <span class="token number">3193</span> <span class="token number">3194</span>
</code></pre></div></blockquote> <ol start="2"><li>For each of these VLANs, perform the following steps.</li></ol> <blockquote><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&gt;</span> interface vlan-interface <span class="token comment">####</span>
<span class="token operator">&gt;</span> name VLAN Name per table above
<span class="token operator">&gt;</span> description Add text that describes the purpose of the VLAN
<span class="token operator">&gt;</span> quit
</code></pre></div></blockquote> <div class="custom-block tip"><p class="custom-block-title">NOTE</p> <p>Hewlett Packard Enterprise strongly recommends configuring a dummy VLAN on the switches and assign unused ports to that VLAN.</p></div> <ol start="3"><li>The switches should be configured with a bridge aggregation group (BAGG) for the different links to the HPE Synergy Frame connections. To configure the BAGG and ports as described in Table 5, run the following commands.</li></ol> <blockquote><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&gt;</span> interface Bridge-Aggregation111
<span class="token operator">&gt;</span> link-aggregation mode dynamic
<span class="token operator">&gt;</span> description <span class="token operator">&lt;</span>FrameNameU3<span class="token operator"><span class="token file-descriptor important">0</span>&gt;</span>-ICM
<span class="token operator">&gt;</span> quit
<span class="token operator">&gt;</span> interface range name <span class="token operator">&lt;</span>FrameNameU3<span class="token operator"><span class="token file-descriptor important">0</span>&gt;</span>-ICM interface Bridge-Aggregation111
<span class="token operator">&gt;</span> quit
<span class="token operator">&gt;</span> interface range FortyGigE <span class="token number">1</span>/1/1 to FortyGigE <span class="token number">1</span>/1/2 FortyGigE <span class="token number">2</span>/1/1 to FortyGigE <span class="token number">2</span>/1/2
<span class="token operator">&gt;</span> port link-aggregation group <span class="token number">111</span>
<span class="token operator">&gt;</span> quit
<span class="token operator">&gt;</span> interface range name <span class="token operator">&lt;</span>FrameNameU3<span class="token operator"><span class="token file-descriptor important">0</span>&gt;</span>-ICM
<span class="token operator">&gt;</span> port link-type trunk
<span class="token operator">&gt;</span> undo port trunk permit vlan <span class="token number">1</span>
<span class="token operator">&gt;</span> port trunk permit vlan <span class="token number">1193</span> <span class="token number">2193</span>
<span class="token operator">&gt;</span> quit
</code></pre></div></blockquote> <ol start="4"><li>For the VLANs that will carry iSCSI traffic, run the following commands.</li></ol> <blockquote><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&gt;</span> interface Bridge-Aggregation112
<span class="token operator">&gt;</span> link-aggregation mode dynamic
<span class="token operator">&gt;</span> description <span class="token operator">&lt;</span>FrameNameU3<span class="token operator"><span class="token file-descriptor important">0</span>&gt;</span>-ICM <span class="token number">3</span>
<span class="token operator">&gt;</span> quit
<span class="token operator">&gt;</span> interface range FortyGigE <span class="token number">1</span>/1/5 to FortyGigE <span class="token number">1</span>/1/6
<span class="token operator">&gt;</span> port link-aggregation group <span class="token number">112</span>
<span class="token operator">&gt;</span> quit
<span class="token operator">&gt;</span> interface Bridge-Aggregation <span class="token number">112</span>
<span class="token operator">&gt;</span> port link-type trunk
<span class="token operator">&gt;</span> undo port trunk permit vlan <span class="token number">1</span>
<span class="token operator">&gt;</span> port trunk permit vlan <span class="token number">3193</span>
<span class="token operator">&gt;</span> quit
<span class="token operator">&gt;</span> interface Bridge-Aggregation113
<span class="token operator">&gt;</span> link-aggregation mode dynamic
<span class="token operator">&gt;</span> description <span class="token operator">&lt;</span>FrameNameU3<span class="token operator"><span class="token file-descriptor important">0</span>&gt;</span>-ICM <span class="token number">6</span>
<span class="token operator">&gt;</span> quit
<span class="token operator">&gt;</span> interface range FortyGigE <span class="token number">2</span>/1/5 to FortyGigE <span class="token number">2</span>/1/6
<span class="token operator">&gt;</span> port link-aggregation group <span class="token number">113</span>
<span class="token operator">&gt;</span> quit
<span class="token operator">&gt;</span> interface Bridge-Aggregation <span class="token number">113</span>
<span class="token operator">&gt;</span> port link-type trunk
<span class="token operator">&gt;</span> undo port trunk permit vlan <span class="token number">1</span>
<span class="token operator">&gt;</span> port trunk permit vlan <span class="token number">3194</span>
<span class="token operator">&gt;</span> quit
</code></pre></div></blockquote> <ol start="5"><li>Assign the network ports that will connect the various HPE Nimble Storage interfaces with the switches.</li></ol> <blockquote><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&gt;</span> interface range TenGigE <span class="token number">1</span>/2/13 to TenGigE <span class="token number">1</span>/2/14
<span class="token operator">&gt;</span> port access vlan <span class="token number">3193</span>
<span class="token operator">&gt;</span> quit
<span class="token operator">&gt;</span> interface range TenGigE <span class="token number">2</span>/2/13 to TenGigE <span class="token number">2</span>/2/14
<span class="token operator">&gt;</span> port access vlan <span class="token number">3194</span>
<span class="token operator">&gt;</span> quit
</code></pre></div></blockquote> <ol start="6"><li>Place the HPE Nimble Storage management interface into the management VLAN.</li></ol> <blockquote><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&gt;</span> interface TenGigE <span class="token number">1</span>/2/17
<span class="token operator">&gt;</span> port access vlan <span class="token number">1193</span>
<span class="token operator">&gt;</span> quit
</code></pre></div></blockquote> <ol start="7"><li>Place the replication traffic for the VLAN into the default VLAN or a VLAN of your choice.</li></ol> <blockquote><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&gt;</span> interface TenGigE <span class="token number">1</span>/2/15
<span class="token operator">&gt;</span> port access vlan <span class="token number">1</span>
<span class="token operator">&gt;</span> quit
</code></pre></div></blockquote> <ol start="8"><li>After the configuration of the switches is complete, save the state and apply it by typing <strong>save</strong> and follow the resulting prompts.</li></ol> <h2 id="hpe-synergy-480-gen10-compute-modules"><a href="#hpe-synergy-480-gen10-compute-modules" class="header-anchor">#</a> HPE Synergy 480 Gen10 Compute Modules</h2> <p>This section describes the connectivity of the HPE Synergy 480 Gen10 Compute Modules used in the creation of this solution. The HPE Synergy 480 Gen10 Compute Modules, regardless of function, were all configured identically. Table 8 describes the host configuration tested for this solution. Server configuration should be based on customer needs, and the configuration used in the creation of this solution might not align with the requirements of any given production implementation.</p> <p><strong>Table 8.</strong> Host configuration</p> <table><thead><tr><th><strong>Component</strong></th> <th><strong>Quantity</strong></th></tr></thead> <tbody><tr><td>HPE Synergy 480/660 Gen10 Intel Xeon-Gold 6130 (2.1GHz/16-core/125W) FIO Processor Kit</td> <td>2 per server</td></tr> <tr><td>HPE 8GB (1x 8GB) Single Rank x8 DDR4-2666 CAS-19-19 Registered Smart Memory Kit</td> <td>20 per server</td></tr> <tr><td>HPE 16GB (1x 16GB) Single Rank x4 DDR4-2666 CAS-19-19 Registered Smart Memory Kit</td> <td>4 per server</td></tr> <tr><td>HPE Synergy 3820C 10/20Gb Converged Network Adapter</td> <td>1 per server</td></tr> <tr><td>HPE Smart Array P204i-c SR Gen10 12G SAS controller</td> <td>1 per server</td></tr> <tr><td>HPE 1.92TB SATA 6GB Mixed Use SFF (2.5in) 3yr Warranty Digitally Signed Firmware SSD</td> <td>2 per management host</td></tr></tbody></table> <h2 id="hpe-synergy-composer-2"><a href="#hpe-synergy-composer-2" class="header-anchor">#</a> HPE Synergy Composer 2</h2> <p>At the core of the management of the HPE Synergy environment is HPE Synergy Composer 2. A pair of HPE Synergy Composers are deployed across frames to provide redundant management of the environment for both initial deployment and changes over the lifecycle of the solution. HPE Synergy Composer 2 is used to configure the environment prior to the deployment of the operating systems and applications.</p> <p>This section guides the installation user through the process of installing and configuring the HPE Synergy Composer.</p> <h3 id="configure-the-hpe-synergy-composer-via-vnc"><a href="#configure-the-hpe-synergy-composer-via-vnc" class="header-anchor">#</a> Configure the HPE Synergy Composer via VNC</h3> <p>To configure HPE Synergy Composer with the user laptop, follow these steps:</p> <ol><li><p>Configure the laptop Ethernet port to the IP address 192.168.10.2/24. No gateway is required.</p></li> <li><p>Use a CAT5e cable to connect the computer Ethernet port to laptop port on the front panel module of HPE Synergy Composer.</p></li> <li><p>Use a web browser to access the HPE Synergy console. Start a new browser session and enter <a href="http://192.168.10.1:5800" target="_blank" rel="noopener noreferrer">http://192.168.10.1:5800<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p></li> <li><p>Click <strong>Connect</strong> to start HPE OneView for Synergy from the HPE Synergy console.</p></li> <li><p>Click <strong>Hardware Setup</strong> to connect with <strong>Installation Technician</strong> user privileges.</p></li> <li><p>In the Appliance Network dialog box, fill in the following information.</p> <p>a.  Appliance host name: Enter <strong>a fully qualified name of the HPE Synergy Composer.</strong></p> <p>b.  Address assignment: <strong>Manual</strong></p> <p>c.  IP address: <strong>Enter an IP address on the management network</strong>.</p> <p>d.  Subnet mask or CIDR: <strong>Enter the subnet mask of the management network</strong>.</p> <p>e.  Gateway address: <strong>Enter the gateway for the management network</strong>.</p> <p>f.  Maintenance IP address 1: <strong>Enter a primary maintenance IP address on the management</strong> <strong>network</strong>.</p> <p>g.  Maintenance IP address 2: <strong>Enter a secondary maintenance IP</strong> <strong>address on the management network.</strong></p> <p>h.  Preferred DNS server: <strong>Enter the DNS server.</strong></p> <p>i.  IPv6 Address assignment: <strong>Unassign</strong></p></li> <li><p>Click <strong>OK</strong>.</p></li> <li><p>When the hardware discovery process is complete, all HPE Synergy hardware including the Frames, Composer modules, Frame Link modules, Interconnect modules, Compute modules, and storage modules must be discovered and claimed by HPE OneView for Synergy.</p></li> <li><p>Review and correct any issues listed in the hardware setup checklist. The HPE Synergy 12000 Frame Setup and Installation Guide is available at <a href="https://psnow.ext.hpe.com/doc/c05348240" target="_blank" rel="noopener noreferrer">https://psnow.ext.hpe.com/doc/c05348240<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> provides resolution for troubleshooting steps of common issues during hardware setup.</p></li> <li><p>Navigate to <strong>OneView</strong> -&gt; <strong>Settings</strong> and then click <strong>Appliance</strong>. Verify that the active and standby appliances show a status of <strong>Connected</strong>.</p></li></ol> <h3 id="configure-appliance-credentials"><a href="#configure-appliance-credentials" class="header-anchor">#</a> Configure appliance credentials</h3> <ol><li><p>Login to HPE OneView for Synergy Web Administration portal. Review and accept the License Agreement.</p></li> <li><p>On the HPE OneView Support Dialog box, verify that Authorized Service has a setting of <strong>Enabled</strong>. Click <strong>OK</strong>.</p></li> <li><p>Login as <strong>Administrator</strong> with default password <strong>admin</strong>. Set the new password to &lt;&lt;composer_administrator_password&gt;&gt; and click <strong>Ok</strong>.</p></li></ol> <h3 id="configure-solution-firmware"><a href="#configure-solution-firmware" class="header-anchor">#</a> Configure solution firmware</h3> <p>This solution adheres to the firmware recipe specified with the HPE Converged Solutions 750 specification which can be found at CS750 Firmware and Software Compatibility Matrix. The solution used the latest firmware recipe available as of March of 2020 including HPE OneView for Synergy 5.0.</p> <p>HPE Synergy Firmware is regulated according to a given HPE Synergy software release, which includes the software version of HPE OneView for Synergy on HPE Synergy Composer and the HPE Synergy Custom SPP firmware bundle for all other HPE Synergy components. At this stage, update the HPE Synergy Composer. The guided setup takes care of the firmware updates to the remaining HPE Synergy components.</p> <h3 id="solution-configuration"><a href="#solution-configuration" class="header-anchor">#</a> Solution configuration</h3> <p>The installation user should utilize the Synergy guided setup to complete the following solution configuration details. Perform all the steps of guided setup that are relevant to the environment. Skip steps that are irrelevant to your setup.</p> <ol><li><p>On the upper right-hand corner, click Guided setup -&gt; First step, to begin the Guided setup.</p></li> <li><p>Select the appropriate check boxes based on your solution under the Customize OneView Experience heading.</p></li> <li><p>Click &lt;&lt; to see the list of recommended appliance configuration steps based on the previous selection.</p></li> <li><p>Proceed through the Guided setup process following the recommendations outlined in the subsequent sections. Place a check mark in the complete box for each step that is successfully completed.</p></li></ol> <h4 id="create-additional-users"><a href="#create-additional-users" class="header-anchor">#</a> Create additional users</h4> <p>Hewlett Packard Enterprise recommends that you create a read-only user and an administrator account with a different username other than administrator.</p> <h4 id="create-an-ip-pool-on-the-management-network"><a href="#create-an-ip-pool-on-the-management-network" class="header-anchor">#</a> Create an IP pool on the management network</h4> <p>Follow the guided setup to create an IP pool on the management network. This IP pool will provide IP addresses to management IPs, and HPE device iLOs within the solution. Ensure that the pool is enabled before proceeding.</p> <h4 id="configure-ethernet-networks"><a href="#configure-ethernet-networks" class="header-anchor">#</a> Configure Ethernet networks</h4> <p>As explained in the <a href="#network-definition">Network definition</a> section of this document, the solution utilizes four (4) network segments. Refer to the Create network section of the OneView Guided Setup wizard to define the network as shown in Table 9. Your VLAN values will generally differ. Table 9 describes the network defined within HPE Synergy Composer for this solution.</p> <p><strong>Table 9.</strong> Network defined within HPE Synergy Composer for this solution</p> <table><thead><tr><th>Network Name</th> <th>VLAN Number</th> <th>Purpose</th></tr></thead> <tbody><tr><td>Management</td> <td>Ethernet</td> <td>1193</td></tr> <tr><td>Data center</td> <td>Ethernet</td> <td>2193</td></tr> <tr><td>iSCSI_SAN_A</td> <td>Ethernet</td> <td>3193</td></tr> <tr><td>iSCSI_SAN_B</td> <td>Ethernet</td> <td>3194</td></tr></tbody></table> <p>The management network should be associated with the management network IP pool that is specified by the user. The installation user should create any additional required network for the solution.</p> <h4 id="create-logical-interconnect-groups"><a href="#create-logical-interconnect-groups" class="header-anchor">#</a> Create Logical Interconnect Groups</h4> <p>Within Composer, use the Guided Setup to create a Logical Interconnect Group (LIG) with three (3) uplink sets defined. For this solution, the uplink sets are named Network, iSCSI_SAN_A, and iSCSI_SAN_B. The uplink sets &quot;Network&quot; carries all other network defined for the solution. The iSCSI uplink sets carry the respective iSCSI VLANs. Table 5 defines the ports used to carry the uplink sets.</p> <h4 id="create-enclosure-group"><a href="#create-enclosure-group" class="header-anchor">#</a> Create Enclosure Group</h4> <ol><li><p>From the OneView Guided Setup, select Create <strong>enclosure group.</strong></p></li> <li><p>Provide a <strong>name</strong> and enter the <strong>number of frames</strong>.</p></li> <li><p>Select <strong>Use address pool</strong> and utilize the <strong>management pool</strong> defined earlier.</p></li> <li><p>Use the Logical Interconnect Group from the previous section in the creation of the Enclosure Group.</p></li> <li><p>Select <strong>Create</strong> when ready.</p></li></ol> <h4 id="create-logical-enclosure"><a href="#create-logical-enclosure" class="header-anchor">#</a> Create Logical Enclosure</h4> <p>Use the Guided Setup to create a logical enclosure to make use of all three (3) enclosures. Select the firmware you uploaded earlier as a baseline. It can take some time for the firmware to update across the solution stack. Select <strong>Actions</strong> and then <strong>Update</strong> <strong>Firmware</strong> to ensure that the firmware complies with the baseline. Click <strong>Cancel</strong> to exit.</p> <h2 id="solution-storage"><a href="#solution-storage" class="header-anchor">#</a> Solution storage</h2> <p>HPE Nimble Storage AF40 is used to provide persistent, block storage in this solution. The storage volume is provided from the HPE Nimble Storage array for Docker data to host the repository, to store container images, and also to provide persistent volume for applications.</p> <p>Figure 7 shows the cabling of the HPE Nimble Storage AF40 to the HPE switching utilized in this solution. Note that this diagram shows the storage and switching in the same rack to provide clarity. The switching resided in the HPE Synergy rack as implemented in this solution. The orange and purple wires in Figure 7 represent the separate iSCSI VLANs. This figure represents two HPE Nimble Storage arrays that were implemented to provide replication. In a real-world implementation, these arrays will be in separate physical locations (two separate data centers, separate buildings, separate sections of the same data center) to maximize redundancy and minimize failure points.</p> <p><img src="/hpe-solutions-hpecp/assets/img/figure7.d21d7e8c.png" alt=""></p> <p><strong>Figure</strong> <strong>7.</strong> Cabling of the HPE Nimble Storage arrays to the HPE FF 5945 switches</p> <div class="custom-block tip"><p class="custom-block-title">NOTE</p> <p>HPE Nimble Storage AF40 is also connected to the same top of rack switch mentioned in section <a href="#configuring-the-solution-switching">Configuring the solution switching</a>  of this document.</p></div> <h3 id="configuring-solution-storage"><a href="#configuring-solution-storage" class="header-anchor">#</a> Configuring solution storage</h3> <p>The HPE Synergy D3940 Storage Module provides SSDs consumed for Node Storage. HPE Ezmeral Data Fabric is a distributed file and object store from MapR that manages both structured and unstructured data. It provides the persistent volume for the container workload.</p> <p>Figure 8 describes the logical storage layout used in the solution. The HPE Synergy D3940 Storage Module provides SAS volume and JBOD. In this solution, JBOD is used.</p> <p>HPE Nimble Storage AF40 is used to provide persistent, block storage in this solution. The storage volume is provided from the HPE Nimble Storage array for Docker data, to host the repository to store container images, and also to provide persistent volumes for applications.</p> <p><img src="/hpe-solutions-hpecp/assets/img/figure8.8731e399.png" alt=""></p> <p><strong>Figure</strong> <strong>8.</strong> Logical storage layout within the solution</p> <p>Table 10 lists all volume used within the solution and highlights what storage provides the capacity and performance of each function.</p> <p><strong>Table 10.</strong> Volume used in this solution</p> <table><thead><tr><th>Volume/Disk Function</th> <th>Qty</th> <th>Size</th> <th>Source</th> <th>Hosts</th> <th>Shared/Dedicated</th></tr></thead> <tbody><tr><td>Node Storage</td> <td>3</td> <td>960GB</td> <td>HPE Synergy D3940 storage</td> <td>HPE Ezmeral Container Platform controller nodes</td> <td>dedicated</td></tr> <tr><td>HPE Ezmeral Data Fabric</td> <td>3</td> <td>960GB</td> <td>HPE Synergy D3940 storage</td> <td>HPE Ezmeral Container Platform shadow controller nodes</td> <td>dedicated</td></tr> <tr><td>Node Storage</td> <td>6</td> <td>960GB</td> <td>HPE Synergy D3940 storage</td> <td>HPE Ezmeral Container Platform compute node</td> <td>dedicated</td></tr> <tr><td>HPE Ezmeral Data Fabric</td> <td>6</td> <td>960GB</td> <td>HPE Synergy D3940 storage</td> <td>HPE Ezmeral Container Platform compute node</td> <td>dedicated</td></tr> <tr><td>Operating System</td> <td>11</td> <td>2 x 400GB configured as RAID 1</td> <td>Synergy Local Storage</td> <td>All nodes</td> <td>dedicated</td></tr></tbody></table> <p>The HPE Nimble Storage AF40 is used for mapping to the HPE FF 5945 switching as described in Table 11. The replication storage would be considered in the same fashion, but generally on separate switching in a separate physical location. All switch ports are configured as access ports. So, the VLANs are untagged (see <a href="#configuring-the-solution-switching">Configuring the solution switching</a>). The redundant array is implemented in a separate location with the same physical configuration.</p> <p>Table 11. HPE Nimble Storage AF40 port mapping</p> <table><thead><tr><th>HPE Nimble Storage AF40 Port</th> <th>VLAN Number</th> <th>Switch Port</th></tr></thead> <tbody><tr><td>Management Port Eth1, Controller A</td> <td>1193</td> <td>TenGigE1/2/17</td></tr> <tr><td>Management Port Eth1, Controller B</td> <td>1193</td> <td>TenGigE2/2/17</td></tr> <tr><td>Controller A TG1</td> <td>3193</td> <td>TenGigE1/2/13</td></tr> <tr><td>Controller A TG2</td> <td>3194</td> <td>TenGigE2/2/13</td></tr> <tr><td>Controller B TG1</td> <td>3193</td> <td>TenGigE1/2/14</td></tr> <tr><td>Controller B TG2</td> <td>3194</td> <td>TenGigE2/2/14</td></tr> <tr><td>Replication Port Eth2</td> <td>Default</td> <td>TenGigE1/2/15</td></tr></tbody></table> <div class="custom-block tip"><p class="custom-block-title">NOTE</p> <p>The scripts and reference files provided with this document are included as examples on how to build the solution and they are not supported by Hewlett Packard Enterprise. It is expected that the scripts and reference files will be modified to meet the requirements of the deployment environment by the user prior to installation.</p></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/hpe-solutions-hpecp/Solution components/Solution components.html" class="prev">
        Solution components
      </a></span> <span class="next"><a href="/hpe-solutions-hpecp/Worker-node-configuration/Worker-node-configuration.html">
        Worker node configuration
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/hpe-solutions-hpecp/assets/js/app.da8e75f2.js" defer></script><script src="/hpe-solutions-hpecp/assets/js/2.af88cad6.js" defer></script><script src="/hpe-solutions-hpecp/assets/js/7.d6beb650.js" defer></script>
  </body>
</html>
